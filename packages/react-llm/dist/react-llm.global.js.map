{"version":3,"sources":["../src/index.ts","../../../node_modules/.pnpm/preact@10.26.9/node_modules/preact/src/constants.js","../../../node_modules/.pnpm/preact@10.26.9/node_modules/preact/src/util.js","../../../node_modules/.pnpm/preact@10.26.9/node_modules/preact/src/options.js","../../../node_modules/.pnpm/preact@10.26.9/node_modules/preact/src/create-element.js","../../../node_modules/.pnpm/preact@10.26.9/node_modules/preact/src/component.js","../../../node_modules/.pnpm/preact@10.26.9/node_modules/preact/src/diff/props.js","../../../node_modules/.pnpm/preact@10.26.9/node_modules/preact/src/create-context.js","../../../node_modules/.pnpm/preact@10.26.9/node_modules/preact/src/diff/children.js","../../../node_modules/.pnpm/preact@10.26.9/node_modules/preact/src/diff/index.js","../../../node_modules/.pnpm/preact@10.26.9/node_modules/preact/src/render.js","../../../node_modules/.pnpm/preact@10.26.9/node_modules/preact/src/clone-element.js","../../../node_modules/.pnpm/preact@10.26.9/node_modules/preact/src/diff/catch-error.js","../../../node_modules/.pnpm/preact@10.26.9/node_modules/preact/hooks/src/index.js","../../../node_modules/.pnpm/@preact+signals-core@1.10.0/node_modules/@preact/signals-core/src/index.ts","../../../node_modules/.pnpm/@preact+signals@1.3.2_preact@10.26.9/node_modules/@preact/signals/src/index.ts","../../../node_modules/.pnpm/marked@11.2.0/node_modules/marked/src/defaults.ts","../../../node_modules/.pnpm/marked@11.2.0/node_modules/marked/src/helpers.ts","../../../node_modules/.pnpm/marked@11.2.0/node_modules/marked/src/Tokenizer.ts","../../../node_modules/.pnpm/marked@11.2.0/node_modules/marked/src/rules.ts","../../../node_modules/.pnpm/marked@11.2.0/node_modules/marked/src/Lexer.ts","../../../node_modules/.pnpm/marked@11.2.0/node_modules/marked/src/Renderer.ts","../../../node_modules/.pnpm/marked@11.2.0/node_modules/marked/src/TextRenderer.ts","../../../node_modules/.pnpm/marked@11.2.0/node_modules/marked/src/Parser.ts","../../../node_modules/.pnpm/marked@11.2.0/node_modules/marked/src/Hooks.ts","../../../node_modules/.pnpm/marked@11.2.0/node_modules/marked/src/Instance.ts","../../../node_modules/.pnpm/marked@11.2.0/node_modules/marked/src/marked.ts","../src/db/simple-storage.ts","../src/components/Toolbar.styles.ts","../../../node_modules/.pnpm/bippy@0.3.17_@types+react@18.3.23_react@19.1.0/node_modules/bippy/dist/rdt-hook-D8LwQB-4.js","../../../node_modules/.pnpm/bippy@0.3.17_@types+react@18.3.23_react@19.1.0/node_modules/bippy/dist/core-wkpXT9Yv.js","../../../node_modules/.pnpm/bippy@0.3.17_@types+react@18.3.23_react@19.1.0/node_modules/bippy/dist/src-C5k3J1-J.js","../src/instrumentation/bippy-adapter.ts","../src/components/ComponentInspector.tsx","../src/components/Toolbar.tsx","../src/utils/event-emitter.ts","../src/llm/openrouter-client.ts","../src/llm/providers.ts"],"sourcesContent":["/** @jsx h */\nimport { h, render } from 'preact';\nimport { Toolbar } from './components/Toolbar';\nimport { LLMHub } from './llm/providers';\n\ninterface ReactLLMConfig {\n  providers?: {\n    openrouter?: string;\n    openai?: string;\n    anthropic?: string;\n    google?: string;\n  };\n  // API endpoint mode (for server-side proxy)\n  apiEndpoint?: string;\n  modelsEndpoint?: string;\n  mode?: 'development' | 'production' | 'demo';\n  position?: 'bottom-right' | 'bottom-left' | 'top-right' | 'top-left';\n  theme?: 'dark' | 'light';\n  siteUrl?: string;\n  siteName?: string;\n  // Legacy support\n  apiKey?: string;\n}\n\ninterface ReactLLMGlobal {\n  init: (config: ReactLLMConfig | string) => void;\n  hub?: LLMHub;\n}\n\ndeclare global {\n  interface Window {\n    ReactLLM: ReactLLMGlobal;\n  }\n}\n\nconst init = async (config: ReactLLMConfig | string) => {\n  try {\n    // Handle legacy string API key format\n    const normalizedConfig: ReactLLMConfig = typeof config === 'string' \n      ? { providers: { openrouter: config } }\n      : config;\n\n    // Create container with shadow DOM\n    const container = document.createElement('div');\n    container.id = 'react-llm-root';\n    document.body.appendChild(container);\n\n    // Create shadow root\n    const shadow = container.attachShadow({ mode: 'open' });\n    const root = document.createElement('div');\n    shadow.appendChild(root);\n\n    // Initialize LLM Hub\n    const hub = new LLMHub();\n    \n    // Initialize providers based on config\n    if (normalizedConfig.mode === 'demo') {\n      // Demo mode - no API keys needed!\n      await hub.initializeDemoMode();\n    } else if (normalizedConfig.apiEndpoint) {\n      // Use API endpoint mode (for server-side proxy)\n      await hub.initializeApiMode(normalizedConfig.apiEndpoint, normalizedConfig.modelsEndpoint);\n    } else if (normalizedConfig.providers?.openrouter || normalizedConfig.apiKey) {\n      // Direct API key mode (for development)\n      await hub.initializeProvider('openrouter', \n        normalizedConfig.providers?.openrouter || normalizedConfig.apiKey!, \n        {\n          siteUrl: normalizedConfig.siteUrl,\n          siteName: normalizedConfig.siteName\n        }\n      );\n    } else {\n      // Default to demo mode if nothing configured\n      await hub.initializeDemoMode();\n    }\n    \n    // Store hub globally for debugging\n    window.ReactLLM.hub = hub;\n\n    // Pass config to Toolbar\n    render(h(Toolbar, { \n      hub,\n      config: normalizedConfig \n    }), root);\n    \n    console.log('React-LLM initialized successfully in', normalizedConfig.apiEndpoint ? 'API mode' : 'direct mode');\n  } catch (error) {\n    console.error('Failed to initialize React-LLM:', error);\n    throw error;\n  }\n};\n\n// Explicitly set up global object\nwindow.ReactLLM = {\n  init\n};\n\nexport { init };\n","/** Normal hydration that attaches to a DOM tree but does not diff it. */\nexport const MODE_HYDRATE = 1 << 5;\n/** Signifies this VNode suspended on the previous render */\nexport const MODE_SUSPENDED = 1 << 7;\n/** Indicates that this node needs to be inserted while patching children */\nexport const INSERT_VNODE = 1 << 2;\n/** Indicates a VNode has been matched with another VNode in the diff */\nexport const MATCHED = 1 << 1;\n\n/** Reset all mode flags */\nexport const RESET_MODE = ~(MODE_HYDRATE | MODE_SUSPENDED);\n\nexport const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\nexport const XHTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\nexport const MATH_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n\nexport const NULL = null;\nexport const UNDEFINED = undefined;\nexport const EMPTY_OBJ = /** @type {any} */ ({});\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL =\n\t/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n","import { EMPTY_ARR } from './constants';\n\nexport const isArray = Array.isArray;\n\n/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\t// @ts-expect-error We change the type of `obj` to be `O & P`\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Remove a child node from its parent if attached. This is a workaround for\n * IE11 which doesn't support `Element.prototype.remove()`. Using this function\n * is smaller than including a dedicated polyfill.\n * @param {import('./index').ContainerNode} node The node to remove\n */\nexport function removeNode(node) {\n\tif (node && node.parentNode) node.parentNode.removeChild(node);\n}\n\nexport const slice = EMPTY_ARR.slice;\n","import { _catchError } from './diff/catch-error';\n\n/**\n * The `option` object can potentially contain callback functions\n * that are called during various stages of our renderer. This is the\n * foundation on which all our addons like `preact/debug`, `preact/compat`,\n * and `preact/hooks` are based on. See the `Options` type in `internal.d.ts`\n * for a full list of available option hooks (most editors/IDEs allow you to\n * ctrl+click or cmd+click on mac the type definition below).\n * @type {import('./internal').Options}\n */\nconst options = {\n\t_catchError\n};\n\nexport default options;\n","import { slice } from './util';\nimport options from './options';\nimport { NULL, UNDEFINED } from './constants';\n\nlet vnodeId = 0;\n\n/**\n * Create an virtual node (used for JSX)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component constructor for this\n * virtual node\n * @param {object | null | undefined} [props] The properties of the virtual node\n * @param {Array<import('.').ComponentChildren>} [children] The children of the\n * virtual node\n * @returns {import('./internal').VNode}\n */\nexport function createElement(type, props, children) {\n\tlet normalizedProps = {},\n\t\tkey,\n\t\tref,\n\t\ti;\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse normalizedProps[i] = props[i];\n\t}\n\n\tif (arguments.length > 2) {\n\t\tnormalizedProps.children =\n\t\t\targuments.length > 3 ? slice.call(arguments, 2) : children;\n\t}\n\n\t// If a Component VNode, check for and apply defaultProps\n\t// Note: type may be undefined in development, must never error here.\n\tif (typeof type == 'function' && type.defaultProps != NULL) {\n\t\tfor (i in type.defaultProps) {\n\t\t\tif (normalizedProps[i] === UNDEFINED) {\n\t\t\t\tnormalizedProps[i] = type.defaultProps[i];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn createVNode(type, normalizedProps, key, ref, NULL);\n}\n\n/**\n * Create a VNode (used internally by Preact)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * Constructor for this virtual node\n * @param {object | string | number | null} props The properties of this virtual node.\n * If this virtual node represents a text node, this is the text of the node (string or number).\n * @param {string | number | null} key The key for this virtual node, used when\n * diffing it against its children\n * @param {import('./internal').VNode[\"ref\"]} ref The ref property that will\n * receive a reference to its created child\n * @returns {import('./internal').VNode}\n */\nexport function createVNode(type, props, key, ref, original) {\n\t// V8 seems to be better at detecting type shapes if the object is allocated from the same call site\n\t// Do not inline into createElement and coerceToVNode!\n\t/** @type {import('./internal').VNode} */\n\tconst vnode = {\n\t\ttype,\n\t\tprops,\n\t\tkey,\n\t\tref,\n\t\t_children: NULL,\n\t\t_parent: NULL,\n\t\t_depth: 0,\n\t\t_dom: NULL,\n\t\t_component: NULL,\n\t\tconstructor: UNDEFINED,\n\t\t_original: original == NULL ? ++vnodeId : original,\n\t\t_index: -1,\n\t\t_flags: 0\n\t};\n\n\t// Only invoke the vnode hook if this was *not* a direct copy:\n\tif (original == NULL && options.vnode != NULL) options.vnode(vnode);\n\n\treturn vnode;\n}\n\nexport function createRef() {\n\treturn { current: NULL };\n}\n\nexport function Fragment(props) {\n\treturn props.children;\n}\n\n/**\n * Check if a the argument is a valid Preact VNode.\n * @param {*} vnode\n * @returns {vnode is VNode}\n */\nexport const isValidElement = vnode =>\n\tvnode != NULL && vnode.constructor == UNDEFINED;\n","import { assign } from './util';\nimport { diff, commitRoot } from './diff/index';\nimport options from './options';\nimport { Fragment } from './create-element';\nimport { MODE_HYDRATE, NULL } from './constants';\n\n/**\n * Base Component class. Provides `setState()` and `forceUpdate()`, which\n * trigger rendering\n * @param {object} props The initial component props\n * @param {object} context The initial context from parent components'\n * getChildContext\n */\nexport function BaseComponent(props, context) {\n\tthis.props = props;\n\tthis.context = context;\n}\n\n/**\n * Update component state and schedule a re-render.\n * @this {import('./internal').Component}\n * @param {object | ((s: object, p: object) => object)} update A hash of state\n * properties to update with new values or a function that given the current\n * state and props returns a new partial state\n * @param {() => void} [callback] A function to be called once component state is\n * updated\n */\nBaseComponent.prototype.setState = function (update, callback) {\n\t// only clone state when copying to nextState the first time.\n\tlet s;\n\tif (this._nextState != NULL && this._nextState != this.state) {\n\t\ts = this._nextState;\n\t} else {\n\t\ts = this._nextState = assign({}, this.state);\n\t}\n\n\tif (typeof update == 'function') {\n\t\t// Some libraries like `immer` mark the current state as readonly,\n\t\t// preventing us from mutating it, so we need to clone it. See #2716\n\t\tupdate = update(assign({}, s), this.props);\n\t}\n\n\tif (update) {\n\t\tassign(s, update);\n\t}\n\n\t// Skip update if updater function returned null\n\tif (update == NULL) return;\n\n\tif (this._vnode) {\n\t\tif (callback) {\n\t\t\tthis._stateCallbacks.push(callback);\n\t\t}\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Immediately perform a synchronous re-render of the component\n * @this {import('./internal').Component}\n * @param {() => void} [callback] A function to be called after component is\n * re-rendered\n */\nBaseComponent.prototype.forceUpdate = function (callback) {\n\tif (this._vnode) {\n\t\t// Set render mode so that we can differentiate where the render request\n\t\t// is coming from. We need this because forceUpdate should never call\n\t\t// shouldComponentUpdate\n\t\tthis._force = true;\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Accepts `props` and `state`, and returns a new Virtual DOM tree to build.\n * Virtual DOM is generally constructed via [JSX](https://jasonformat.com/wtf-is-jsx).\n * @param {object} props Props (eg: JSX attributes) received from parent\n * element/component\n * @param {object} state The component's current state\n * @param {object} context Context object, as returned by the nearest\n * ancestor's `getChildContext()`\n * @returns {ComponentChildren | void}\n */\nBaseComponent.prototype.render = Fragment;\n\n/**\n * @param {import('./internal').VNode} vnode\n * @param {number | null} [childIndex]\n */\nexport function getDomSibling(vnode, childIndex) {\n\tif (childIndex == NULL) {\n\t\t// Use childIndex==null as a signal to resume the search from the vnode's sibling\n\t\treturn vnode._parent\n\t\t\t? getDomSibling(vnode._parent, vnode._index + 1)\n\t\t\t: NULL;\n\t}\n\n\tlet sibling;\n\tfor (; childIndex < vnode._children.length; childIndex++) {\n\t\tsibling = vnode._children[childIndex];\n\n\t\tif (sibling != NULL && sibling._dom != NULL) {\n\t\t\t// Since updateParentDomPointers keeps _dom pointer correct,\n\t\t\t// we can rely on _dom to tell us if this subtree contains a\n\t\t\t// rendered DOM node, and what the first rendered DOM node is\n\t\t\treturn sibling._dom;\n\t\t}\n\t}\n\n\t// If we get here, we have not found a DOM node in this vnode's children.\n\t// We must resume from this vnode's sibling (in it's parent _children array)\n\t// Only climb up and search the parent if we aren't searching through a DOM\n\t// VNode (meaning we reached the DOM parent of the original vnode that began\n\t// the search)\n\treturn typeof vnode.type == 'function' ? getDomSibling(vnode) : NULL;\n}\n\n/**\n * Trigger in-place re-rendering of a component.\n * @param {import('./internal').Component} component The component to rerender\n */\nfunction renderComponent(component) {\n\tlet oldVNode = component._vnode,\n\t\toldDom = oldVNode._dom,\n\t\tcommitQueue = [],\n\t\trefQueue = [];\n\n\tif (component._parentDom) {\n\t\tconst newVNode = assign({}, oldVNode);\n\t\tnewVNode._original = oldVNode._original + 1;\n\t\tif (options.vnode) options.vnode(newVNode);\n\n\t\tdiff(\n\t\t\tcomponent._parentDom,\n\t\t\tnewVNode,\n\t\t\toldVNode,\n\t\t\tcomponent._globalContext,\n\t\t\tcomponent._parentDom.namespaceURI,\n\t\t\toldVNode._flags & MODE_HYDRATE ? [oldDom] : NULL,\n\t\t\tcommitQueue,\n\t\t\toldDom == NULL ? getDomSibling(oldVNode) : oldDom,\n\t\t\t!!(oldVNode._flags & MODE_HYDRATE),\n\t\t\trefQueue\n\t\t);\n\n\t\tnewVNode._original = oldVNode._original;\n\t\tnewVNode._parent._children[newVNode._index] = newVNode;\n\t\tcommitRoot(commitQueue, newVNode, refQueue);\n\n\t\tif (newVNode._dom != oldDom) {\n\t\t\tupdateParentDomPointers(newVNode);\n\t\t}\n\t}\n}\n\n/**\n * @param {import('./internal').VNode} vnode\n */\nfunction updateParentDomPointers(vnode) {\n\tif ((vnode = vnode._parent) != NULL && vnode._component != NULL) {\n\t\tvnode._dom = vnode._component.base = NULL;\n\t\tfor (let i = 0; i < vnode._children.length; i++) {\n\t\t\tlet child = vnode._children[i];\n\t\t\tif (child != NULL && child._dom != NULL) {\n\t\t\t\tvnode._dom = vnode._component.base = child._dom;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn updateParentDomPointers(vnode);\n\t}\n}\n\n/**\n * The render queue\n * @type {Array<import('./internal').Component>}\n */\nlet rerenderQueue = [];\n\n/*\n * The value of `Component.debounce` must asynchronously invoke the passed in callback. It is\n * important that contributors to Preact can consistently reason about what calls to `setState`, etc.\n * do, and when their effects will be applied. See the links below for some further reading on designing\n * asynchronous APIs.\n * * [Designing APIs for Asynchrony](https://blog.izs.me/2013/08/designing-apis-for-asynchrony)\n * * [Callbacks synchronous and asynchronous](https://blog.ometer.com/2011/07/24/callbacks-synchronous-and-asynchronous/)\n */\n\nlet prevDebounce;\n\nconst defer =\n\ttypeof Promise == 'function'\n\t\t? Promise.prototype.then.bind(Promise.resolve())\n\t\t: setTimeout;\n\n/**\n * Enqueue a rerender of a component\n * @param {import('./internal').Component} c The component to rerender\n */\nexport function enqueueRender(c) {\n\tif (\n\t\t(!c._dirty &&\n\t\t\t(c._dirty = true) &&\n\t\t\trerenderQueue.push(c) &&\n\t\t\t!process._rerenderCount++) ||\n\t\tprevDebounce != options.debounceRendering\n\t) {\n\t\tprevDebounce = options.debounceRendering;\n\t\t(prevDebounce || defer)(process);\n\t}\n}\n\n/**\n * @param {import('./internal').Component} a\n * @param {import('./internal').Component} b\n */\nconst depthSort = (a, b) => a._vnode._depth - b._vnode._depth;\n\n/** Flush the render queue by rerendering all queued components */\nfunction process() {\n\tlet c,\n\t\tl = 1;\n\n\t// Don't update `renderCount` yet. Keep its value non-zero to prevent unnecessary\n\t// process() calls from getting scheduled while `queue` is still being consumed.\n\twhile (rerenderQueue.length) {\n\t\t// Keep the rerender queue sorted by (depth, insertion order). The queue\n\t\t// will initially be sorted on the first iteration only if it has more than 1 item.\n\t\t//\n\t\t// New items can be added to the queue e.g. when rerendering a provider, so we want to\n\t\t// keep the order from top to bottom with those new items so we can handle them in a\n\t\t// single pass\n\t\tif (rerenderQueue.length > l) {\n\t\t\trerenderQueue.sort(depthSort);\n\t\t}\n\n\t\tc = rerenderQueue.shift();\n\t\tl = rerenderQueue.length;\n\n\t\tif (c._dirty) {\n\t\t\trenderComponent(c);\n\t\t}\n\t}\n\tprocess._rerenderCount = 0;\n}\n\nprocess._rerenderCount = 0;\n","import { IS_NON_DIMENSIONAL, NULL, SVG_NAMESPACE } from '../constants';\nimport options from '../options';\n\nfunction setStyle(style, key, value) {\n\tif (key[0] == '-') {\n\t\tstyle.setProperty(key, value == NULL ? '' : value);\n\t} else if (value == NULL) {\n\t\tstyle[key] = '';\n\t} else if (typeof value != 'number' || IS_NON_DIMENSIONAL.test(key)) {\n\t\tstyle[key] = value;\n\t} else {\n\t\tstyle[key] = value + 'px';\n\t}\n}\n\nconst CAPTURE_REGEX = /(PointerCapture)$|Capture$/i;\n\n// A logical clock to solve issues like https://github.com/preactjs/preact/issues/3927.\n// When the DOM performs an event it leaves micro-ticks in between bubbling up which means that\n// an event can trigger on a newly reated DOM-node while the event bubbles up.\n//\n// Originally inspired by Vue\n// (https://github.com/vuejs/core/blob/caeb8a68811a1b0f79/packages/runtime-dom/src/modules/events.ts#L90-L101),\n// but modified to use a logical clock instead of Date.now() in case event handlers get attached\n// and events get dispatched during the same millisecond.\n//\n// The clock is incremented after each new event dispatch. This allows 1 000 000 new events\n// per second for over 280 years before the value reaches Number.MAX_SAFE_INTEGER (2**53 - 1).\nlet eventClock = 0;\n\n/**\n * Set a property value on a DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to modify\n * @param {string} name The name of the property to set\n * @param {*} value The value to set the property to\n * @param {*} oldValue The old value the property had\n * @param {string} namespace Whether or not this DOM node is an SVG node or not\n */\nexport function setProperty(dom, name, value, oldValue, namespace) {\n\tlet useCapture;\n\n\to: if (name == 'style') {\n\t\tif (typeof value == 'string') {\n\t\t\tdom.style.cssText = value;\n\t\t} else {\n\t\t\tif (typeof oldValue == 'string') {\n\t\t\t\tdom.style.cssText = oldValue = '';\n\t\t\t}\n\n\t\t\tif (oldValue) {\n\t\t\t\tfor (name in oldValue) {\n\t\t\t\t\tif (!(value && name in value)) {\n\t\t\t\t\t\tsetStyle(dom.style, name, '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (value) {\n\t\t\t\tfor (name in value) {\n\t\t\t\t\tif (!oldValue || value[name] != oldValue[name]) {\n\t\t\t\t\t\tsetStyle(dom.style, name, value[name]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// Benchmark for comparison: https://esbench.com/bench/574c954bdb965b9a00965ac6\n\telse if (name[0] == 'o' && name[1] == 'n') {\n\t\tuseCapture = name != (name = name.replace(CAPTURE_REGEX, '$1'));\n\t\tconst lowerCaseName = name.toLowerCase();\n\n\t\t// Infer correct casing for DOM built-in events:\n\t\tif (lowerCaseName in dom || name == 'onFocusOut' || name == 'onFocusIn')\n\t\t\tname = lowerCaseName.slice(2);\n\t\telse name = name.slice(2);\n\n\t\tif (!dom._listeners) dom._listeners = {};\n\t\tdom._listeners[name + useCapture] = value;\n\n\t\tif (value) {\n\t\t\tif (!oldValue) {\n\t\t\t\tvalue._attached = eventClock;\n\t\t\t\tdom.addEventListener(\n\t\t\t\t\tname,\n\t\t\t\t\tuseCapture ? eventProxyCapture : eventProxy,\n\t\t\t\t\tuseCapture\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tvalue._attached = oldValue._attached;\n\t\t\t}\n\t\t} else {\n\t\t\tdom.removeEventListener(\n\t\t\t\tname,\n\t\t\t\tuseCapture ? eventProxyCapture : eventProxy,\n\t\t\t\tuseCapture\n\t\t\t);\n\t\t}\n\t} else {\n\t\tif (namespace == SVG_NAMESPACE) {\n\t\t\t// Normalize incorrect prop usage for SVG:\n\t\t\t// - xlink:href / xlinkHref --> href (xlink:href was removed from SVG and isn't needed)\n\t\t\t// - className --> class\n\t\t\tname = name.replace(/xlink(H|:h)/, 'h').replace(/sName$/, 's');\n\t\t} else if (\n\t\t\tname != 'width' &&\n\t\t\tname != 'height' &&\n\t\t\tname != 'href' &&\n\t\t\tname != 'list' &&\n\t\t\tname != 'form' &&\n\t\t\t// Default value in browsers is `-1` and an empty string is\n\t\t\t// cast to `0` instead\n\t\t\tname != 'tabIndex' &&\n\t\t\tname != 'download' &&\n\t\t\tname != 'rowSpan' &&\n\t\t\tname != 'colSpan' &&\n\t\t\tname != 'role' &&\n\t\t\tname != 'popover' &&\n\t\t\tname in dom\n\t\t) {\n\t\t\ttry {\n\t\t\t\tdom[name] = value == NULL ? '' : value;\n\t\t\t\t// labelled break is 1b smaller here than a return statement (sorry)\n\t\t\t\tbreak o;\n\t\t\t} catch (e) {}\n\t\t}\n\n\t\t// aria- and data- attributes have no boolean representation.\n\t\t// A `false` value is different from the attribute not being\n\t\t// present, so we can't remove it. For non-boolean aria\n\t\t// attributes we could treat false as a removal, but the\n\t\t// amount of exceptions would cost too many bytes. On top of\n\t\t// that other frameworks generally stringify `false`.\n\n\t\tif (typeof value == 'function') {\n\t\t\t// never serialize functions as attribute values\n\t\t} else if (value != NULL && (value !== false || name[4] == '-')) {\n\t\t\tdom.setAttribute(name, name == 'popover' && value == true ? '' : value);\n\t\t} else {\n\t\t\tdom.removeAttribute(name);\n\t\t}\n\t}\n}\n\n/**\n * Create an event proxy function.\n * @param {boolean} useCapture Is the event handler for the capture phase.\n * @private\n */\nfunction createEventProxy(useCapture) {\n\t/**\n\t * Proxy an event to hooked event handlers\n\t * @param {import('../internal').PreactEvent} e The event object from the browser\n\t * @private\n\t */\n\treturn function (e) {\n\t\tif (this._listeners) {\n\t\t\tconst eventHandler = this._listeners[e.type + useCapture];\n\t\t\tif (e._dispatched == NULL) {\n\t\t\t\te._dispatched = eventClock++;\n\n\t\t\t\t// When `e._dispatched` is smaller than the time when the targeted event\n\t\t\t\t// handler was attached we know we have bubbled up to an element that was added\n\t\t\t\t// during patching the DOM.\n\t\t\t} else if (e._dispatched < eventHandler._attached) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn eventHandler(options.event ? options.event(e) : e);\n\t\t}\n\t};\n}\n\nconst eventProxy = createEventProxy(false);\nconst eventProxyCapture = createEventProxy(true);\n","import { enqueueRender } from './component';\nimport { NULL } from './constants';\n\nexport let i = 0;\n\nexport function createContext(defaultValue) {\n\tfunction Context(props) {\n\t\tif (!this.getChildContext) {\n\t\t\t/** @type {Set<import('./internal').Component> | null} */\n\t\t\tlet subs = new Set();\n\t\t\tlet ctx = {};\n\t\t\tctx[Context._id] = this;\n\n\t\t\tthis.getChildContext = () => ctx;\n\n\t\t\tthis.componentWillUnmount = () => {\n\t\t\t\tsubs = NULL;\n\t\t\t};\n\n\t\t\tthis.shouldComponentUpdate = function (_props) {\n\t\t\t\t// @ts-expect-error even\n\t\t\t\tif (this.props.value != _props.value) {\n\t\t\t\t\tsubs.forEach(c => {\n\t\t\t\t\t\tc._force = true;\n\t\t\t\t\t\tenqueueRender(c);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.sub = c => {\n\t\t\t\tsubs.add(c);\n\t\t\t\tlet old = c.componentWillUnmount;\n\t\t\t\tc.componentWillUnmount = () => {\n\t\t\t\t\tif (subs) {\n\t\t\t\t\t\tsubs.delete(c);\n\t\t\t\t\t}\n\t\t\t\t\tif (old) old.call(c);\n\t\t\t\t};\n\t\t\t};\n\t\t}\n\n\t\treturn props.children;\n\t}\n\n\tContext._id = '__cC' + i++;\n\tContext._defaultValue = defaultValue;\n\n\t/** @type {import('./internal').FunctionComponent} */\n\tContext.Consumer = (props, contextValue) => {\n\t\treturn props.children(contextValue);\n\t};\n\n\t// we could also get rid of _contextRef entirely\n\tContext.Provider =\n\t\tContext._contextRef =\n\t\tContext.Consumer.contextType =\n\t\t\tContext;\n\n\treturn Context;\n}\n","import { diff, unmount, applyRef } from './index';\nimport { createVNode, Fragment } from '../create-element';\nimport {\n\tEMPTY_OBJ,\n\tEMPTY_ARR,\n\tINSERT_VNODE,\n\tMATCHED,\n\tUNDEFINED,\n\tNULL\n} from '../constants';\nimport { isArray } from '../util';\nimport { getDomSibling } from '../component';\n\n/**\n * @typedef {import('../internal').ComponentChildren} ComponentChildren\n * @typedef {import('../internal').Component} Component\n * @typedef {import('../internal').PreactElement} PreactElement\n * @typedef {import('../internal').VNode} VNode\n */\n\n/**\n * Diff the children of a virtual node\n * @param {PreactElement} parentDom The DOM element whose children are being\n * diffed\n * @param {ComponentChildren[]} renderResult\n * @param {VNode} newParentVNode The new virtual node whose children should be\n * diff'ed against oldParentVNode\n * @param {VNode} oldParentVNode The old virtual node whose children should be\n * diff'ed against newParentVNode\n * @param {object} globalContext The current context object - modified by\n * getChildContext\n * @param {string} namespace Current namespace of the DOM node (HTML, SVG, or MathML)\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {PreactElement} oldDom The current attached DOM element any new dom\n * elements should be placed around. Likely `null` on first render (except when\n * hydrating). Can be a sibling DOM element when diffing Fragments that have\n * siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n */\nexport function diffChildren(\n\tparentDom,\n\trenderResult,\n\tnewParentVNode,\n\toldParentVNode,\n\tglobalContext,\n\tnamespace,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating,\n\trefQueue\n) {\n\tlet i,\n\t\t/** @type {VNode} */\n\t\toldVNode,\n\t\t/** @type {VNode} */\n\t\tchildVNode,\n\t\t/** @type {PreactElement} */\n\t\tnewDom,\n\t\t/** @type {PreactElement} */\n\t\tfirstChildDom;\n\n\t// This is a compression of oldParentVNode!=null && oldParentVNode != EMPTY_OBJ && oldParentVNode._children || EMPTY_ARR\n\t// as EMPTY_OBJ._children should be `undefined`.\n\t/** @type {VNode[]} */\n\tlet oldChildren = (oldParentVNode && oldParentVNode._children) || EMPTY_ARR;\n\n\tlet newChildrenLength = renderResult.length;\n\n\toldDom = constructNewChildrenArray(\n\t\tnewParentVNode,\n\t\trenderResult,\n\t\toldChildren,\n\t\toldDom,\n\t\tnewChildrenLength\n\t);\n\n\tfor (i = 0; i < newChildrenLength; i++) {\n\t\tchildVNode = newParentVNode._children[i];\n\t\tif (childVNode == NULL) continue;\n\n\t\t// At this point, constructNewChildrenArray has assigned _index to be the\n\t\t// matchingIndex for this VNode's oldVNode (or -1 if there is no oldVNode).\n\t\tif (childVNode._index == -1) {\n\t\t\toldVNode = EMPTY_OBJ;\n\t\t} else {\n\t\t\toldVNode = oldChildren[childVNode._index] || EMPTY_OBJ;\n\t\t}\n\n\t\t// Update childVNode._index to its final index\n\t\tchildVNode._index = i;\n\n\t\t// Morph the old element into the new one, but don't append it to the dom yet\n\t\tlet result = diff(\n\t\t\tparentDom,\n\t\t\tchildVNode,\n\t\t\toldVNode,\n\t\t\tglobalContext,\n\t\t\tnamespace,\n\t\t\texcessDomChildren,\n\t\t\tcommitQueue,\n\t\t\toldDom,\n\t\t\tisHydrating,\n\t\t\trefQueue\n\t\t);\n\n\t\t// Adjust DOM nodes\n\t\tnewDom = childVNode._dom;\n\t\tif (childVNode.ref && oldVNode.ref != childVNode.ref) {\n\t\t\tif (oldVNode.ref) {\n\t\t\t\tapplyRef(oldVNode.ref, NULL, childVNode);\n\t\t\t}\n\t\t\trefQueue.push(\n\t\t\t\tchildVNode.ref,\n\t\t\t\tchildVNode._component || newDom,\n\t\t\t\tchildVNode\n\t\t\t);\n\t\t}\n\n\t\tif (firstChildDom == NULL && newDom != NULL) {\n\t\t\tfirstChildDom = newDom;\n\t\t}\n\n\t\tif (\n\t\t\tchildVNode._flags & INSERT_VNODE ||\n\t\t\toldVNode._children === childVNode._children\n\t\t) {\n\t\t\toldDom = insert(childVNode, oldDom, parentDom);\n\t\t} else if (typeof childVNode.type == 'function' && result !== UNDEFINED) {\n\t\t\toldDom = result;\n\t\t} else if (newDom) {\n\t\t\toldDom = newDom.nextSibling;\n\t\t}\n\n\t\t// Unset diffing flags\n\t\tchildVNode._flags &= ~(INSERT_VNODE | MATCHED);\n\t}\n\n\tnewParentVNode._dom = firstChildDom;\n\n\treturn oldDom;\n}\n\n/**\n * @param {VNode} newParentVNode\n * @param {ComponentChildren[]} renderResult\n * @param {VNode[]} oldChildren\n */\nfunction constructNewChildrenArray(\n\tnewParentVNode,\n\trenderResult,\n\toldChildren,\n\toldDom,\n\tnewChildrenLength\n) {\n\t/** @type {number} */\n\tlet i;\n\t/** @type {VNode} */\n\tlet childVNode;\n\t/** @type {VNode} */\n\tlet oldVNode;\n\n\tlet oldChildrenLength = oldChildren.length,\n\t\tremainingOldChildren = oldChildrenLength;\n\n\tlet skew = 0;\n\n\tnewParentVNode._children = new Array(newChildrenLength);\n\tfor (i = 0; i < newChildrenLength; i++) {\n\t\t// @ts-expect-error We are reusing the childVNode variable to hold both the\n\t\t// pre and post normalized childVNode\n\t\tchildVNode = renderResult[i];\n\n\t\tif (\n\t\t\tchildVNode == NULL ||\n\t\t\ttypeof childVNode == 'boolean' ||\n\t\t\ttypeof childVNode == 'function'\n\t\t) {\n\t\t\tnewParentVNode._children[i] = NULL;\n\t\t\tcontinue;\n\t\t}\n\t\t// If this newVNode is being reused (e.g. <div>{reuse}{reuse}</div>) in the same diff,\n\t\t// or we are rendering a component (e.g. setState) copy the oldVNodes so it can have\n\t\t// it's own DOM & etc. pointers\n\t\telse if (\n\t\t\ttypeof childVNode == 'string' ||\n\t\t\ttypeof childVNode == 'number' ||\n\t\t\t// eslint-disable-next-line valid-typeof\n\t\t\ttypeof childVNode == 'bigint' ||\n\t\t\tchildVNode.constructor == String\n\t\t) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tNULL,\n\t\t\t\tchildVNode,\n\t\t\t\tNULL,\n\t\t\t\tNULL,\n\t\t\t\tNULL\n\t\t\t);\n\t\t} else if (isArray(childVNode)) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tFragment,\n\t\t\t\t{ children: childVNode },\n\t\t\t\tNULL,\n\t\t\t\tNULL,\n\t\t\t\tNULL\n\t\t\t);\n\t\t} else if (childVNode.constructor == UNDEFINED && childVNode._depth > 0) {\n\t\t\t// VNode is already in use, clone it. This can happen in the following\n\t\t\t// scenario:\n\t\t\t//   const reuse = <div />\n\t\t\t//   <div>{reuse}<span />{reuse}</div>\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tchildVNode.type,\n\t\t\t\tchildVNode.props,\n\t\t\t\tchildVNode.key,\n\t\t\t\tchildVNode.ref ? childVNode.ref : NULL,\n\t\t\t\tchildVNode._original\n\t\t\t);\n\t\t} else {\n\t\t\tchildVNode = newParentVNode._children[i] = childVNode;\n\t\t}\n\n\t\tconst skewedIndex = i + skew;\n\t\tchildVNode._parent = newParentVNode;\n\t\tchildVNode._depth = newParentVNode._depth + 1;\n\n\t\t// Temporarily store the matchingIndex on the _index property so we can pull\n\t\t// out the oldVNode in diffChildren. We'll override this to the VNode's\n\t\t// final index after using this property to get the oldVNode\n\t\tconst matchingIndex = (childVNode._index = findMatchingIndex(\n\t\t\tchildVNode,\n\t\t\toldChildren,\n\t\t\tskewedIndex,\n\t\t\tremainingOldChildren\n\t\t));\n\n\t\toldVNode = NULL;\n\t\tif (matchingIndex != -1) {\n\t\t\toldVNode = oldChildren[matchingIndex];\n\t\t\tremainingOldChildren--;\n\t\t\tif (oldVNode) {\n\t\t\t\toldVNode._flags |= MATCHED;\n\t\t\t}\n\t\t}\n\n\t\t// Here, we define isMounting for the purposes of the skew diffing\n\t\t// algorithm. Nodes that are unsuspending are considered mounting and we detect\n\t\t// this by checking if oldVNode._original == null\n\t\tconst isMounting = oldVNode == NULL || oldVNode._original == NULL;\n\n\t\tif (isMounting) {\n\t\t\tif (matchingIndex == -1) {\n\t\t\t\t// When the array of children is growing we need to decrease the skew\n\t\t\t\t// as we are adding a new element to the array.\n\t\t\t\t// Example:\n\t\t\t\t// [1, 2, 3] --> [0, 1, 2, 3]\n\t\t\t\t// oldChildren   newChildren\n\t\t\t\t//\n\t\t\t\t// The new element is at index 0, so our skew is 0,\n\t\t\t\t// we need to decrease the skew as we are adding a new element.\n\t\t\t\t// The decrease will cause us to compare the element at position 1\n\t\t\t\t// with value 1 with the element at position 0 with value 0.\n\t\t\t\t//\n\t\t\t\t// A linear concept is applied when the array is shrinking,\n\t\t\t\t// if the length is unchanged we can assume that no skew\n\t\t\t\t// changes are needed.\n\t\t\t\tif (newChildrenLength > oldChildrenLength) {\n\t\t\t\t\tskew--;\n\t\t\t\t} else if (newChildrenLength < oldChildrenLength) {\n\t\t\t\t\tskew++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If we are mounting a DOM VNode, mark it for insertion\n\t\t\tif (typeof childVNode.type != 'function') {\n\t\t\t\tchildVNode._flags |= INSERT_VNODE;\n\t\t\t}\n\t\t} else if (matchingIndex != skewedIndex) {\n\t\t\t// When we move elements around i.e. [0, 1, 2] --> [1, 0, 2]\n\t\t\t// --> we diff 1, we find it at position 1 while our skewed index is 0 and our skew is 0\n\t\t\t//     we set the skew to 1 as we found an offset.\n\t\t\t// --> we diff 0, we find it at position 0 while our skewed index is at 2 and our skew is 1\n\t\t\t//     this makes us increase the skew again.\n\t\t\t// --> we diff 2, we find it at position 2 while our skewed index is at 4 and our skew is 2\n\t\t\t//\n\t\t\t// this becomes an optimization question where currently we see a 1 element offset as an insertion\n\t\t\t// or deletion i.e. we optimize for [0, 1, 2] --> [9, 0, 1, 2]\n\t\t\t// while a more than 1 offset we see as a swap.\n\t\t\t// We could probably build heuristics for having an optimized course of action here as well, but\n\t\t\t// might go at the cost of some bytes.\n\t\t\t//\n\t\t\t// If we wanted to optimize for i.e. only swaps we'd just do the last two code-branches and have\n\t\t\t// only the first item be a re-scouting and all the others fall in their skewed counter-part.\n\t\t\t// We could also further optimize for swaps\n\t\t\tif (matchingIndex == skewedIndex - 1) {\n\t\t\t\tskew--;\n\t\t\t} else if (matchingIndex == skewedIndex + 1) {\n\t\t\t\tskew++;\n\t\t\t} else {\n\t\t\t\tif (matchingIndex > skewedIndex) {\n\t\t\t\t\tskew--;\n\t\t\t\t} else {\n\t\t\t\t\tskew++;\n\t\t\t\t}\n\n\t\t\t\t// Move this VNode's DOM if the original index (matchingIndex) doesn't\n\t\t\t\t// match the new skew index (i + new skew)\n\t\t\t\t// In the former two branches we know that it matches after skewing\n\t\t\t\tchildVNode._flags |= INSERT_VNODE;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Remove remaining oldChildren if there are any. Loop forwards so that as we\n\t// unmount DOM from the beginning of the oldChildren, we can adjust oldDom to\n\t// point to the next child, which needs to be the first DOM node that won't be\n\t// unmounted.\n\tif (remainingOldChildren) {\n\t\tfor (i = 0; i < oldChildrenLength; i++) {\n\t\t\toldVNode = oldChildren[i];\n\t\t\tif (oldVNode != NULL && (oldVNode._flags & MATCHED) == 0) {\n\t\t\t\tif (oldVNode._dom == oldDom) {\n\t\t\t\t\toldDom = getDomSibling(oldVNode);\n\t\t\t\t}\n\n\t\t\t\tunmount(oldVNode, oldVNode);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn oldDom;\n}\n\n/**\n * @param {VNode} parentVNode\n * @param {PreactElement} oldDom\n * @param {PreactElement} parentDom\n * @returns {PreactElement}\n */\nfunction insert(parentVNode, oldDom, parentDom) {\n\t// Note: VNodes in nested suspended trees may be missing _children.\n\n\tif (typeof parentVNode.type == 'function') {\n\t\tlet children = parentVNode._children;\n\t\tfor (let i = 0; children && i < children.length; i++) {\n\t\t\tif (children[i]) {\n\t\t\t\t// If we enter this code path on sCU bailout, where we copy\n\t\t\t\t// oldVNode._children to newVNode._children, we need to update the old\n\t\t\t\t// children's _parent pointer to point to the newVNode (parentVNode\n\t\t\t\t// here).\n\t\t\t\tchildren[i]._parent = parentVNode;\n\t\t\t\toldDom = insert(children[i], oldDom, parentDom);\n\t\t\t}\n\t\t}\n\n\t\treturn oldDom;\n\t} else if (parentVNode._dom != oldDom) {\n\t\tif (oldDom && parentVNode.type && !parentDom.contains(oldDom)) {\n\t\t\toldDom = getDomSibling(parentVNode);\n\t\t}\n\t\tparentDom.insertBefore(parentVNode._dom, oldDom || NULL);\n\t\toldDom = parentVNode._dom;\n\t}\n\n\tdo {\n\t\toldDom = oldDom && oldDom.nextSibling;\n\t} while (oldDom != NULL && oldDom.nodeType == 8);\n\n\treturn oldDom;\n}\n\n/**\n * Flatten and loop through the children of a virtual node\n * @param {ComponentChildren} children The unflattened children of a virtual\n * node\n * @returns {VNode[]}\n */\nexport function toChildArray(children, out) {\n\tout = out || [];\n\tif (children == NULL || typeof children == 'boolean') {\n\t} else if (isArray(children)) {\n\t\tchildren.some(child => {\n\t\t\ttoChildArray(child, out);\n\t\t});\n\t} else {\n\t\tout.push(children);\n\t}\n\treturn out;\n}\n\n/**\n * @param {VNode} childVNode\n * @param {VNode[]} oldChildren\n * @param {number} skewedIndex\n * @param {number} remainingOldChildren\n * @returns {number}\n */\nfunction findMatchingIndex(\n\tchildVNode,\n\toldChildren,\n\tskewedIndex,\n\tremainingOldChildren\n) {\n\tconst key = childVNode.key;\n\tconst type = childVNode.type;\n\tlet oldVNode = oldChildren[skewedIndex];\n\n\t// We only need to perform a search if there are more children\n\t// (remainingOldChildren) to search. However, if the oldVNode we just looked\n\t// at skewedIndex was not already used in this diff, then there must be at\n\t// least 1 other (so greater than 1) remainingOldChildren to attempt to match\n\t// against. So the following condition checks that ensuring\n\t// remainingOldChildren > 1 if the oldVNode is not already used/matched. Else\n\t// if the oldVNode was null or matched, then there could needs to be at least\n\t// 1 (aka `remainingOldChildren > 0`) children to find and compare against.\n\t//\n\t// If there is an unkeyed functional VNode, that isn't a built-in like our Fragment,\n\t// we should not search as we risk re-using state of an unrelated VNode. (reverted for now)\n\tlet shouldSearch =\n\t\t// (typeof type != 'function' || type === Fragment || key) &&\n\t\tremainingOldChildren >\n\t\t(oldVNode != NULL && (oldVNode._flags & MATCHED) == 0 ? 1 : 0);\n\n\tif (\n\t\t(oldVNode === NULL && childVNode.key == null) ||\n\t\t(oldVNode &&\n\t\t\tkey == oldVNode.key &&\n\t\t\ttype == oldVNode.type &&\n\t\t\t(oldVNode._flags & MATCHED) == 0)\n\t) {\n\t\treturn skewedIndex;\n\t} else if (shouldSearch) {\n\t\tlet x = skewedIndex - 1;\n\t\tlet y = skewedIndex + 1;\n\t\twhile (x >= 0 || y < oldChildren.length) {\n\t\t\tif (x >= 0) {\n\t\t\t\toldVNode = oldChildren[x];\n\t\t\t\tif (\n\t\t\t\t\toldVNode &&\n\t\t\t\t\t(oldVNode._flags & MATCHED) == 0 &&\n\t\t\t\t\tkey == oldVNode.key &&\n\t\t\t\t\ttype == oldVNode.type\n\t\t\t\t) {\n\t\t\t\t\treturn x;\n\t\t\t\t}\n\t\t\t\tx--;\n\t\t\t}\n\n\t\t\tif (y < oldChildren.length) {\n\t\t\t\toldVNode = oldChildren[y];\n\t\t\t\tif (\n\t\t\t\t\toldVNode &&\n\t\t\t\t\t(oldVNode._flags & MATCHED) == 0 &&\n\t\t\t\t\tkey == oldVNode.key &&\n\t\t\t\t\ttype == oldVNode.type\n\t\t\t\t) {\n\t\t\t\t\treturn y;\n\t\t\t\t}\n\t\t\t\ty++;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn -1;\n}\n","import {\n\tEMPTY_OBJ,\n\tMATH_NAMESPACE,\n\tMODE_HYDRATE,\n\tMODE_SUSPENDED,\n\tNULL,\n\tRESET_MODE,\n\tSVG_NAMESPACE,\n\tUNDEFINED,\n\tXHTML_NAMESPACE\n} from '../constants';\nimport { BaseComponent, getDomSibling } from '../component';\nimport { Fragment } from '../create-element';\nimport { diffChildren } from './children';\nimport { setProperty } from './props';\nimport { assign, isArray, removeNode, slice } from '../util';\nimport options from '../options';\n\n/**\n * @typedef {import('../internal').ComponentChildren} ComponentChildren\n * @typedef {import('../internal').Component} Component\n * @typedef {import('../internal').PreactElement} PreactElement\n * @typedef {import('../internal').VNode} VNode\n */\n\n/**\n * @template {any} T\n * @typedef {import('../internal').Ref<T>} Ref<T>\n */\n\n/**\n * Diff two virtual nodes and apply proper changes to the DOM\n * @param {PreactElement} parentDom The parent of the DOM element\n * @param {VNode} newVNode The new virtual node\n * @param {VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object. Modified by\n * getChildContext\n * @param {string} namespace Current namespace of the DOM node (HTML, SVG, or MathML)\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {PreactElement} oldDom The current attached DOM element any new dom\n * elements should be placed around. Likely `null` on first render (except when\n * hydrating). Can be a sibling DOM element when diffing Fragments that have\n * siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n */\nexport function diff(\n\tparentDom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tnamespace,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating,\n\trefQueue\n) {\n\t/** @type {any} */\n\tlet tmp,\n\t\tnewType = newVNode.type;\n\n\t// When passing through createElement it assigns the object\n\t// constructor as undefined. This to prevent JSON-injection.\n\tif (newVNode.constructor != UNDEFINED) return NULL;\n\n\t// If the previous diff bailed out, resume creating/hydrating.\n\tif (oldVNode._flags & MODE_SUSPENDED) {\n\t\tisHydrating = !!(oldVNode._flags & MODE_HYDRATE);\n\t\toldDom = newVNode._dom = oldVNode._dom;\n\t\texcessDomChildren = [oldDom];\n\t}\n\n\tif ((tmp = options._diff)) tmp(newVNode);\n\n\touter: if (typeof newType == 'function') {\n\t\ttry {\n\t\t\tlet c, isNew, oldProps, oldState, snapshot, clearProcessingException;\n\t\t\tlet newProps = newVNode.props;\n\t\t\tconst isClassComponent =\n\t\t\t\t'prototype' in newType && newType.prototype.render;\n\n\t\t\t// Necessary for createContext api. Setting this property will pass\n\t\t\t// the context value as `this.context` just for this component.\n\t\t\ttmp = newType.contextType;\n\t\t\tlet provider = tmp && globalContext[tmp._id];\n\t\t\tlet componentContext = tmp\n\t\t\t\t? provider\n\t\t\t\t\t? provider.props.value\n\t\t\t\t\t: tmp._defaultValue\n\t\t\t\t: globalContext;\n\n\t\t\t// Get component and set it to `c`\n\t\t\tif (oldVNode._component) {\n\t\t\t\tc = newVNode._component = oldVNode._component;\n\t\t\t\tclearProcessingException = c._processingException = c._pendingError;\n\t\t\t} else {\n\t\t\t\t// Instantiate the new component\n\t\t\t\tif (isClassComponent) {\n\t\t\t\t\t// @ts-expect-error The check above verifies that newType is suppose to be constructed\n\t\t\t\t\tnewVNode._component = c = new newType(newProps, componentContext); // eslint-disable-line new-cap\n\t\t\t\t} else {\n\t\t\t\t\t// @ts-expect-error Trust me, Component implements the interface we want\n\t\t\t\t\tnewVNode._component = c = new BaseComponent(\n\t\t\t\t\t\tnewProps,\n\t\t\t\t\t\tcomponentContext\n\t\t\t\t\t);\n\t\t\t\t\tc.constructor = newType;\n\t\t\t\t\tc.render = doRender;\n\t\t\t\t}\n\t\t\t\tif (provider) provider.sub(c);\n\n\t\t\t\tc.props = newProps;\n\t\t\t\tif (!c.state) c.state = {};\n\t\t\t\tc.context = componentContext;\n\t\t\t\tc._globalContext = globalContext;\n\t\t\t\tisNew = c._dirty = true;\n\t\t\t\tc._renderCallbacks = [];\n\t\t\t\tc._stateCallbacks = [];\n\t\t\t}\n\n\t\t\t// Invoke getDerivedStateFromProps\n\t\t\tif (isClassComponent && c._nextState == NULL) {\n\t\t\t\tc._nextState = c.state;\n\t\t\t}\n\n\t\t\tif (isClassComponent && newType.getDerivedStateFromProps != NULL) {\n\t\t\t\tif (c._nextState == c.state) {\n\t\t\t\t\tc._nextState = assign({}, c._nextState);\n\t\t\t\t}\n\n\t\t\t\tassign(\n\t\t\t\t\tc._nextState,\n\t\t\t\t\tnewType.getDerivedStateFromProps(newProps, c._nextState)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\toldProps = c.props;\n\t\t\toldState = c.state;\n\t\t\tc._vnode = newVNode;\n\n\t\t\t// Invoke pre-render lifecycle methods\n\t\t\tif (isNew) {\n\t\t\t\tif (\n\t\t\t\t\tisClassComponent &&\n\t\t\t\t\tnewType.getDerivedStateFromProps == NULL &&\n\t\t\t\t\tc.componentWillMount != NULL\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillMount();\n\t\t\t\t}\n\n\t\t\t\tif (isClassComponent && c.componentDidMount != NULL) {\n\t\t\t\t\tc._renderCallbacks.push(c.componentDidMount);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (\n\t\t\t\t\tisClassComponent &&\n\t\t\t\t\tnewType.getDerivedStateFromProps == NULL &&\n\t\t\t\t\tnewProps !== oldProps &&\n\t\t\t\t\tc.componentWillReceiveProps != NULL\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillReceiveProps(newProps, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t(!c._force &&\n\t\t\t\t\t\tc.shouldComponentUpdate != NULL &&\n\t\t\t\t\t\tc.shouldComponentUpdate(\n\t\t\t\t\t\t\tnewProps,\n\t\t\t\t\t\t\tc._nextState,\n\t\t\t\t\t\t\tcomponentContext\n\t\t\t\t\t\t) === false) ||\n\t\t\t\t\tnewVNode._original == oldVNode._original\n\t\t\t\t) {\n\t\t\t\t\t// More info about this here: https://gist.github.com/JoviDeCroock/bec5f2ce93544d2e6070ef8e0036e4e8\n\t\t\t\t\tif (newVNode._original != oldVNode._original) {\n\t\t\t\t\t\t// When we are dealing with a bail because of sCU we have to update\n\t\t\t\t\t\t// the props, state and dirty-state.\n\t\t\t\t\t\t// when we are dealing with strict-equality we don't as the child could still\n\t\t\t\t\t\t// be dirtied see #3883\n\t\t\t\t\t\tc.props = newProps;\n\t\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t\t\tc._dirty = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\t\tnewVNode._children.some(vnode => {\n\t\t\t\t\t\tif (vnode) vnode._parent = newVNode;\n\t\t\t\t\t});\n\n\t\t\t\t\tfor (let i = 0; i < c._stateCallbacks.length; i++) {\n\t\t\t\t\t\tc._renderCallbacks.push(c._stateCallbacks[i]);\n\t\t\t\t\t}\n\t\t\t\t\tc._stateCallbacks = [];\n\n\t\t\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\t\t\tcommitQueue.push(c);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\n\t\t\t\tif (c.componentWillUpdate != NULL) {\n\t\t\t\t\tc.componentWillUpdate(newProps, c._nextState, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (isClassComponent && c.componentDidUpdate != NULL) {\n\t\t\t\t\tc._renderCallbacks.push(() => {\n\t\t\t\t\t\tc.componentDidUpdate(oldProps, oldState, snapshot);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tc.context = componentContext;\n\t\t\tc.props = newProps;\n\t\t\tc._parentDom = parentDom;\n\t\t\tc._force = false;\n\n\t\t\tlet renderHook = options._render,\n\t\t\t\tcount = 0;\n\t\t\tif (isClassComponent) {\n\t\t\t\tc.state = c._nextState;\n\t\t\t\tc._dirty = false;\n\n\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\tfor (let i = 0; i < c._stateCallbacks.length; i++) {\n\t\t\t\t\tc._renderCallbacks.push(c._stateCallbacks[i]);\n\t\t\t\t}\n\t\t\t\tc._stateCallbacks = [];\n\t\t\t} else {\n\t\t\t\tdo {\n\t\t\t\t\tc._dirty = false;\n\t\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\t\t// Handle setState called in render, see #2553\n\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t} while (c._dirty && ++count < 25);\n\t\t\t}\n\n\t\t\t// Handle setState called in render, see #2553\n\t\t\tc.state = c._nextState;\n\n\t\t\tif (c.getChildContext != NULL) {\n\t\t\t\tglobalContext = assign(assign({}, globalContext), c.getChildContext());\n\t\t\t}\n\n\t\t\tif (isClassComponent && !isNew && c.getSnapshotBeforeUpdate != NULL) {\n\t\t\t\tsnapshot = c.getSnapshotBeforeUpdate(oldProps, oldState);\n\t\t\t}\n\n\t\t\tlet isTopLevelFragment =\n\t\t\t\ttmp != NULL && tmp.type === Fragment && tmp.key == NULL;\n\t\t\tlet renderResult = tmp;\n\n\t\t\tif (isTopLevelFragment) {\n\t\t\t\trenderResult = cloneNode(tmp.props.children);\n\t\t\t}\n\n\t\t\toldDom = diffChildren(\n\t\t\t\tparentDom,\n\t\t\t\tisArray(renderResult) ? renderResult : [renderResult],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tnamespace,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\toldDom,\n\t\t\t\tisHydrating,\n\t\t\t\trefQueue\n\t\t\t);\n\n\t\t\tc.base = newVNode._dom;\n\n\t\t\t// We successfully rendered this VNode, unset any stored hydration/bailout state:\n\t\t\tnewVNode._flags &= RESET_MODE;\n\n\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\tcommitQueue.push(c);\n\t\t\t}\n\n\t\t\tif (clearProcessingException) {\n\t\t\t\tc._pendingError = c._processingException = NULL;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tnewVNode._original = NULL;\n\t\t\t// if hydrating or creating initial tree, bailout preserves DOM:\n\t\t\tif (isHydrating || excessDomChildren != NULL) {\n\t\t\t\tif (e.then) {\n\t\t\t\t\tnewVNode._flags |= isHydrating\n\t\t\t\t\t\t? MODE_HYDRATE | MODE_SUSPENDED\n\t\t\t\t\t\t: MODE_SUSPENDED;\n\n\t\t\t\t\twhile (oldDom && oldDom.nodeType == 8 && oldDom.nextSibling) {\n\t\t\t\t\t\toldDom = oldDom.nextSibling;\n\t\t\t\t\t}\n\n\t\t\t\t\texcessDomChildren[excessDomChildren.indexOf(oldDom)] = NULL;\n\t\t\t\t\tnewVNode._dom = oldDom;\n\t\t\t\t} else {\n\t\t\t\t\tfor (let i = excessDomChildren.length; i--; ) {\n\t\t\t\t\t\tremoveNode(excessDomChildren[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t}\n\t\t\toptions._catchError(e, newVNode, oldVNode);\n\t\t}\n\t} else if (\n\t\texcessDomChildren == NULL &&\n\t\tnewVNode._original == oldVNode._original\n\t) {\n\t\tnewVNode._children = oldVNode._children;\n\t\tnewVNode._dom = oldVNode._dom;\n\t} else {\n\t\toldDom = newVNode._dom = diffElementNodes(\n\t\t\toldVNode._dom,\n\t\t\tnewVNode,\n\t\t\toldVNode,\n\t\t\tglobalContext,\n\t\t\tnamespace,\n\t\t\texcessDomChildren,\n\t\t\tcommitQueue,\n\t\t\tisHydrating,\n\t\t\trefQueue\n\t\t);\n\t}\n\n\tif ((tmp = options.diffed)) tmp(newVNode);\n\n\treturn newVNode._flags & MODE_SUSPENDED ? undefined : oldDom;\n}\n\n/**\n * @param {Array<Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {VNode} root\n */\nexport function commitRoot(commitQueue, root, refQueue) {\n\tfor (let i = 0; i < refQueue.length; i++) {\n\t\tapplyRef(refQueue[i], refQueue[++i], refQueue[++i]);\n\t}\n\n\tif (options._commit) options._commit(root, commitQueue);\n\n\tcommitQueue.some(c => {\n\t\ttry {\n\t\t\t// @ts-expect-error Reuse the commitQueue variable here so the type changes\n\t\t\tcommitQueue = c._renderCallbacks;\n\t\t\tc._renderCallbacks = [];\n\t\t\tcommitQueue.some(cb => {\n\t\t\t\t// @ts-expect-error See above comment on commitQueue\n\t\t\t\tcb.call(c);\n\t\t\t});\n\t\t} catch (e) {\n\t\t\toptions._catchError(e, c._vnode);\n\t\t}\n\t});\n}\n\nfunction cloneNode(node) {\n\tif (\n\t\ttypeof node != 'object' ||\n\t\tnode == NULL ||\n\t\t(node._depth && node._depth > 0)\n\t) {\n\t\treturn node;\n\t}\n\n\tif (isArray(node)) {\n\t\treturn node.map(cloneNode);\n\t}\n\n\treturn assign({}, node);\n}\n\n/**\n * Diff two virtual nodes representing DOM element\n * @param {PreactElement} dom The DOM element representing the virtual nodes\n * being diffed\n * @param {VNode} newVNode The new virtual node\n * @param {VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object\n * @param {string} namespace Current namespace of the DOM node (HTML, SVG, or MathML)\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n * @returns {PreactElement}\n */\nfunction diffElementNodes(\n\tdom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tnamespace,\n\texcessDomChildren,\n\tcommitQueue,\n\tisHydrating,\n\trefQueue\n) {\n\tlet oldProps = oldVNode.props;\n\tlet newProps = newVNode.props;\n\tlet nodeType = /** @type {string} */ (newVNode.type);\n\t/** @type {any} */\n\tlet i;\n\t/** @type {{ __html?: string }} */\n\tlet newHtml;\n\t/** @type {{ __html?: string }} */\n\tlet oldHtml;\n\t/** @type {ComponentChildren} */\n\tlet newChildren;\n\tlet value;\n\tlet inputValue;\n\tlet checked;\n\n\t// Tracks entering and exiting namespaces when descending through the tree.\n\tif (nodeType == 'svg') namespace = SVG_NAMESPACE;\n\telse if (nodeType == 'math') namespace = MATH_NAMESPACE;\n\telse if (!namespace) namespace = XHTML_NAMESPACE;\n\n\tif (excessDomChildren != NULL) {\n\t\tfor (i = 0; i < excessDomChildren.length; i++) {\n\t\t\tvalue = excessDomChildren[i];\n\n\t\t\t// if newVNode matches an element in excessDomChildren or the `dom`\n\t\t\t// argument matches an element in excessDomChildren, remove it from\n\t\t\t// excessDomChildren so it isn't later removed in diffChildren\n\t\t\tif (\n\t\t\t\tvalue &&\n\t\t\t\t'setAttribute' in value == !!nodeType &&\n\t\t\t\t(nodeType ? value.localName == nodeType : value.nodeType == 3)\n\t\t\t) {\n\t\t\t\tdom = value;\n\t\t\t\texcessDomChildren[i] = NULL;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (dom == NULL) {\n\t\tif (nodeType == NULL) {\n\t\t\treturn document.createTextNode(newProps);\n\t\t}\n\n\t\tdom = document.createElementNS(\n\t\t\tnamespace,\n\t\t\tnodeType,\n\t\t\tnewProps.is && newProps\n\t\t);\n\n\t\t// we are creating a new node, so we can assume this is a new subtree (in\n\t\t// case we are hydrating), this deopts the hydrate\n\t\tif (isHydrating) {\n\t\t\tif (options._hydrationMismatch)\n\t\t\t\toptions._hydrationMismatch(newVNode, excessDomChildren);\n\t\t\tisHydrating = false;\n\t\t}\n\t\t// we created a new parent, so none of the previously attached children can be reused:\n\t\texcessDomChildren = NULL;\n\t}\n\n\tif (nodeType == NULL) {\n\t\t// During hydration, we still have to split merged text from SSR'd HTML.\n\t\tif (oldProps !== newProps && (!isHydrating || dom.data != newProps)) {\n\t\t\tdom.data = newProps;\n\t\t}\n\t} else {\n\t\t// If excessDomChildren was not null, repopulate it with the current element's children:\n\t\texcessDomChildren = excessDomChildren && slice.call(dom.childNodes);\n\n\t\toldProps = oldVNode.props || EMPTY_OBJ;\n\n\t\t// If we are in a situation where we are not hydrating but are using\n\t\t// existing DOM (e.g. replaceNode) we should read the existing DOM\n\t\t// attributes to diff them\n\t\tif (!isHydrating && excessDomChildren != NULL) {\n\t\t\toldProps = {};\n\t\t\tfor (i = 0; i < dom.attributes.length; i++) {\n\t\t\t\tvalue = dom.attributes[i];\n\t\t\t\toldProps[value.name] = value.value;\n\t\t\t}\n\t\t}\n\n\t\tfor (i in oldProps) {\n\t\t\tvalue = oldProps[i];\n\t\t\tif (i == 'children') {\n\t\t\t} else if (i == 'dangerouslySetInnerHTML') {\n\t\t\t\toldHtml = value;\n\t\t\t} else if (!(i in newProps)) {\n\t\t\t\tif (\n\t\t\t\t\t(i == 'value' && 'defaultValue' in newProps) ||\n\t\t\t\t\t(i == 'checked' && 'defaultChecked' in newProps)\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tsetProperty(dom, i, NULL, value, namespace);\n\t\t\t}\n\t\t}\n\n\t\t// During hydration, props are not diffed at all (including dangerouslySetInnerHTML)\n\t\t// @TODO we should warn in debug mode when props don't match here.\n\t\tfor (i in newProps) {\n\t\t\tvalue = newProps[i];\n\t\t\tif (i == 'children') {\n\t\t\t\tnewChildren = value;\n\t\t\t} else if (i == 'dangerouslySetInnerHTML') {\n\t\t\t\tnewHtml = value;\n\t\t\t} else if (i == 'value') {\n\t\t\t\tinputValue = value;\n\t\t\t} else if (i == 'checked') {\n\t\t\t\tchecked = value;\n\t\t\t} else if (\n\t\t\t\t(!isHydrating || typeof value == 'function') &&\n\t\t\t\toldProps[i] !== value\n\t\t\t) {\n\t\t\t\tsetProperty(dom, i, value, oldProps[i], namespace);\n\t\t\t}\n\t\t}\n\n\t\t// If the new vnode didn't have dangerouslySetInnerHTML, diff its children\n\t\tif (newHtml) {\n\t\t\t// Avoid re-applying the same '__html' if it did not changed between re-render\n\t\t\tif (\n\t\t\t\t!isHydrating &&\n\t\t\t\t(!oldHtml ||\n\t\t\t\t\t(newHtml.__html != oldHtml.__html && newHtml.__html != dom.innerHTML))\n\t\t\t) {\n\t\t\t\tdom.innerHTML = newHtml.__html;\n\t\t\t}\n\n\t\t\tnewVNode._children = [];\n\t\t} else {\n\t\t\tif (oldHtml) dom.innerHTML = '';\n\n\t\t\tdiffChildren(\n\t\t\t\t// @ts-expect-error\n\t\t\t\tnewVNode.type == 'template' ? dom.content : dom,\n\t\t\t\tisArray(newChildren) ? newChildren : [newChildren],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tnodeType == 'foreignObject' ? XHTML_NAMESPACE : namespace,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\texcessDomChildren\n\t\t\t\t\t? excessDomChildren[0]\n\t\t\t\t\t: oldVNode._children && getDomSibling(oldVNode, 0),\n\t\t\t\tisHydrating,\n\t\t\t\trefQueue\n\t\t\t);\n\n\t\t\t// Remove children that are not part of any vnode.\n\t\t\tif (excessDomChildren != NULL) {\n\t\t\t\tfor (i = excessDomChildren.length; i--; ) {\n\t\t\t\t\tremoveNode(excessDomChildren[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// As above, don't diff props during hydration\n\t\tif (!isHydrating) {\n\t\t\ti = 'value';\n\t\t\tif (nodeType == 'progress' && inputValue == NULL) {\n\t\t\t\tdom.removeAttribute('value');\n\t\t\t} else if (\n\t\t\t\tinputValue != UNDEFINED &&\n\t\t\t\t// #2756 For the <progress>-element the initial value is 0,\n\t\t\t\t// despite the attribute not being present. When the attribute\n\t\t\t\t// is missing the progress bar is treated as indeterminate.\n\t\t\t\t// To fix that we'll always update it when it is 0 for progress elements\n\t\t\t\t(inputValue !== dom[i] ||\n\t\t\t\t\t(nodeType == 'progress' && !inputValue) ||\n\t\t\t\t\t// This is only for IE 11 to fix <select> value not being updated.\n\t\t\t\t\t// To avoid a stale select value we need to set the option.value\n\t\t\t\t\t// again, which triggers IE11 to re-evaluate the select value\n\t\t\t\t\t(nodeType == 'option' && inputValue != oldProps[i]))\n\t\t\t) {\n\t\t\t\tsetProperty(dom, i, inputValue, oldProps[i], namespace);\n\t\t\t}\n\n\t\t\ti = 'checked';\n\t\t\tif (checked != UNDEFINED && checked != dom[i]) {\n\t\t\t\tsetProperty(dom, i, checked, oldProps[i], namespace);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn dom;\n}\n\n/**\n * Invoke or update a ref, depending on whether it is a function or object ref.\n * @param {Ref<any> & { _unmount?: unknown }} ref\n * @param {any} value\n * @param {VNode} vnode\n */\nexport function applyRef(ref, value, vnode) {\n\ttry {\n\t\tif (typeof ref == 'function') {\n\t\t\tlet hasRefUnmount = typeof ref._unmount == 'function';\n\t\t\tif (hasRefUnmount) {\n\t\t\t\t// @ts-ignore TS doesn't like moving narrowing checks into variables\n\t\t\t\tref._unmount();\n\t\t\t}\n\n\t\t\tif (!hasRefUnmount || value != NULL) {\n\t\t\t\t// Store the cleanup function on the function\n\t\t\t\t// instance object itself to avoid shape\n\t\t\t\t// transitioning vnode\n\t\t\t\tref._unmount = ref(value);\n\t\t\t}\n\t\t} else ref.current = value;\n\t} catch (e) {\n\t\toptions._catchError(e, vnode);\n\t}\n}\n\n/**\n * Unmount a virtual node from the tree and apply DOM changes\n * @param {VNode} vnode The virtual node to unmount\n * @param {VNode} parentVNode The parent of the VNode that initiated the unmount\n * @param {boolean} [skipRemove] Flag that indicates that a parent node of the\n * current element is already detached from the DOM.\n */\nexport function unmount(vnode, parentVNode, skipRemove) {\n\tlet r;\n\tif (options.unmount) options.unmount(vnode);\n\n\tif ((r = vnode.ref)) {\n\t\tif (!r.current || r.current == vnode._dom) {\n\t\t\tapplyRef(r, NULL, parentVNode);\n\t\t}\n\t}\n\n\tif ((r = vnode._component) != NULL) {\n\t\tif (r.componentWillUnmount) {\n\t\t\ttry {\n\t\t\t\tr.componentWillUnmount();\n\t\t\t} catch (e) {\n\t\t\t\toptions._catchError(e, parentVNode);\n\t\t\t}\n\t\t}\n\n\t\tr.base = r._parentDom = NULL;\n\t}\n\n\tif ((r = vnode._children)) {\n\t\tfor (let i = 0; i < r.length; i++) {\n\t\t\tif (r[i]) {\n\t\t\t\tunmount(\n\t\t\t\t\tr[i],\n\t\t\t\t\tparentVNode,\n\t\t\t\t\tskipRemove || typeof vnode.type != 'function'\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (!skipRemove) {\n\t\tremoveNode(vnode._dom);\n\t}\n\n\tvnode._component = vnode._parent = vnode._dom = UNDEFINED;\n}\n\n/** The `.render()` method for a PFC backing instance. */\nfunction doRender(props, state, context) {\n\treturn this.constructor(props, context);\n}\n","import { EMPTY_OBJ, NULL } from './constants';\nimport { commitRoot, diff } from './diff/index';\nimport { createElement, Fragment } from './create-element';\nimport options from './options';\nimport { slice } from './util';\n\n/**\n * Render a Preact virtual node into a DOM element\n * @param {import('./internal').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to render into\n * @param {import('./internal').PreactElement | object} [replaceNode] Optional: Attempt to re-use an\n * existing DOM tree rooted at `replaceNode`\n */\nexport function render(vnode, parentDom, replaceNode) {\n\t// https://github.com/preactjs/preact/issues/3794\n\tif (parentDom == document) {\n\t\tparentDom = document.documentElement;\n\t}\n\n\tif (options._root) options._root(vnode, parentDom);\n\n\t// We abuse the `replaceNode` parameter in `hydrate()` to signal if we are in\n\t// hydration mode or not by passing the `hydrate` function instead of a DOM\n\t// element..\n\tlet isHydrating = typeof replaceNode == 'function';\n\n\t// To be able to support calling `render()` multiple times on the same\n\t// DOM node, we need to obtain a reference to the previous tree. We do\n\t// this by assigning a new `_children` property to DOM nodes which points\n\t// to the last rendered tree. By default this property is not present, which\n\t// means that we are mounting a new tree for the first time.\n\tlet oldVNode = isHydrating\n\t\t? NULL\n\t\t: (replaceNode && replaceNode._children) || parentDom._children;\n\n\tvnode = ((!isHydrating && replaceNode) || parentDom)._children =\n\t\tcreateElement(Fragment, NULL, [vnode]);\n\n\t// List of effects that need to be called after diffing.\n\tlet commitQueue = [],\n\t\trefQueue = [];\n\tdiff(\n\t\tparentDom,\n\t\t// Determine the new vnode tree and store it on the DOM element on\n\t\t// our custom `_children` property.\n\t\tvnode,\n\t\toldVNode || EMPTY_OBJ,\n\t\tEMPTY_OBJ,\n\t\tparentDom.namespaceURI,\n\t\t!isHydrating && replaceNode\n\t\t\t? [replaceNode]\n\t\t\t: oldVNode\n\t\t\t\t? NULL\n\t\t\t\t: parentDom.firstChild\n\t\t\t\t\t? slice.call(parentDom.childNodes)\n\t\t\t\t\t: NULL,\n\t\tcommitQueue,\n\t\t!isHydrating && replaceNode\n\t\t\t? replaceNode\n\t\t\t: oldVNode\n\t\t\t\t? oldVNode._dom\n\t\t\t\t: parentDom.firstChild,\n\t\tisHydrating,\n\t\trefQueue\n\t);\n\n\t// Flush all queued effects\n\tcommitRoot(commitQueue, vnode, refQueue);\n}\n\n/**\n * Update an existing DOM element with data from a Preact virtual node\n * @param {import('./internal').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to update\n */\nexport function hydrate(vnode, parentDom) {\n\trender(vnode, parentDom, hydrate);\n}\n","import { assign, slice } from './util';\nimport { createVNode } from './create-element';\nimport { NULL, UNDEFINED } from './constants';\n\n/**\n * Clones the given VNode, optionally adding attributes/props and replacing its\n * children.\n * @param {import('./internal').VNode} vnode The virtual DOM element to clone\n * @param {object} props Attributes/props to add when cloning\n * @param {Array<import('./internal').ComponentChildren>} rest Any additional arguments will be used\n * as replacement children.\n * @returns {import('./internal').VNode}\n */\nexport function cloneElement(vnode, props, children) {\n\tlet normalizedProps = assign({}, vnode.props),\n\t\tkey,\n\t\tref,\n\t\ti;\n\n\tlet defaultProps;\n\n\tif (vnode.type && vnode.type.defaultProps) {\n\t\tdefaultProps = vnode.type.defaultProps;\n\t}\n\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse if (props[i] === UNDEFINED && defaultProps != UNDEFINED) {\n\t\t\tnormalizedProps[i] = defaultProps[i];\n\t\t} else {\n\t\t\tnormalizedProps[i] = props[i];\n\t\t}\n\t}\n\n\tif (arguments.length > 2) {\n\t\tnormalizedProps.children =\n\t\t\targuments.length > 3 ? slice.call(arguments, 2) : children;\n\t}\n\n\treturn createVNode(\n\t\tvnode.type,\n\t\tnormalizedProps,\n\t\tkey || vnode.key,\n\t\tref || vnode.ref,\n\t\tNULL\n\t);\n}\n","import { NULL } from '../constants';\n\n/**\n * Find the closest error boundary to a thrown error and call it\n * @param {object} error The thrown value\n * @param {import('../internal').VNode} vnode The vnode that threw the error that was caught (except\n * for unmounting when this parameter is the highest parent that was being\n * unmounted)\n * @param {import('../internal').VNode} [oldVNode]\n * @param {import('../internal').ErrorInfo} [errorInfo]\n */\nexport function _catchError(error, vnode, oldVNode, errorInfo) {\n\t/** @type {import('../internal').Component} */\n\tlet component,\n\t\t/** @type {import('../internal').ComponentType} */\n\t\tctor,\n\t\t/** @type {boolean} */\n\t\thandled;\n\n\tfor (; (vnode = vnode._parent); ) {\n\t\tif ((component = vnode._component) && !component._processingException) {\n\t\t\ttry {\n\t\t\t\tctor = component.constructor;\n\n\t\t\t\tif (ctor && ctor.getDerivedStateFromError != NULL) {\n\t\t\t\t\tcomponent.setState(ctor.getDerivedStateFromError(error));\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\tif (component.componentDidCatch != NULL) {\n\t\t\t\t\tcomponent.componentDidCatch(error, errorInfo || {});\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\t// This is an error boundary. Mark it as having bailed out, and whether it was mid-hydration.\n\t\t\t\tif (handled) {\n\t\t\t\t\treturn (component._pendingError = component);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\t\t}\n\t}\n\n\tthrow error;\n}\n","import { options as _options } from 'preact';\n\n/** @type {number} */\nlet currentIndex;\n\n/** @type {import('./internal').Component} */\nlet currentComponent;\n\n/** @type {import('./internal').Component} */\nlet previousComponent;\n\n/** @type {number} */\nlet currentHook = 0;\n\n/** @type {Array<import('./internal').Component>} */\nlet afterPaintEffects = [];\n\n// Cast to use internal Options type\nconst options = /** @type {import('./internal').Options} */ (_options);\n\nlet oldBeforeDiff = options._diff;\nlet oldBeforeRender = options._render;\nlet oldAfterDiff = options.diffed;\nlet oldCommit = options._commit;\nlet oldBeforeUnmount = options.unmount;\nlet oldRoot = options._root;\n\n// We take the minimum timeout for requestAnimationFrame to ensure that\n// the callback is invoked after the next frame. 35ms is based on a 30hz\n// refresh rate, which is the minimum rate for a smooth user experience.\nconst RAF_TIMEOUT = 35;\nlet prevRaf;\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions._diff = vnode => {\n\tcurrentComponent = null;\n\tif (oldBeforeDiff) oldBeforeDiff(vnode);\n};\n\noptions._root = (vnode, parentDom) => {\n\tif (vnode && parentDom._children && parentDom._children._mask) {\n\t\tvnode._mask = parentDom._children._mask;\n\t}\n\n\tif (oldRoot) oldRoot(vnode, parentDom);\n};\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions._render = vnode => {\n\tif (oldBeforeRender) oldBeforeRender(vnode);\n\n\tcurrentComponent = vnode._component;\n\tcurrentIndex = 0;\n\n\tconst hooks = currentComponent.__hooks;\n\tif (hooks) {\n\t\tif (previousComponent === currentComponent) {\n\t\t\thooks._pendingEffects = [];\n\t\t\tcurrentComponent._renderCallbacks = [];\n\t\t\thooks._list.forEach(hookItem => {\n\t\t\t\tif (hookItem._nextValue) {\n\t\t\t\t\thookItem._value = hookItem._nextValue;\n\t\t\t\t}\n\t\t\t\thookItem._pendingArgs = hookItem._nextValue = undefined;\n\t\t\t});\n\t\t} else {\n\t\t\thooks._pendingEffects.forEach(invokeCleanup);\n\t\t\thooks._pendingEffects.forEach(invokeEffect);\n\t\t\thooks._pendingEffects = [];\n\t\t\tcurrentIndex = 0;\n\t\t}\n\t}\n\tpreviousComponent = currentComponent;\n};\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions.diffed = vnode => {\n\tif (oldAfterDiff) oldAfterDiff(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tif (c.__hooks._pendingEffects.length) afterPaint(afterPaintEffects.push(c));\n\t\tc.__hooks._list.forEach(hookItem => {\n\t\t\tif (hookItem._pendingArgs) {\n\t\t\t\thookItem._args = hookItem._pendingArgs;\n\t\t\t}\n\t\t\thookItem._pendingArgs = undefined;\n\t\t});\n\t}\n\tpreviousComponent = currentComponent = null;\n};\n\n// TODO: Improve typing of commitQueue parameter\n/** @type {(vnode: import('./internal').VNode, commitQueue: any) => void} */\noptions._commit = (vnode, commitQueue) => {\n\tcommitQueue.some(component => {\n\t\ttry {\n\t\t\tcomponent._renderCallbacks.forEach(invokeCleanup);\n\t\t\tcomponent._renderCallbacks = component._renderCallbacks.filter(cb =>\n\t\t\t\tcb._value ? invokeEffect(cb) : true\n\t\t\t);\n\t\t} catch (e) {\n\t\t\tcommitQueue.some(c => {\n\t\t\t\tif (c._renderCallbacks) c._renderCallbacks = [];\n\t\t\t});\n\t\t\tcommitQueue = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t});\n\n\tif (oldCommit) oldCommit(vnode, commitQueue);\n};\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions.unmount = vnode => {\n\tif (oldBeforeUnmount) oldBeforeUnmount(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tlet hasErrored;\n\t\tc.__hooks._list.forEach(s => {\n\t\t\ttry {\n\t\t\t\tinvokeCleanup(s);\n\t\t\t} catch (e) {\n\t\t\t\thasErrored = e;\n\t\t\t}\n\t\t});\n\t\tc.__hooks = undefined;\n\t\tif (hasErrored) options._catchError(hasErrored, c._vnode);\n\t}\n};\n\n/**\n * Get a hook's state from the currentComponent\n * @param {number} index The index of the hook to get\n * @param {number} type The index of the hook to get\n * @returns {any}\n */\nfunction getHookState(index, type) {\n\tif (options._hook) {\n\t\toptions._hook(currentComponent, index, currentHook || type);\n\t}\n\tcurrentHook = 0;\n\n\t// Largely inspired by:\n\t// * https://github.com/michael-klein/funcy.js/blob/f6be73468e6ec46b0ff5aa3cc4c9baf72a29025a/src/hooks/core_hooks.mjs\n\t// * https://github.com/michael-klein/funcy.js/blob/650beaa58c43c33a74820a3c98b3c7079cf2e333/src/renderer.mjs\n\t// Other implementations to look at:\n\t// * https://codesandbox.io/s/mnox05qp8\n\tconst hooks =\n\t\tcurrentComponent.__hooks ||\n\t\t(currentComponent.__hooks = {\n\t\t\t_list: [],\n\t\t\t_pendingEffects: []\n\t\t});\n\n\tif (index >= hooks._list.length) {\n\t\thooks._list.push({});\n\t}\n\n\treturn hooks._list[index];\n}\n\n/**\n * @template {unknown} S\n * @param {import('./index').Dispatch<import('./index').StateUpdater<S>>} [initialState]\n * @returns {[S, (state: S) => void]}\n */\nexport function useState(initialState) {\n\tcurrentHook = 1;\n\treturn useReducer(invokeOrReturn, initialState);\n}\n\n/**\n * @template {unknown} S\n * @template {unknown} A\n * @param {import('./index').Reducer<S, A>} reducer\n * @param {import('./index').Dispatch<import('./index').StateUpdater<S>>} initialState\n * @param {(initialState: any) => void} [init]\n * @returns {[ S, (state: S) => void ]}\n */\nexport function useReducer(reducer, initialState, init) {\n\t/** @type {import('./internal').ReducerHookState} */\n\tconst hookState = getHookState(currentIndex++, 2);\n\thookState._reducer = reducer;\n\tif (!hookState._component) {\n\t\thookState._value = [\n\t\t\t!init ? invokeOrReturn(undefined, initialState) : init(initialState),\n\n\t\t\taction => {\n\t\t\t\tconst currentValue = hookState._nextValue\n\t\t\t\t\t? hookState._nextValue[0]\n\t\t\t\t\t: hookState._value[0];\n\t\t\t\tconst nextValue = hookState._reducer(currentValue, action);\n\n\t\t\t\tif (currentValue !== nextValue) {\n\t\t\t\t\thookState._nextValue = [nextValue, hookState._value[1]];\n\t\t\t\t\thookState._component.setState({});\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\n\t\thookState._component = currentComponent;\n\n\t\tif (!currentComponent._hasScuFromHooks) {\n\t\t\tcurrentComponent._hasScuFromHooks = true;\n\t\t\tlet prevScu = currentComponent.shouldComponentUpdate;\n\t\t\tconst prevCWU = currentComponent.componentWillUpdate;\n\n\t\t\t// If we're dealing with a forced update `shouldComponentUpdate` will\n\t\t\t// not be called. But we use that to update the hook values, so we\n\t\t\t// need to call it.\n\t\t\tcurrentComponent.componentWillUpdate = function (p, s, c) {\n\t\t\t\tif (this._force) {\n\t\t\t\t\tlet tmp = prevScu;\n\t\t\t\t\t// Clear to avoid other sCU hooks from being called\n\t\t\t\t\tprevScu = undefined;\n\t\t\t\t\tupdateHookState(p, s, c);\n\t\t\t\t\tprevScu = tmp;\n\t\t\t\t}\n\n\t\t\t\tif (prevCWU) prevCWU.call(this, p, s, c);\n\t\t\t};\n\n\t\t\t// This SCU has the purpose of bailing out after repeated updates\n\t\t\t// to stateful hooks.\n\t\t\t// we store the next value in _nextValue[0] and keep doing that for all\n\t\t\t// state setters, if we have next states and\n\t\t\t// all next states within a component end up being equal to their original state\n\t\t\t// we are safe to bail out for this specific component.\n\t\t\t/**\n\t\t\t *\n\t\t\t * @type {import('./internal').Component[\"shouldComponentUpdate\"]}\n\t\t\t */\n\t\t\t// @ts-ignore - We don't use TS to downtranspile\n\t\t\t// eslint-disable-next-line no-inner-declarations\n\t\t\tfunction updateHookState(p, s, c) {\n\t\t\t\tif (!hookState._component.__hooks) return true;\n\n\t\t\t\t/** @type {(x: import('./internal').HookState) => x is import('./internal').ReducerHookState} */\n\t\t\t\tconst isStateHook = x => !!x._component;\n\t\t\t\tconst stateHooks =\n\t\t\t\t\thookState._component.__hooks._list.filter(isStateHook);\n\n\t\t\t\tconst allHooksEmpty = stateHooks.every(x => !x._nextValue);\n\t\t\t\t// When we have no updated hooks in the component we invoke the previous SCU or\n\t\t\t\t// traverse the VDOM tree further.\n\t\t\t\tif (allHooksEmpty) {\n\t\t\t\t\treturn prevScu ? prevScu.call(this, p, s, c) : true;\n\t\t\t\t}\n\n\t\t\t\t// We check whether we have components with a nextValue set that\n\t\t\t\t// have values that aren't equal to one another this pushes\n\t\t\t\t// us to update further down the tree\n\t\t\t\tlet shouldUpdate = hookState._component.props !== p;\n\t\t\t\tstateHooks.forEach(hookItem => {\n\t\t\t\t\tif (hookItem._nextValue) {\n\t\t\t\t\t\tconst currentValue = hookItem._value[0];\n\t\t\t\t\t\thookItem._value = hookItem._nextValue;\n\t\t\t\t\t\thookItem._nextValue = undefined;\n\t\t\t\t\t\tif (currentValue !== hookItem._value[0]) shouldUpdate = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn prevScu\n\t\t\t\t\t? prevScu.call(this, p, s, c) || shouldUpdate\n\t\t\t\t\t: shouldUpdate;\n\t\t\t}\n\n\t\t\tcurrentComponent.shouldComponentUpdate = updateHookState;\n\t\t}\n\t}\n\n\treturn hookState._nextValue || hookState._value;\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {unknown[]} args\n * @returns {void}\n */\nexport function useEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 3);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._pendingArgs = args;\n\n\t\tcurrentComponent.__hooks._pendingEffects.push(state);\n\t}\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {unknown[]} args\n * @returns {void}\n */\nexport function useLayoutEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 4);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._pendingArgs = args;\n\n\t\tcurrentComponent._renderCallbacks.push(state);\n\t}\n}\n\n/** @type {(initialValue: unknown) => unknown} */\nexport function useRef(initialValue) {\n\tcurrentHook = 5;\n\treturn useMemo(() => ({ current: initialValue }), []);\n}\n\n/**\n * @param {object} ref\n * @param {() => object} createHandle\n * @param {unknown[]} args\n * @returns {void}\n */\nexport function useImperativeHandle(ref, createHandle, args) {\n\tcurrentHook = 6;\n\tuseLayoutEffect(\n\t\t() => {\n\t\t\tif (typeof ref == 'function') {\n\t\t\t\tconst result = ref(createHandle());\n\t\t\t\treturn () => {\n\t\t\t\t\tref(null);\n\t\t\t\t\tif (result && typeof result == 'function') result();\n\t\t\t\t};\n\t\t\t} else if (ref) {\n\t\t\t\tref.current = createHandle();\n\t\t\t\treturn () => (ref.current = null);\n\t\t\t}\n\t\t},\n\t\targs == null ? args : args.concat(ref)\n\t);\n}\n\n/**\n * @template {unknown} T\n * @param {() => T} factory\n * @param {unknown[]} args\n * @returns {T}\n */\nexport function useMemo(factory, args) {\n\t/** @type {import('./internal').MemoHookState<T>} */\n\tconst state = getHookState(currentIndex++, 7);\n\tif (argsChanged(state._args, args)) {\n\t\tstate._value = factory();\n\t\tstate._args = args;\n\t\tstate._factory = factory;\n\t}\n\n\treturn state._value;\n}\n\n/**\n * @param {() => void} callback\n * @param {unknown[]} args\n * @returns {() => void}\n */\nexport function useCallback(callback, args) {\n\tcurrentHook = 8;\n\treturn useMemo(() => callback, args);\n}\n\n/**\n * @param {import('./internal').PreactContext} context\n */\nexport function useContext(context) {\n\tconst provider = currentComponent.context[context._id];\n\t// We could skip this call here, but than we'd not call\n\t// `options._hook`. We need to do that in order to make\n\t// the devtools aware of this hook.\n\t/** @type {import('./internal').ContextHookState} */\n\tconst state = getHookState(currentIndex++, 9);\n\t// The devtools needs access to the context object to\n\t// be able to pull of the default value when no provider\n\t// is present in the tree.\n\tstate._context = context;\n\tif (!provider) return context._defaultValue;\n\t// This is probably not safe to convert to \"!\"\n\tif (state._value == null) {\n\t\tstate._value = true;\n\t\tprovider.sub(currentComponent);\n\t}\n\treturn provider.props.value;\n}\n\n/**\n * Display a custom label for a custom hook for the devtools panel\n * @type {<T>(value: T, cb?: (value: T) => string | number) => void}\n */\nexport function useDebugValue(value, formatter) {\n\tif (options.useDebugValue) {\n\t\toptions.useDebugValue(\n\t\t\tformatter ? formatter(value) : /** @type {any}*/ (value)\n\t\t);\n\t}\n}\n\n/**\n * @param {(error: unknown, errorInfo: import('preact').ErrorInfo) => void} cb\n * @returns {[unknown, () => void]}\n */\nexport function useErrorBoundary(cb) {\n\t/** @type {import('./internal').ErrorBoundaryHookState} */\n\tconst state = getHookState(currentIndex++, 10);\n\tconst errState = useState();\n\tstate._value = cb;\n\tif (!currentComponent.componentDidCatch) {\n\t\tcurrentComponent.componentDidCatch = (err, errorInfo) => {\n\t\t\tif (state._value) state._value(err, errorInfo);\n\t\t\terrState[1](err);\n\t\t};\n\t}\n\treturn [\n\t\terrState[0],\n\t\t() => {\n\t\t\terrState[1](undefined);\n\t\t}\n\t];\n}\n\n/** @type {() => string} */\nexport function useId() {\n\t/** @type {import('./internal').IdHookState} */\n\tconst state = getHookState(currentIndex++, 11);\n\tif (!state._value) {\n\t\t// Grab either the root node or the nearest async boundary node.\n\t\t/** @type {import('./internal').VNode} */\n\t\tlet root = currentComponent._vnode;\n\t\twhile (root !== null && !root._mask && root._parent !== null) {\n\t\t\troot = root._parent;\n\t\t}\n\n\t\tlet mask = root._mask || (root._mask = [0, 0]);\n\t\tstate._value = 'P' + mask[0] + '-' + mask[1]++;\n\t}\n\n\treturn state._value;\n}\n\n/**\n * After paint effects consumer.\n */\nfunction flushAfterPaintEffects() {\n\tlet component;\n\twhile ((component = afterPaintEffects.shift())) {\n\t\tif (!component._parentDom || !component.__hooks) continue;\n\t\ttry {\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeCleanup);\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeEffect);\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t} catch (e) {\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t}\n}\n\nlet HAS_RAF = typeof requestAnimationFrame == 'function';\n\n/**\n * Schedule a callback to be invoked after the browser has a chance to paint a new frame.\n * Do this by combining requestAnimationFrame (rAF) + setTimeout to invoke a callback after\n * the next browser frame.\n *\n * Also, schedule a timeout in parallel to the the rAF to ensure the callback is invoked\n * even if RAF doesn't fire (for example if the browser tab is not visible)\n *\n * @param {() => void} callback\n */\nfunction afterNextFrame(callback) {\n\tconst done = () => {\n\t\tclearTimeout(timeout);\n\t\tif (HAS_RAF) cancelAnimationFrame(raf);\n\t\tsetTimeout(callback);\n\t};\n\tconst timeout = setTimeout(done, RAF_TIMEOUT);\n\n\tlet raf;\n\tif (HAS_RAF) {\n\t\traf = requestAnimationFrame(done);\n\t}\n}\n\n// Note: if someone used options.debounceRendering = requestAnimationFrame,\n// then effects will ALWAYS run on the NEXT frame instead of the current one, incurring a ~16ms delay.\n// Perhaps this is not such a big deal.\n/**\n * Schedule afterPaintEffects flush after the browser paints\n * @param {number} newQueueLength\n * @returns {void}\n */\nfunction afterPaint(newQueueLength) {\n\tif (newQueueLength === 1 || prevRaf !== options.requestAnimationFrame) {\n\t\tprevRaf = options.requestAnimationFrame;\n\t\t(prevRaf || afterNextFrame)(flushAfterPaintEffects);\n\t}\n}\n\n/**\n * @param {import('./internal').HookState} hook\n * @returns {void}\n */\nfunction invokeCleanup(hook) {\n\t// A hook cleanup can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\tlet cleanup = hook._cleanup;\n\tif (typeof cleanup == 'function') {\n\t\thook._cleanup = undefined;\n\t\tcleanup();\n\t}\n\n\tcurrentComponent = comp;\n}\n\n/**\n * Invoke a Hook's effect\n * @param {import('./internal').EffectHookState} hook\n * @returns {void}\n */\nfunction invokeEffect(hook) {\n\t// A hook call can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\thook._cleanup = hook._value();\n\tcurrentComponent = comp;\n}\n\n/**\n * @param {unknown[]} oldArgs\n * @param {unknown[]} newArgs\n * @returns {boolean}\n */\nfunction argsChanged(oldArgs, newArgs) {\n\treturn (\n\t\t!oldArgs ||\n\t\toldArgs.length !== newArgs.length ||\n\t\tnewArgs.some((arg, index) => arg !== oldArgs[index])\n\t);\n}\n\n/**\n * @template Arg\n * @param {Arg} arg\n * @param {(arg: Arg) => any} f\n * @returns {any}\n */\nfunction invokeOrReturn(arg, f) {\n\treturn typeof f == 'function' ? f(arg) : f;\n}\n","// An named symbol/brand for detecting Signal instances even when they weren't\n// created using the same signals library version.\nconst BRAND_SYMBOL = Symbol.for(\"preact-signals\");\n\n// Flags for Computed and Effect.\nconst RUNNING = 1 << 0;\nconst NOTIFIED = 1 << 1;\nconst OUTDATED = 1 << 2;\nconst DISPOSED = 1 << 3;\nconst HAS_ERROR = 1 << 4;\nconst TRACKING = 1 << 5;\n\n// A linked list node used to track dependencies (sources) and dependents (targets).\n// Also used to remember the source's last version number that the target saw.\ntype Node = {\n\t// A source whose value the target depends on.\n\t_source: Signal;\n\t_prevSource?: Node;\n\t_nextSource?: Node;\n\n\t// A target that depends on the source and should be notified when the source changes.\n\t_target: Computed | Effect;\n\t_prevTarget?: Node;\n\t_nextTarget?: Node;\n\n\t// The version number of the source that target has last seen. We use version numbers\n\t// instead of storing the source value, because source values can take arbitrary amount\n\t// of memory, and computeds could hang on to them forever because they're lazily evaluated.\n\t// Use the special value -1 to mark potentially unused but recyclable nodes.\n\t_version: number;\n\n\t// Used to remember & roll back the source's previous `._node` value when entering &\n\t// exiting a new evaluation context.\n\t_rollbackNode?: Node;\n};\n\nfunction startBatch() {\n\tbatchDepth++;\n}\n\nfunction endBatch() {\n\tif (batchDepth > 1) {\n\t\tbatchDepth--;\n\t\treturn;\n\t}\n\n\tlet error: unknown;\n\tlet hasError = false;\n\n\twhile (batchedEffect !== undefined) {\n\t\tlet effect: Effect | undefined = batchedEffect;\n\t\tbatchedEffect = undefined;\n\n\t\tbatchIteration++;\n\n\t\twhile (effect !== undefined) {\n\t\t\tconst next: Effect | undefined = effect._nextBatchedEffect;\n\t\t\teffect._nextBatchedEffect = undefined;\n\t\t\teffect._flags &= ~NOTIFIED;\n\n\t\t\tif (!(effect._flags & DISPOSED) && needsToRecompute(effect)) {\n\t\t\t\ttry {\n\t\t\t\t\teffect._callback();\n\t\t\t\t} catch (err) {\n\t\t\t\t\tif (!hasError) {\n\t\t\t\t\t\terror = err;\n\t\t\t\t\t\thasError = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\teffect = next;\n\t\t}\n\t}\n\tbatchIteration = 0;\n\tbatchDepth--;\n\n\tif (hasError) {\n\t\tthrow error;\n\t}\n}\n\n/**\n * Combine multiple value updates into one \"commit\" at the end of the provided callback.\n *\n * Batches can be nested and changes are only flushed once the outermost batch callback\n * completes.\n *\n * Accessing a signal that has been modified within a batch will reflect its updated\n * value.\n *\n * @param fn The callback function.\n * @returns The value returned by the callback.\n */\nfunction batch<T>(fn: () => T): T {\n\tif (batchDepth > 0) {\n\t\treturn fn();\n\t}\n\t/*@__INLINE__**/ startBatch();\n\ttry {\n\t\treturn fn();\n\t} finally {\n\t\tendBatch();\n\t}\n}\n\n// Currently evaluated computed or effect.\nlet evalContext: Computed | Effect | undefined = undefined;\n\n/**\n * Run a callback function that can access signal values without\n * subscribing to the signal updates.\n *\n * @param fn The callback function.\n * @returns The value returned by the callback.\n */\nfunction untracked<T>(fn: () => T): T {\n\tconst prevContext = evalContext;\n\tevalContext = undefined;\n\ttry {\n\t\treturn fn();\n\t} finally {\n\t\tevalContext = prevContext;\n\t}\n}\n\n// Effects collected into a batch.\nlet batchedEffect: Effect | undefined = undefined;\nlet batchDepth = 0;\nlet batchIteration = 0;\n\n// A global version number for signals, used for fast-pathing repeated\n// computed.peek()/computed.value calls when nothing has changed globally.\nlet globalVersion = 0;\n\nfunction addDependency(signal: Signal): Node | undefined {\n\tif (evalContext === undefined) {\n\t\treturn undefined;\n\t}\n\n\tlet node = signal._node;\n\tif (node === undefined || node._target !== evalContext) {\n\t\t/**\n\t\t * `signal` is a new dependency. Create a new dependency node, and set it\n\t\t * as the tail of the current context's dependency list. e.g:\n\t\t *\n\t\t * { A <-> B       }\n\t\t *              \n\t\t *        tail  node (new)\n\t\t *               \n\t\t * { A <-> B <-> C }\n\t\t *               \n\t\t *              tail (evalContext._sources)\n\t\t */\n\t\tnode = {\n\t\t\t_version: 0,\n\t\t\t_source: signal,\n\t\t\t_prevSource: evalContext._sources,\n\t\t\t_nextSource: undefined,\n\t\t\t_target: evalContext,\n\t\t\t_prevTarget: undefined,\n\t\t\t_nextTarget: undefined,\n\t\t\t_rollbackNode: node,\n\t\t};\n\n\t\tif (evalContext._sources !== undefined) {\n\t\t\tevalContext._sources._nextSource = node;\n\t\t}\n\t\tevalContext._sources = node;\n\t\tsignal._node = node;\n\n\t\t// Subscribe to change notifications from this dependency if we're in an effect\n\t\t// OR evaluating a computed signal that in turn has subscribers.\n\t\tif (evalContext._flags & TRACKING) {\n\t\t\tsignal._subscribe(node);\n\t\t}\n\t\treturn node;\n\t} else if (node._version === -1) {\n\t\t// `signal` is an existing dependency from a previous evaluation. Reuse it.\n\t\tnode._version = 0;\n\n\t\t/**\n\t\t * If `node` is not already the current tail of the dependency list (i.e.\n\t\t * there is a next node in the list), then make the `node` the new tail. e.g:\n\t\t *\n\t\t * { A <-> B <-> C <-> D }\n\t\t *                    \n\t\t *        node    tail (evalContext._sources)\n\t\t *         \n\t\t *                    \n\t\t * { A <-> C <-> D <-> B }\n\t\t *                     \n\t\t *                    tail (evalContext._sources)\n\t\t */\n\t\tif (node._nextSource !== undefined) {\n\t\t\tnode._nextSource._prevSource = node._prevSource;\n\n\t\t\tif (node._prevSource !== undefined) {\n\t\t\t\tnode._prevSource._nextSource = node._nextSource;\n\t\t\t}\n\n\t\t\tnode._prevSource = evalContext._sources;\n\t\t\tnode._nextSource = undefined;\n\n\t\t\tevalContext._sources!._nextSource = node;\n\t\t\tevalContext._sources = node;\n\t\t}\n\n\t\t// We can assume that the currently evaluated effect / computed signal is already\n\t\t// subscribed to change notifications from `signal` if needed.\n\t\treturn node;\n\t}\n\treturn undefined;\n}\n\n/**\n * The base class for plain and computed signals.\n */\n// @ts-ignore: \"Cannot redeclare exported variable 'Signal'.\"\n//\n// A function with the same name is defined later, so we need to ignore TypeScript's\n// warning about a redeclared variable.\n//\n// The class is declared here, but later implemented with ES5-style prototypes.\n// This enables better control of the transpiled output size.\ndeclare class Signal<T = any> {\n\t/** @internal */\n\t_value: unknown;\n\n\t/**\n\t * @internal\n\t * Version numbers should always be >= 0, because the special value -1 is used\n\t * by Nodes to signify potentially unused but recyclable nodes.\n\t */\n\t_version: number;\n\n\t/** @internal */\n\t_node?: Node;\n\n\t/** @internal */\n\t_targets?: Node;\n\n\tconstructor(value?: T, options?: SignalOptions<T>);\n\n\t/** @internal */\n\t_refresh(): boolean;\n\n\t/** @internal */\n\t_subscribe(node: Node): void;\n\n\t/** @internal */\n\t_unsubscribe(node: Node): void;\n\n\t/** @internal */\n\t_watched?(this: Signal<T>): void;\n\n\t/** @internal */\n\t_unwatched?(this: Signal<T>): void;\n\n\tsubscribe(fn: (value: T) => void): () => void;\n\n\tvalueOf(): T;\n\n\ttoString(): string;\n\n\ttoJSON(): T;\n\n\tpeek(): T;\n\n\tbrand: typeof BRAND_SYMBOL;\n\n\tget value(): T;\n\tset value(value: T);\n}\n\nexport interface SignalOptions<T = any> {\n\twatched?: (this: Signal<T>) => void;\n\tunwatched?: (this: Signal<T>) => void;\n}\n\n/** @internal */\n// @ts-ignore: \"Cannot redeclare exported variable 'Signal'.\"\n//\n// A class with the same name has already been declared, so we need to ignore\n// TypeScript's warning about a redeclared variable.\n//\n// The previously declared class is implemented here with ES5-style prototypes.\n// This enables better control of the transpiled output size.\nfunction Signal(this: Signal, value?: unknown, options?: SignalOptions) {\n\tthis._value = value;\n\tthis._version = 0;\n\tthis._node = undefined;\n\tthis._targets = undefined;\n\tthis._watched = options?.watched;\n\tthis._unwatched = options?.unwatched;\n}\n\nSignal.prototype.brand = BRAND_SYMBOL;\n\nSignal.prototype._refresh = function () {\n\treturn true;\n};\n\nSignal.prototype._subscribe = function (node) {\n\tconst targets = this._targets;\n\tif (targets !== node && node._prevTarget === undefined) {\n\t\tnode._nextTarget = targets;\n\t\tthis._targets = node;\n\n\t\tif (targets !== undefined) {\n\t\t\ttargets._prevTarget = node;\n\t\t} else {\n\t\t\tuntracked(() => {\n\t\t\t\tthis._watched?.call(this);\n\t\t\t});\n\t\t}\n\t}\n};\n\nSignal.prototype._unsubscribe = function (node) {\n\t// Only run the unsubscribe step if the signal has any subscribers to begin with.\n\tif (this._targets !== undefined) {\n\t\tconst prev = node._prevTarget;\n\t\tconst next = node._nextTarget;\n\t\tif (prev !== undefined) {\n\t\t\tprev._nextTarget = next;\n\t\t\tnode._prevTarget = undefined;\n\t\t}\n\n\t\tif (next !== undefined) {\n\t\t\tnext._prevTarget = prev;\n\t\t\tnode._nextTarget = undefined;\n\t\t}\n\n\t\tif (node === this._targets) {\n\t\t\tthis._targets = next;\n\t\t\tif (next === undefined) {\n\t\t\t\tuntracked(() => {\n\t\t\t\t\tthis._unwatched?.call(this);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n};\n\nSignal.prototype.subscribe = function (fn) {\n\treturn effect(() => {\n\t\tconst value = this.value;\n\n\t\tconst prevContext = evalContext;\n\t\tevalContext = undefined;\n\t\ttry {\n\t\t\tfn(value);\n\t\t} finally {\n\t\t\tevalContext = prevContext;\n\t\t}\n\t});\n};\n\nSignal.prototype.valueOf = function () {\n\treturn this.value;\n};\n\nSignal.prototype.toString = function () {\n\treturn this.value + \"\";\n};\n\nSignal.prototype.toJSON = function () {\n\treturn this.value;\n};\n\nSignal.prototype.peek = function () {\n\tconst prevContext = evalContext;\n\tevalContext = undefined;\n\ttry {\n\t\treturn this.value;\n\t} finally {\n\t\tevalContext = prevContext;\n\t}\n};\n\nObject.defineProperty(Signal.prototype, \"value\", {\n\tget(this: Signal) {\n\t\tconst node = addDependency(this);\n\t\tif (node !== undefined) {\n\t\t\tnode._version = this._version;\n\t\t}\n\t\treturn this._value;\n\t},\n\tset(this: Signal, value) {\n\t\tif (value !== this._value) {\n\t\t\tif (batchIteration > 100) {\n\t\t\t\tthrow new Error(\"Cycle detected\");\n\t\t\t}\n\n\t\t\tthis._value = value;\n\t\t\tthis._version++;\n\t\t\tglobalVersion++;\n\n\t\t\t/**@__INLINE__*/ startBatch();\n\t\t\ttry {\n\t\t\t\tfor (\n\t\t\t\t\tlet node = this._targets;\n\t\t\t\t\tnode !== undefined;\n\t\t\t\t\tnode = node._nextTarget\n\t\t\t\t) {\n\t\t\t\t\tnode._target._notify();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tendBatch();\n\t\t\t}\n\t\t}\n\t},\n});\n\n/**\n * Create a new plain signal.\n *\n * @param value The initial value for the signal.\n * @returns A new signal.\n */\nexport function signal<T>(value: T, options?: SignalOptions<T>): Signal<T>;\nexport function signal<T = undefined>(): Signal<T | undefined>;\nexport function signal<T>(value?: T, options?: SignalOptions<T>): Signal<T> {\n\treturn new Signal(value, options);\n}\n\nfunction needsToRecompute(target: Computed | Effect): boolean {\n\t// Check the dependencies for changed values. The dependency list is already\n\t// in order of use. Therefore if multiple dependencies have changed values, only\n\t// the first used dependency is re-evaluated at this point.\n\tfor (\n\t\tlet node = target._sources;\n\t\tnode !== undefined;\n\t\tnode = node._nextSource\n\t) {\n\t\tif (\n\t\t\t// If the dependency has definitely been updated since its version number\n\t\t\t// was observed, then we need to recompute. This first check is not strictly\n\t\t\t// necessary for correctness, but allows us to skip the refresh call if the\n\t\t\t// dependency has already been updated.\n\t\t\tnode._source._version !== node._version ||\n\t\t\t// Refresh the dependency. If there's something blocking the refresh (e.g. a\n\t\t\t// dependency cycle), then we need to recompute.\n\t\t\t!node._source._refresh() ||\n\t\t\t// If the dependency got a new version after the refresh, then we need to recompute.\n\t\t\tnode._source._version !== node._version\n\t\t) {\n\t\t\treturn true;\n\t\t}\n\t}\n\t// If none of the dependencies have changed values since last recompute then\n\t// there's no need to recompute.\n\treturn false;\n}\n\nfunction prepareSources(target: Computed | Effect) {\n\t/**\n\t * 1. Mark all current sources as re-usable nodes (version: -1)\n\t * 2. Set a rollback node if the current node is being used in a different context\n\t * 3. Point 'target._sources' to the tail of the doubly-linked list, e.g:\n\t *\n\t *    { undefined <- A <-> B <-> C -> undefined }\n\t *                              \n\t *                              \n\t * target._sources = A; (node is head)  \n\t *                                     \n\t * target._sources = C; (node is tail) \n\t */\n\tfor (\n\t\tlet node = target._sources;\n\t\tnode !== undefined;\n\t\tnode = node._nextSource\n\t) {\n\t\tconst rollbackNode = node._source._node;\n\t\tif (rollbackNode !== undefined) {\n\t\t\tnode._rollbackNode = rollbackNode;\n\t\t}\n\t\tnode._source._node = node;\n\t\tnode._version = -1;\n\n\t\tif (node._nextSource === undefined) {\n\t\t\ttarget._sources = node;\n\t\t\tbreak;\n\t\t}\n\t}\n}\n\nfunction cleanupSources(target: Computed | Effect) {\n\tlet node = target._sources;\n\tlet head: Node | undefined = undefined;\n\n\t/**\n\t * At this point 'target._sources' points to the tail of the doubly-linked list.\n\t * It contains all existing sources + new sources in order of use.\n\t * Iterate backwards until we find the head node while dropping old dependencies.\n\t */\n\twhile (node !== undefined) {\n\t\tconst prev = node._prevSource;\n\n\t\t/**\n\t\t * The node was not re-used, unsubscribe from its change notifications and remove itself\n\t\t * from the doubly-linked list. e.g:\n\t\t *\n\t\t * { A <-> B <-> C }\n\t\t *         \n\t\t *    { A <-> C }\n\t\t */\n\t\tif (node._version === -1) {\n\t\t\tnode._source._unsubscribe(node);\n\n\t\t\tif (prev !== undefined) {\n\t\t\t\tprev._nextSource = node._nextSource;\n\t\t\t}\n\t\t\tif (node._nextSource !== undefined) {\n\t\t\t\tnode._nextSource._prevSource = prev;\n\t\t\t}\n\t\t} else {\n\t\t\t/**\n\t\t\t * The new head is the last node seen which wasn't removed/unsubscribed\n\t\t\t * from the doubly-linked list. e.g:\n\t\t\t *\n\t\t\t * { A <-> B <-> C }\n\t\t\t *             \n\t\t\t *              head = node\n\t\t\t *         head = node\n\t\t\t *    head = node\n\t\t\t */\n\t\t\thead = node;\n\t\t}\n\n\t\tnode._source._node = node._rollbackNode;\n\t\tif (node._rollbackNode !== undefined) {\n\t\t\tnode._rollbackNode = undefined;\n\t\t}\n\n\t\tnode = prev;\n\t}\n\n\ttarget._sources = head;\n}\n\ndeclare class Computed<T = any> extends Signal<T> {\n\t_fn: () => T;\n\t_sources?: Node;\n\t_globalVersion: number;\n\t_flags: number;\n\n\tconstructor(fn: () => T, options?: SignalOptions<T>);\n\n\t_notify(): void;\n\tget value(): T;\n}\n\nfunction Computed(this: Computed, fn: () => unknown, options?: SignalOptions) {\n\tSignal.call(this, undefined);\n\n\tthis._fn = fn;\n\tthis._sources = undefined;\n\tthis._globalVersion = globalVersion - 1;\n\tthis._flags = OUTDATED;\n\tthis._watched = options?.watched;\n\tthis._unwatched = options?.unwatched;\n}\n\nComputed.prototype = new Signal() as Computed;\n\nComputed.prototype._refresh = function () {\n\tthis._flags &= ~NOTIFIED;\n\n\tif (this._flags & RUNNING) {\n\t\treturn false;\n\t}\n\n\t// If this computed signal has subscribed to updates from its dependencies\n\t// (TRACKING flag set) and none of them have notified about changes (OUTDATED\n\t// flag not set), then the computed value can't have changed.\n\tif ((this._flags & (OUTDATED | TRACKING)) === TRACKING) {\n\t\treturn true;\n\t}\n\tthis._flags &= ~OUTDATED;\n\n\tif (this._globalVersion === globalVersion) {\n\t\treturn true;\n\t}\n\tthis._globalVersion = globalVersion;\n\n\t// Mark this computed signal running before checking the dependencies for value\n\t// changes, so that the RUNNING flag can be used to notice cyclical dependencies.\n\tthis._flags |= RUNNING;\n\tif (this._version > 0 && !needsToRecompute(this)) {\n\t\tthis._flags &= ~RUNNING;\n\t\treturn true;\n\t}\n\n\tconst prevContext = evalContext;\n\ttry {\n\t\tprepareSources(this);\n\t\tevalContext = this;\n\t\tconst value = this._fn();\n\t\tif (\n\t\t\tthis._flags & HAS_ERROR ||\n\t\t\tthis._value !== value ||\n\t\t\tthis._version === 0\n\t\t) {\n\t\t\tthis._value = value;\n\t\t\tthis._flags &= ~HAS_ERROR;\n\t\t\tthis._version++;\n\t\t}\n\t} catch (err) {\n\t\tthis._value = err;\n\t\tthis._flags |= HAS_ERROR;\n\t\tthis._version++;\n\t}\n\tevalContext = prevContext;\n\tcleanupSources(this);\n\tthis._flags &= ~RUNNING;\n\treturn true;\n};\n\nComputed.prototype._subscribe = function (node) {\n\tif (this._targets === undefined) {\n\t\tthis._flags |= OUTDATED | TRACKING;\n\n\t\t// A computed signal subscribes lazily to its dependencies when it\n\t\t// gets its first subscriber.\n\t\tfor (\n\t\t\tlet node = this._sources;\n\t\t\tnode !== undefined;\n\t\t\tnode = node._nextSource\n\t\t) {\n\t\t\tnode._source._subscribe(node);\n\t\t}\n\t}\n\tSignal.prototype._subscribe.call(this, node);\n};\n\nComputed.prototype._unsubscribe = function (node) {\n\t// Only run the unsubscribe step if the computed signal has any subscribers.\n\tif (this._targets !== undefined) {\n\t\tSignal.prototype._unsubscribe.call(this, node);\n\n\t\t// Computed signal unsubscribes from its dependencies when it loses its last subscriber.\n\t\t// This makes it possible for unreferences subgraphs of computed signals to get garbage collected.\n\t\tif (this._targets === undefined) {\n\t\t\tthis._flags &= ~TRACKING;\n\n\t\t\tfor (\n\t\t\t\tlet node = this._sources;\n\t\t\t\tnode !== undefined;\n\t\t\t\tnode = node._nextSource\n\t\t\t) {\n\t\t\t\tnode._source._unsubscribe(node);\n\t\t\t}\n\t\t}\n\t}\n};\n\nComputed.prototype._notify = function () {\n\tif (!(this._flags & NOTIFIED)) {\n\t\tthis._flags |= OUTDATED | NOTIFIED;\n\n\t\tfor (\n\t\t\tlet node = this._targets;\n\t\t\tnode !== undefined;\n\t\t\tnode = node._nextTarget\n\t\t) {\n\t\t\tnode._target._notify();\n\t\t}\n\t}\n};\n\nObject.defineProperty(Computed.prototype, \"value\", {\n\tget(this: Computed) {\n\t\tif (this._flags & RUNNING) {\n\t\t\tthrow new Error(\"Cycle detected\");\n\t\t}\n\t\tconst node = addDependency(this);\n\t\tthis._refresh();\n\t\tif (node !== undefined) {\n\t\t\tnode._version = this._version;\n\t\t}\n\t\tif (this._flags & HAS_ERROR) {\n\t\t\tthrow this._value;\n\t\t}\n\t\treturn this._value;\n\t},\n});\n\n/**\n * An interface for read-only signals.\n */\ninterface ReadonlySignal<T = any> {\n\treadonly value: T;\n\tpeek(): T;\n\n\tsubscribe(fn: (value: T) => void): () => void;\n\tvalueOf(): T;\n\ttoString(): string;\n\ttoJSON(): T;\n\tbrand: typeof BRAND_SYMBOL;\n}\n\n/**\n * Create a new signal that is computed based on the values of other signals.\n *\n * The returned computed signal is read-only, and its value is automatically\n * updated when any signals accessed from within the callback function change.\n *\n * @param fn The effect callback.\n * @returns A new read-only signal.\n */\nfunction computed<T>(\n\tfn: () => T,\n\toptions?: SignalOptions<T>\n): ReadonlySignal<T> {\n\treturn new Computed(fn, options);\n}\n\nfunction cleanupEffect(effect: Effect) {\n\tconst cleanup = effect._cleanup;\n\teffect._cleanup = undefined;\n\n\tif (typeof cleanup === \"function\") {\n\t\t/*@__INLINE__**/ startBatch();\n\n\t\t// Run cleanup functions always outside of any context.\n\t\tconst prevContext = evalContext;\n\t\tevalContext = undefined;\n\t\ttry {\n\t\t\tcleanup();\n\t\t} catch (err) {\n\t\t\teffect._flags &= ~RUNNING;\n\t\t\teffect._flags |= DISPOSED;\n\t\t\tdisposeEffect(effect);\n\t\t\tthrow err;\n\t\t} finally {\n\t\t\tevalContext = prevContext;\n\t\t\tendBatch();\n\t\t}\n\t}\n}\n\nfunction disposeEffect(effect: Effect) {\n\tfor (\n\t\tlet node = effect._sources;\n\t\tnode !== undefined;\n\t\tnode = node._nextSource\n\t) {\n\t\tnode._source._unsubscribe(node);\n\t}\n\teffect._fn = undefined;\n\teffect._sources = undefined;\n\n\tcleanupEffect(effect);\n}\n\nfunction endEffect(this: Effect, prevContext?: Computed | Effect) {\n\tif (evalContext !== this) {\n\t\tthrow new Error(\"Out-of-order effect\");\n\t}\n\tcleanupSources(this);\n\tevalContext = prevContext;\n\n\tthis._flags &= ~RUNNING;\n\tif (this._flags & DISPOSED) {\n\t\tdisposeEffect(this);\n\t}\n\tendBatch();\n}\n\ntype EffectFn =\n\t| ((this: { dispose: () => void }) => void | (() => void))\n\t| (() => void | (() => void));\n\ndeclare class Effect {\n\t_fn?: EffectFn;\n\t_cleanup?: () => void;\n\t_sources?: Node;\n\t_nextBatchedEffect?: Effect;\n\t_flags: number;\n\n\tconstructor(fn: EffectFn);\n\n\t_callback(): void;\n\t_start(): () => void;\n\t_notify(): void;\n\t_dispose(): void;\n\tdispose(): void;\n}\n\nfunction Effect(this: Effect, fn: EffectFn) {\n\tthis._fn = fn;\n\tthis._cleanup = undefined;\n\tthis._sources = undefined;\n\tthis._nextBatchedEffect = undefined;\n\tthis._flags = TRACKING;\n}\n\nEffect.prototype._callback = function () {\n\tconst finish = this._start();\n\ttry {\n\t\tif (this._flags & DISPOSED) return;\n\t\tif (this._fn === undefined) return;\n\n\t\tconst cleanup = this._fn();\n\t\tif (typeof cleanup === \"function\") {\n\t\t\tthis._cleanup = cleanup;\n\t\t}\n\t} finally {\n\t\tfinish();\n\t}\n};\n\nEffect.prototype._start = function () {\n\tif (this._flags & RUNNING) {\n\t\tthrow new Error(\"Cycle detected\");\n\t}\n\tthis._flags |= RUNNING;\n\tthis._flags &= ~DISPOSED;\n\tcleanupEffect(this);\n\tprepareSources(this);\n\n\t/*@__INLINE__**/ startBatch();\n\tconst prevContext = evalContext;\n\tevalContext = this;\n\treturn endEffect.bind(this, prevContext);\n};\n\nEffect.prototype._notify = function () {\n\tif (!(this._flags & NOTIFIED)) {\n\t\tthis._flags |= NOTIFIED;\n\t\tthis._nextBatchedEffect = batchedEffect;\n\t\tbatchedEffect = this;\n\t}\n};\n\nEffect.prototype._dispose = function () {\n\tthis._flags |= DISPOSED;\n\n\tif (!(this._flags & RUNNING)) {\n\t\tdisposeEffect(this);\n\t}\n};\n\nEffect.prototype.dispose = function () {\n\tthis._dispose();\n};\n/**\n * Create an effect to run arbitrary code in response to signal changes.\n *\n * An effect tracks which signals are accessed within the given callback\n * function `fn`, and re-runs the callback when those signals change.\n *\n * The callback may return a cleanup function. The cleanup function gets\n * run once, either when the callback is next called or when the effect\n * gets disposed, whichever happens first.\n *\n * @param fn The effect callback.\n * @returns A function for disposing the effect.\n */\nfunction effect(fn: EffectFn): () => void {\n\tconst effect = new Effect(fn);\n\ttry {\n\t\teffect._callback();\n\t} catch (err) {\n\t\teffect._dispose();\n\t\tthrow err;\n\t}\n\t// Return a bound function instead of a wrapper like `() => effect._dispose()`,\n\t// because bound functions seem to be just as fast and take up a lot less memory.\n\treturn effect._dispose.bind(effect);\n}\n\nexport { computed, effect, batch, untracked, Signal, ReadonlySignal };\n","import { options, Component, isValidElement } from \"preact\";\nimport { useRef, useMemo, useEffect } from \"preact/hooks\";\nimport {\n\tsignal,\n\tcomputed,\n\tbatch,\n\teffect,\n\tSignal,\n\ttype ReadonlySignal,\n\tuntracked,\n} from \"@preact/signals-core\";\nimport {\n\tVNode,\n\tOptionsTypes,\n\tHookFn,\n\tEffect,\n\tPropertyUpdater,\n\tAugmentedComponent,\n\tAugmentedElement as Element,\n} from \"./internal\";\n\nexport {\n\tsignal,\n\tcomputed,\n\tbatch,\n\teffect,\n\tSignal,\n\ttype ReadonlySignal,\n\tuntracked,\n};\n\nconst HAS_PENDING_UPDATE = 1 << 0;\nconst HAS_HOOK_STATE = 1 << 1;\nconst HAS_COMPUTEDS = 1 << 2;\n\n// Install a Preact options hook\nfunction hook<T extends OptionsTypes>(hookName: T, hookFn: HookFn<T>) {\n\t// @ts-ignore-next-line private options hooks usage\n\toptions[hookName] = hookFn.bind(null, options[hookName] || (() => {}));\n}\n\nlet currentComponent: AugmentedComponent | undefined;\nlet finishUpdate: (() => void) | undefined;\n\nfunction setCurrentUpdater(updater?: Effect) {\n\t// end tracking for the current update:\n\tif (finishUpdate) finishUpdate();\n\t// start tracking the new update:\n\tfinishUpdate = updater && updater._start();\n}\n\nfunction createUpdater(update: () => void) {\n\tlet updater!: Effect;\n\teffect(function (this: Effect) {\n\t\tupdater = this;\n\t});\n\tupdater._callback = update;\n\treturn updater;\n}\n\n/** @todo This may be needed for complex prop value detection. */\n// function isSignalValue(value: any): value is Signal {\n// \tif (typeof value !== \"object\" || value == null) return false;\n// \tif (value instanceof Signal) return true;\n// \t// @TODO: uncomment this when we land Reactive (ideally behind a brand check)\n// \t// for (let i in value) if (value[i] instanceof Signal) return true;\n// \treturn false;\n// }\n\n/**\n * A wrapper component that renders a Signal directly as a Text node.\n * @todo: in Preact 11, just decorate Signal with `type:null`\n */\nfunction SignalValue(this: AugmentedComponent, { data }: { data: Signal }) {\n\t// hasComputeds.add(this);\n\n\t// Store the props.data signal in another signal so that\n\t// passing a new signal reference re-runs the text computed:\n\tconst currentSignal = useSignal(data);\n\tcurrentSignal.value = data;\n\n\tconst s = useMemo(() => {\n\t\t// mark the parent component as having computeds so it gets optimized\n\t\tlet v = this.__v;\n\t\twhile ((v = v.__!)) {\n\t\t\tif (v.__c) {\n\t\t\t\tv.__c._updateFlags |= HAS_COMPUTEDS;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tthis._updater!._callback = () => {\n\t\t\tconst end = this._updater!._start();\n\t\t\tconst value = s.value;\n\t\t\tend();\n\n\t\t\tif (isValidElement(value) || this.base?.nodeType !== 3) {\n\t\t\t\tthis._updateFlags |= HAS_PENDING_UPDATE;\n\t\t\t\tthis.setState({});\n\t\t\t} else {\n\t\t\t\t(this.base as Text).data = value;\n\t\t\t}\n\t\t};\n\n\t\treturn computed(() => {\n\t\t\tlet data = currentSignal.value;\n\t\t\tlet s = data.value;\n\t\t\treturn s === 0 ? 0 : s === true ? \"\" : s || \"\";\n\t\t});\n\t}, []);\n\n\treturn s.value;\n}\nSignalValue.displayName = \"_st\";\n\nObject.defineProperties(Signal.prototype, {\n\tconstructor: { configurable: true, value: undefined },\n\ttype: { configurable: true, value: SignalValue },\n\tprops: {\n\t\tconfigurable: true,\n\t\tget() {\n\t\t\treturn { data: this };\n\t\t},\n\t},\n\t// Setting a VNode's _depth to 1 forces Preact to clone it before modifying:\n\t// https://github.com/preactjs/preact/blob/d7a433ee8463a7dc23a05111bb47de9ec729ad4d/src/diff/children.js#L77\n\t// @todo remove this for Preact 11\n\t__b: { configurable: true, value: 1 },\n});\n\n/** Inject low-level property/attribute bindings for Signals into Preact's diff */\nhook(OptionsTypes.DIFF, (old, vnode) => {\n\tif (typeof vnode.type === \"string\") {\n\t\tlet signalProps: Record<string, any> | undefined;\n\n\t\tlet props = vnode.props;\n\t\tfor (let i in props) {\n\t\t\tif (i === \"children\") continue;\n\n\t\t\tlet value = props[i];\n\t\t\tif (value instanceof Signal) {\n\t\t\t\tif (!signalProps) vnode.__np = signalProps = {};\n\t\t\t\tsignalProps[i] = value;\n\t\t\t\tprops[i] = value.peek();\n\t\t\t}\n\t\t}\n\t}\n\n\told(vnode);\n});\n\n/** Set up Updater before rendering a component */\nhook(OptionsTypes.RENDER, (old, vnode) => {\n\tsetCurrentUpdater();\n\n\tlet updater;\n\n\tlet component = vnode.__c;\n\tif (component) {\n\t\tcomponent._updateFlags &= ~HAS_PENDING_UPDATE;\n\n\t\tupdater = component._updater;\n\t\tif (updater === undefined) {\n\t\t\tcomponent._updater = updater = createUpdater(() => {\n\t\t\t\tcomponent._updateFlags |= HAS_PENDING_UPDATE;\n\t\t\t\tcomponent.setState({});\n\t\t\t});\n\t\t}\n\t}\n\n\tcurrentComponent = component;\n\tsetCurrentUpdater(updater);\n\told(vnode);\n});\n\n/** Finish current updater if a component errors */\nhook(OptionsTypes.CATCH_ERROR, (old, error, vnode, oldVNode) => {\n\tsetCurrentUpdater();\n\tcurrentComponent = undefined;\n\told(error, vnode, oldVNode);\n});\n\n/** Finish current updater after rendering any VNode */\nhook(OptionsTypes.DIFFED, (old, vnode) => {\n\tsetCurrentUpdater();\n\tcurrentComponent = undefined;\n\n\tlet dom: Element;\n\n\t// vnode._dom is undefined during string rendering,\n\t// so we use this to skip prop subscriptions during SSR.\n\tif (typeof vnode.type === \"string\" && (dom = vnode.__e as Element)) {\n\t\tlet props = vnode.__np;\n\t\tlet renderedProps = vnode.props;\n\t\tif (props) {\n\t\t\tlet updaters = dom._updaters;\n\t\t\tif (updaters) {\n\t\t\t\tfor (let prop in updaters) {\n\t\t\t\t\tlet updater = updaters[prop];\n\t\t\t\t\tif (updater !== undefined && !(prop in props)) {\n\t\t\t\t\t\tupdater._dispose();\n\t\t\t\t\t\t// @todo we could just always invoke _dispose() here\n\t\t\t\t\t\tupdaters[prop] = undefined;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tupdaters = {};\n\t\t\t\tdom._updaters = updaters;\n\t\t\t}\n\t\t\tfor (let prop in props) {\n\t\t\t\tlet updater = updaters[prop];\n\t\t\t\tlet signal = props[prop];\n\t\t\t\tif (updater === undefined) {\n\t\t\t\t\tupdater = createPropUpdater(dom, prop, signal, renderedProps);\n\t\t\t\t\tupdaters[prop] = updater;\n\t\t\t\t} else {\n\t\t\t\t\tupdater._update(signal, renderedProps);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\told(vnode);\n});\n\nfunction createPropUpdater(\n\tdom: Element,\n\tprop: string,\n\tpropSignal: Signal,\n\tprops: Record<string, any>\n): PropertyUpdater {\n\tconst setAsProperty =\n\t\tprop in dom &&\n\t\t// SVG elements need to go through `setAttribute` because they\n\t\t// expect things like SVGAnimatedTransformList instead of strings.\n\t\t// @ts-ignore\n\t\tdom.ownerSVGElement === undefined;\n\n\tconst changeSignal = signal(propSignal);\n\treturn {\n\t\t_update: (newSignal: Signal, newProps: typeof props) => {\n\t\t\tchangeSignal.value = newSignal;\n\t\t\tprops = newProps;\n\t\t},\n\t\t_dispose: effect(() => {\n\t\t\tconst value = changeSignal.value.value;\n\t\t\t// If Preact just rendered this value, don't render it again:\n\t\t\tif (props[prop] === value) return;\n\t\t\tprops[prop] = value;\n\t\t\tif (setAsProperty) {\n\t\t\t\t// @ts-ignore-next-line silly\n\t\t\t\tdom[prop] = value;\n\t\t\t} else if (value) {\n\t\t\t\tdom.setAttribute(prop, value);\n\t\t\t} else {\n\t\t\t\tdom.removeAttribute(prop);\n\t\t\t}\n\t\t}),\n\t};\n}\n\n/** Unsubscribe from Signals when unmounting components/vnodes */\nhook(OptionsTypes.UNMOUNT, (old, vnode: VNode) => {\n\tif (typeof vnode.type === \"string\") {\n\t\tlet dom = vnode.__e as Element | undefined;\n\t\t// vnode._dom is undefined during string rendering\n\t\tif (dom) {\n\t\t\tconst updaters = dom._updaters;\n\t\t\tif (updaters) {\n\t\t\t\tdom._updaters = undefined;\n\t\t\t\tfor (let prop in updaters) {\n\t\t\t\t\tlet updater = updaters[prop];\n\t\t\t\t\tif (updater) updater._dispose();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else {\n\t\tlet component = vnode.__c;\n\t\tif (component) {\n\t\t\tconst updater = component._updater;\n\t\t\tif (updater) {\n\t\t\t\tcomponent._updater = undefined;\n\t\t\t\tupdater._dispose();\n\t\t\t}\n\t\t}\n\t}\n\told(vnode);\n});\n\n/** Mark components that use hook state so we can skip sCU optimization. */\nhook(OptionsTypes.HOOK, (old, component, index, type) => {\n\tif (type < 3 || type === 9)\n\t\t(component as AugmentedComponent)._updateFlags |= HAS_HOOK_STATE;\n\told(component, index, type);\n});\n\n/**\n * Auto-memoize components that use Signals/Computeds.\n * Note: Does _not_ optimize components that use hook/class state.\n */\nComponent.prototype.shouldComponentUpdate = function (\n\tthis: AugmentedComponent,\n\tprops,\n\tstate\n) {\n\t// @todo: Once preactjs/preact#3671 lands, this could just use `currentUpdater`:\n\tconst updater = this._updater;\n\tconst hasSignals = updater && updater._sources !== undefined;\n\n\t// let reason;\n\t// if (!hasSignals && !hasComputeds.has(this)) {\n\t// \treason = \"no signals or computeds\";\n\t// } else if (hasPendingUpdate.has(this)) {\n\t// \treason = \"has pending update\";\n\t// } else if (hasHookState.has(this)) {\n\t// \treason = \"has hook state\";\n\t// }\n\t// if (reason) {\n\t// \tif (!this) reason += \" (`this` bug)\";\n\t// \tconsole.log(\"not optimizing\", this?.constructor?.name, \": \", reason, {\n\t// \t\tdetails: {\n\t// \t\t\thasSignals,\n\t// \t\t\thasComputeds: hasComputeds.has(this),\n\t// \t\t\thasPendingUpdate: hasPendingUpdate.has(this),\n\t// \t\t\thasHookState: hasHookState.has(this),\n\t// \t\t\tdeps: Array.from(updater._deps),\n\t// \t\t\tupdater,\n\t// \t\t},\n\t// \t});\n\t// }\n\n\t// @ts-ignore\n\tfor (let i in state) return true;\n\n\tif (this.__f || (typeof this.u == \"boolean\" && this.u === true)) {\n\t\tconst hasHooksState = this._updateFlags & HAS_HOOK_STATE;\n\t\t// if this component used no signals or computeds and no hooks state, update:\n\t\tif (!hasSignals && !hasHooksState && !(this._updateFlags & HAS_COMPUTEDS))\n\t\t\treturn true;\n\n\t\t// if there is a pending re-render triggered from Signals,\n\t\t// or if there is hooks state, update:\n\t\tif (this._updateFlags & HAS_PENDING_UPDATE) return true;\n\t} else {\n\t\t// if this component used no signals or computeds, update:\n\t\tif (!hasSignals && !(this._updateFlags & HAS_COMPUTEDS)) return true;\n\n\t\t// if there is a pending re-render triggered from Signals,\n\t\t// or if there is hooks state, update:\n\t\tif (this._updateFlags & (HAS_PENDING_UPDATE | HAS_HOOK_STATE)) return true;\n\t}\n\n\t// if any non-Signal props changed, update:\n\tfor (let i in props) {\n\t\tif (i !== \"__source\" && props[i] !== this.props[i]) return true;\n\t}\n\tfor (let i in this.props) if (!(i in props)) return true;\n\n\t// this is a purely Signal-driven component, don't update:\n\treturn false;\n};\n\nexport function useSignal<T>(value: T): Signal<T>;\nexport function useSignal<T = undefined>(): Signal<T | undefined>;\nexport function useSignal<T>(value?: T) {\n\treturn useMemo(() => signal<T | undefined>(value), []);\n}\n\nexport function useComputed<T>(compute: () => T) {\n\tconst $compute = useRef(compute);\n\t$compute.current = compute;\n\t(currentComponent as AugmentedComponent)._updateFlags |= HAS_COMPUTEDS;\n\treturn useMemo(() => computed<T>(() => $compute.current()), []);\n}\n\nexport function useSignalEffect(cb: () => void | (() => void)) {\n\tconst callback = useRef(cb);\n\tcallback.current = cb;\n\n\tuseEffect(() => {\n\t\treturn effect(() => callback.current());\n\t}, []);\n}\n\n/**\n * @todo Determine which Reactive implementation we'll be using.\n * @internal\n */\n// export function useReactive<T extends object>(value: T): Reactive<T> {\n// \treturn useMemo(() => reactive<T>(value), []);\n// }\n\n/**\n * @internal\n * Update a Reactive's using the properties of an object or other Reactive.\n * Also works for Signals.\n * @example\n *   // Update a Reactive with Object.assign()-like syntax:\n *   const r = reactive({ name: \"Alice\" });\n *   update(r, { name: \"Bob\" });\n *   update(r, { age: 42 }); // property 'age' does not exist in type '{ name?: string }'\n *   update(r, 2); // '2' has no properties in common with '{ name?: string }'\n *   console.log(r.name.value); // \"Bob\"\n *\n * @example\n *   // Update a Reactive with the properties of another Reactive:\n *   const A = reactive({ name: \"Alice\" });\n *   const B = reactive({ name: \"Bob\", age: 42 });\n *   update(A, B);\n *   console.log(`${A.name} is ${A.age}`); // \"Bob is 42\"\n *\n * @example\n *   // Update a signal with assign()-like syntax:\n *   const s = signal(42);\n *   update(s, \"hi\"); // Argument type 'string' not assignable to type 'number'\n *   update(s, {}); // Argument type '{}' not assignable to type 'number'\n *   update(s, 43);\n *   console.log(s.value); // 43\n *\n * @param obj The Reactive or Signal to be updated\n * @param update The value, Signal, object or Reactive to update `obj` to match\n * @param overwrite If `true`, any properties `obj` missing from `update` are set to `undefined`\n */\n/*\nexport function update<T extends SignalOrReactive>(\n\tobj: T,\n\tupdate: Partial<Unwrap<T>>,\n\toverwrite = false\n) {\n\tif (obj instanceof Signal) {\n\t\tobj.value = peekValue(update);\n\t} else {\n\t\tfor (let i in update) {\n\t\t\tif (i in obj) {\n\t\t\t\tobj[i].value = peekValue(update[i]);\n\t\t\t} else {\n\t\t\t\tlet sig = signal(peekValue(update[i]));\n\t\t\t\tsig[KEY] = i;\n\t\t\t\tobj[i] = sig;\n\t\t\t}\n\t\t}\n\t\tif (overwrite) {\n\t\t\tfor (let i in obj) {\n\t\t\t\tif (!(i in update)) {\n\t\t\t\t\tobj[i].value = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n*/\n","/**\n * Gets the original marked default options.\n */\nexport function _getDefaults() {\n    return {\n        async: false,\n        breaks: false,\n        extensions: null,\n        gfm: true,\n        hooks: null,\n        pedantic: false,\n        renderer: null,\n        silent: false,\n        tokenizer: null,\n        walkTokens: null\n    };\n}\nexport let _defaults = _getDefaults();\nexport function changeDefaults(newDefaults) {\n    _defaults = newDefaults;\n}\n","/**\n * Helpers\n */\nconst escapeTest = /[&<>\"']/;\nconst escapeReplace = new RegExp(escapeTest.source, 'g');\nconst escapeTestNoEncode = /[<>\"']|&(?!(#\\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\\w+);)/;\nconst escapeReplaceNoEncode = new RegExp(escapeTestNoEncode.source, 'g');\nconst escapeReplacements = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;'\n};\nconst getEscapeReplacement = (ch) => escapeReplacements[ch];\nexport function escape(html, encode) {\n    if (encode) {\n        if (escapeTest.test(html)) {\n            return html.replace(escapeReplace, getEscapeReplacement);\n        }\n    }\n    else {\n        if (escapeTestNoEncode.test(html)) {\n            return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\n        }\n    }\n    return html;\n}\nconst unescapeTest = /&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/ig;\nexport function unescape(html) {\n    // explicitly match decimal, hex, and named HTML entities\n    return html.replace(unescapeTest, (_, n) => {\n        n = n.toLowerCase();\n        if (n === 'colon')\n            return ':';\n        if (n.charAt(0) === '#') {\n            return n.charAt(1) === 'x'\n                ? String.fromCharCode(parseInt(n.substring(2), 16))\n                : String.fromCharCode(+n.substring(1));\n        }\n        return '';\n    });\n}\nconst caret = /(^|[^\\[])\\^/g;\nexport function edit(regex, opt) {\n    let source = typeof regex === 'string' ? regex : regex.source;\n    opt = opt || '';\n    const obj = {\n        replace: (name, val) => {\n            let valSource = typeof val === 'string' ? val : val.source;\n            valSource = valSource.replace(caret, '$1');\n            source = source.replace(name, valSource);\n            return obj;\n        },\n        getRegex: () => {\n            return new RegExp(source, opt);\n        }\n    };\n    return obj;\n}\nexport function cleanUrl(href) {\n    try {\n        href = encodeURI(href).replace(/%25/g, '%');\n    }\n    catch (e) {\n        return null;\n    }\n    return href;\n}\nexport const noopTest = { exec: () => null };\nexport function splitCells(tableRow, count) {\n    // ensure that every cell-delimiting pipe has a space\n    // before it to distinguish it from an escaped pipe\n    const row = tableRow.replace(/\\|/g, (match, offset, str) => {\n        let escaped = false;\n        let curr = offset;\n        while (--curr >= 0 && str[curr] === '\\\\')\n            escaped = !escaped;\n        if (escaped) {\n            // odd number of slashes means | is escaped\n            // so we leave it alone\n            return '|';\n        }\n        else {\n            // add space before unescaped |\n            return ' |';\n        }\n    }), cells = row.split(/ \\|/);\n    let i = 0;\n    // First/last cell in a row cannot be empty if it has no leading/trailing pipe\n    if (!cells[0].trim()) {\n        cells.shift();\n    }\n    if (cells.length > 0 && !cells[cells.length - 1].trim()) {\n        cells.pop();\n    }\n    if (count) {\n        if (cells.length > count) {\n            cells.splice(count);\n        }\n        else {\n            while (cells.length < count)\n                cells.push('');\n        }\n    }\n    for (; i < cells.length; i++) {\n        // leading or trailing whitespace is ignored per the gfm spec\n        cells[i] = cells[i].trim().replace(/\\\\\\|/g, '|');\n    }\n    return cells;\n}\n/**\n * Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\n * /c*$/ is vulnerable to REDOS.\n *\n * @param str\n * @param c\n * @param invert Remove suffix of non-c chars instead. Default falsey.\n */\nexport function rtrim(str, c, invert) {\n    const l = str.length;\n    if (l === 0) {\n        return '';\n    }\n    // Length of suffix matching the invert condition.\n    let suffLen = 0;\n    // Step left until we fail to match the invert condition.\n    while (suffLen < l) {\n        const currChar = str.charAt(l - suffLen - 1);\n        if (currChar === c && !invert) {\n            suffLen++;\n        }\n        else if (currChar !== c && invert) {\n            suffLen++;\n        }\n        else {\n            break;\n        }\n    }\n    return str.slice(0, l - suffLen);\n}\nexport function findClosingBracket(str, b) {\n    if (str.indexOf(b[1]) === -1) {\n        return -1;\n    }\n    let level = 0;\n    for (let i = 0; i < str.length; i++) {\n        if (str[i] === '\\\\') {\n            i++;\n        }\n        else if (str[i] === b[0]) {\n            level++;\n        }\n        else if (str[i] === b[1]) {\n            level--;\n            if (level < 0) {\n                return i;\n            }\n        }\n    }\n    return -1;\n}\n","import { _defaults } from './defaults.ts';\nimport { rtrim, splitCells, escape, findClosingBracket } from './helpers.ts';\nfunction outputLink(cap, link, raw, lexer) {\n    const href = link.href;\n    const title = link.title ? escape(link.title) : null;\n    const text = cap[1].replace(/\\\\([\\[\\]])/g, '$1');\n    if (cap[0].charAt(0) !== '!') {\n        lexer.state.inLink = true;\n        const token = {\n            type: 'link',\n            raw,\n            href,\n            title,\n            text,\n            tokens: lexer.inlineTokens(text)\n        };\n        lexer.state.inLink = false;\n        return token;\n    }\n    return {\n        type: 'image',\n        raw,\n        href,\n        title,\n        text: escape(text)\n    };\n}\nfunction indentCodeCompensation(raw, text) {\n    const matchIndentToCode = raw.match(/^(\\s+)(?:```)/);\n    if (matchIndentToCode === null) {\n        return text;\n    }\n    const indentToCode = matchIndentToCode[1];\n    return text\n        .split('\\n')\n        .map(node => {\n        const matchIndentInNode = node.match(/^\\s+/);\n        if (matchIndentInNode === null) {\n            return node;\n        }\n        const [indentInNode] = matchIndentInNode;\n        if (indentInNode.length >= indentToCode.length) {\n            return node.slice(indentToCode.length);\n        }\n        return node;\n    })\n        .join('\\n');\n}\n/**\n * Tokenizer\n */\nexport class _Tokenizer {\n    options;\n    rules; // set by the lexer\n    lexer; // set by the lexer\n    constructor(options) {\n        this.options = options || _defaults;\n    }\n    space(src) {\n        const cap = this.rules.block.newline.exec(src);\n        if (cap && cap[0].length > 0) {\n            return {\n                type: 'space',\n                raw: cap[0]\n            };\n        }\n    }\n    code(src) {\n        const cap = this.rules.block.code.exec(src);\n        if (cap) {\n            const text = cap[0].replace(/^ {1,4}/gm, '');\n            return {\n                type: 'code',\n                raw: cap[0],\n                codeBlockStyle: 'indented',\n                text: !this.options.pedantic\n                    ? rtrim(text, '\\n')\n                    : text\n            };\n        }\n    }\n    fences(src) {\n        const cap = this.rules.block.fences.exec(src);\n        if (cap) {\n            const raw = cap[0];\n            const text = indentCodeCompensation(raw, cap[3] || '');\n            return {\n                type: 'code',\n                raw,\n                lang: cap[2] ? cap[2].trim().replace(this.rules.inline.anyPunctuation, '$1') : cap[2],\n                text\n            };\n        }\n    }\n    heading(src) {\n        const cap = this.rules.block.heading.exec(src);\n        if (cap) {\n            let text = cap[2].trim();\n            // remove trailing #s\n            if (/#$/.test(text)) {\n                const trimmed = rtrim(text, '#');\n                if (this.options.pedantic) {\n                    text = trimmed.trim();\n                }\n                else if (!trimmed || / $/.test(trimmed)) {\n                    // CommonMark requires space before trailing #s\n                    text = trimmed.trim();\n                }\n            }\n            return {\n                type: 'heading',\n                raw: cap[0],\n                depth: cap[1].length,\n                text,\n                tokens: this.lexer.inline(text)\n            };\n        }\n    }\n    hr(src) {\n        const cap = this.rules.block.hr.exec(src);\n        if (cap) {\n            return {\n                type: 'hr',\n                raw: cap[0]\n            };\n        }\n    }\n    blockquote(src) {\n        const cap = this.rules.block.blockquote.exec(src);\n        if (cap) {\n            const text = rtrim(cap[0].replace(/^ *>[ \\t]?/gm, ''), '\\n');\n            const top = this.lexer.state.top;\n            this.lexer.state.top = true;\n            const tokens = this.lexer.blockTokens(text);\n            this.lexer.state.top = top;\n            return {\n                type: 'blockquote',\n                raw: cap[0],\n                tokens,\n                text\n            };\n        }\n    }\n    list(src) {\n        let cap = this.rules.block.list.exec(src);\n        if (cap) {\n            let bull = cap[1].trim();\n            const isordered = bull.length > 1;\n            const list = {\n                type: 'list',\n                raw: '',\n                ordered: isordered,\n                start: isordered ? +bull.slice(0, -1) : '',\n                loose: false,\n                items: []\n            };\n            bull = isordered ? `\\\\d{1,9}\\\\${bull.slice(-1)}` : `\\\\${bull}`;\n            if (this.options.pedantic) {\n                bull = isordered ? bull : '[*+-]';\n            }\n            // Get next list item\n            const itemRegex = new RegExp(`^( {0,3}${bull})((?:[\\t ][^\\\\n]*)?(?:\\\\n|$))`);\n            let raw = '';\n            let itemContents = '';\n            let endsWithBlankLine = false;\n            // Check if current bullet point can start a new List Item\n            while (src) {\n                let endEarly = false;\n                if (!(cap = itemRegex.exec(src))) {\n                    break;\n                }\n                if (this.rules.block.hr.test(src)) { // End list if bullet was actually HR (possibly move into itemRegex?)\n                    break;\n                }\n                raw = cap[0];\n                src = src.substring(raw.length);\n                let line = cap[2].split('\\n', 1)[0].replace(/^\\t+/, (t) => ' '.repeat(3 * t.length));\n                let nextLine = src.split('\\n', 1)[0];\n                let indent = 0;\n                if (this.options.pedantic) {\n                    indent = 2;\n                    itemContents = line.trimStart();\n                }\n                else {\n                    indent = cap[2].search(/[^ ]/); // Find first non-space char\n                    indent = indent > 4 ? 1 : indent; // Treat indented code blocks (> 4 spaces) as having only 1 indent\n                    itemContents = line.slice(indent);\n                    indent += cap[1].length;\n                }\n                let blankLine = false;\n                if (!line && /^ *$/.test(nextLine)) { // Items begin with at most one blank line\n                    raw += nextLine + '\\n';\n                    src = src.substring(nextLine.length + 1);\n                    endEarly = true;\n                }\n                if (!endEarly) {\n                    const nextBulletRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}(?:[*+-]|\\\\d{1,9}[.)])((?:[ \\t][^\\\\n]*)?(?:\\\\n|$))`);\n                    const hrRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$)`);\n                    const fencesBeginRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}(?:\\`\\`\\`|~~~)`);\n                    const headingBeginRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}#`);\n                    // Check if following lines should be included in List Item\n                    while (src) {\n                        const rawLine = src.split('\\n', 1)[0];\n                        nextLine = rawLine;\n                        // Re-align to follow commonmark nesting rules\n                        if (this.options.pedantic) {\n                            nextLine = nextLine.replace(/^ {1,4}(?=( {4})*[^ ])/g, '  ');\n                        }\n                        // End list item if found code fences\n                        if (fencesBeginRegex.test(nextLine)) {\n                            break;\n                        }\n                        // End list item if found start of new heading\n                        if (headingBeginRegex.test(nextLine)) {\n                            break;\n                        }\n                        // End list item if found start of new bullet\n                        if (nextBulletRegex.test(nextLine)) {\n                            break;\n                        }\n                        // Horizontal rule found\n                        if (hrRegex.test(src)) {\n                            break;\n                        }\n                        if (nextLine.search(/[^ ]/) >= indent || !nextLine.trim()) { // Dedent if possible\n                            itemContents += '\\n' + nextLine.slice(indent);\n                        }\n                        else {\n                            // not enough indentation\n                            if (blankLine) {\n                                break;\n                            }\n                            // paragraph continuation unless last line was a different block level element\n                            if (line.search(/[^ ]/) >= 4) { // indented code block\n                                break;\n                            }\n                            if (fencesBeginRegex.test(line)) {\n                                break;\n                            }\n                            if (headingBeginRegex.test(line)) {\n                                break;\n                            }\n                            if (hrRegex.test(line)) {\n                                break;\n                            }\n                            itemContents += '\\n' + nextLine;\n                        }\n                        if (!blankLine && !nextLine.trim()) { // Check if current line is blank\n                            blankLine = true;\n                        }\n                        raw += rawLine + '\\n';\n                        src = src.substring(rawLine.length + 1);\n                        line = nextLine.slice(indent);\n                    }\n                }\n                if (!list.loose) {\n                    // If the previous item ended with a blank line, the list is loose\n                    if (endsWithBlankLine) {\n                        list.loose = true;\n                    }\n                    else if (/\\n *\\n *$/.test(raw)) {\n                        endsWithBlankLine = true;\n                    }\n                }\n                let istask = null;\n                let ischecked;\n                // Check for task list items\n                if (this.options.gfm) {\n                    istask = /^\\[[ xX]\\] /.exec(itemContents);\n                    if (istask) {\n                        ischecked = istask[0] !== '[ ] ';\n                        itemContents = itemContents.replace(/^\\[[ xX]\\] +/, '');\n                    }\n                }\n                list.items.push({\n                    type: 'list_item',\n                    raw,\n                    task: !!istask,\n                    checked: ischecked,\n                    loose: false,\n                    text: itemContents,\n                    tokens: []\n                });\n                list.raw += raw;\n            }\n            // Do not consume newlines at end of final item. Alternatively, make itemRegex *start* with any newlines to simplify/speed up endsWithBlankLine logic\n            list.items[list.items.length - 1].raw = raw.trimEnd();\n            (list.items[list.items.length - 1]).text = itemContents.trimEnd();\n            list.raw = list.raw.trimEnd();\n            // Item child tokens handled here at end because we needed to have the final item to trim it first\n            for (let i = 0; i < list.items.length; i++) {\n                this.lexer.state.top = false;\n                list.items[i].tokens = this.lexer.blockTokens(list.items[i].text, []);\n                if (!list.loose) {\n                    // Check if list should be loose\n                    const spacers = list.items[i].tokens.filter(t => t.type === 'space');\n                    const hasMultipleLineBreaks = spacers.length > 0 && spacers.some(t => /\\n.*\\n/.test(t.raw));\n                    list.loose = hasMultipleLineBreaks;\n                }\n            }\n            // Set all items to loose if list is loose\n            if (list.loose) {\n                for (let i = 0; i < list.items.length; i++) {\n                    list.items[i].loose = true;\n                }\n            }\n            return list;\n        }\n    }\n    html(src) {\n        const cap = this.rules.block.html.exec(src);\n        if (cap) {\n            const token = {\n                type: 'html',\n                block: true,\n                raw: cap[0],\n                pre: cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style',\n                text: cap[0]\n            };\n            return token;\n        }\n    }\n    def(src) {\n        const cap = this.rules.block.def.exec(src);\n        if (cap) {\n            const tag = cap[1].toLowerCase().replace(/\\s+/g, ' ');\n            const href = cap[2] ? cap[2].replace(/^<(.*)>$/, '$1').replace(this.rules.inline.anyPunctuation, '$1') : '';\n            const title = cap[3] ? cap[3].substring(1, cap[3].length - 1).replace(this.rules.inline.anyPunctuation, '$1') : cap[3];\n            return {\n                type: 'def',\n                tag,\n                raw: cap[0],\n                href,\n                title\n            };\n        }\n    }\n    table(src) {\n        const cap = this.rules.block.table.exec(src);\n        if (!cap) {\n            return;\n        }\n        if (!/[:|]/.test(cap[2])) {\n            // delimiter row must have a pipe (|) or colon (:) otherwise it is a setext heading\n            return;\n        }\n        const headers = splitCells(cap[1]);\n        const aligns = cap[2].replace(/^\\||\\| *$/g, '').split('|');\n        const rows = cap[3] && cap[3].trim() ? cap[3].replace(/\\n[ \\t]*$/, '').split('\\n') : [];\n        const item = {\n            type: 'table',\n            raw: cap[0],\n            header: [],\n            align: [],\n            rows: []\n        };\n        if (headers.length !== aligns.length) {\n            // header and align columns must be equal, rows can be different.\n            return;\n        }\n        for (const align of aligns) {\n            if (/^ *-+: *$/.test(align)) {\n                item.align.push('right');\n            }\n            else if (/^ *:-+: *$/.test(align)) {\n                item.align.push('center');\n            }\n            else if (/^ *:-+ *$/.test(align)) {\n                item.align.push('left');\n            }\n            else {\n                item.align.push(null);\n            }\n        }\n        for (const header of headers) {\n            item.header.push({\n                text: header,\n                tokens: this.lexer.inline(header)\n            });\n        }\n        for (const row of rows) {\n            item.rows.push(splitCells(row, item.header.length).map(cell => {\n                return {\n                    text: cell,\n                    tokens: this.lexer.inline(cell)\n                };\n            }));\n        }\n        return item;\n    }\n    lheading(src) {\n        const cap = this.rules.block.lheading.exec(src);\n        if (cap) {\n            return {\n                type: 'heading',\n                raw: cap[0],\n                depth: cap[2].charAt(0) === '=' ? 1 : 2,\n                text: cap[1],\n                tokens: this.lexer.inline(cap[1])\n            };\n        }\n    }\n    paragraph(src) {\n        const cap = this.rules.block.paragraph.exec(src);\n        if (cap) {\n            const text = cap[1].charAt(cap[1].length - 1) === '\\n'\n                ? cap[1].slice(0, -1)\n                : cap[1];\n            return {\n                type: 'paragraph',\n                raw: cap[0],\n                text,\n                tokens: this.lexer.inline(text)\n            };\n        }\n    }\n    text(src) {\n        const cap = this.rules.block.text.exec(src);\n        if (cap) {\n            return {\n                type: 'text',\n                raw: cap[0],\n                text: cap[0],\n                tokens: this.lexer.inline(cap[0])\n            };\n        }\n    }\n    escape(src) {\n        const cap = this.rules.inline.escape.exec(src);\n        if (cap) {\n            return {\n                type: 'escape',\n                raw: cap[0],\n                text: escape(cap[1])\n            };\n        }\n    }\n    tag(src) {\n        const cap = this.rules.inline.tag.exec(src);\n        if (cap) {\n            if (!this.lexer.state.inLink && /^<a /i.test(cap[0])) {\n                this.lexer.state.inLink = true;\n            }\n            else if (this.lexer.state.inLink && /^<\\/a>/i.test(cap[0])) {\n                this.lexer.state.inLink = false;\n            }\n            if (!this.lexer.state.inRawBlock && /^<(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n                this.lexer.state.inRawBlock = true;\n            }\n            else if (this.lexer.state.inRawBlock && /^<\\/(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n                this.lexer.state.inRawBlock = false;\n            }\n            return {\n                type: 'html',\n                raw: cap[0],\n                inLink: this.lexer.state.inLink,\n                inRawBlock: this.lexer.state.inRawBlock,\n                block: false,\n                text: cap[0]\n            };\n        }\n    }\n    link(src) {\n        const cap = this.rules.inline.link.exec(src);\n        if (cap) {\n            const trimmedUrl = cap[2].trim();\n            if (!this.options.pedantic && /^</.test(trimmedUrl)) {\n                // commonmark requires matching angle brackets\n                if (!(/>$/.test(trimmedUrl))) {\n                    return;\n                }\n                // ending angle bracket cannot be escaped\n                const rtrimSlash = rtrim(trimmedUrl.slice(0, -1), '\\\\');\n                if ((trimmedUrl.length - rtrimSlash.length) % 2 === 0) {\n                    return;\n                }\n            }\n            else {\n                // find closing parenthesis\n                const lastParenIndex = findClosingBracket(cap[2], '()');\n                if (lastParenIndex > -1) {\n                    const start = cap[0].indexOf('!') === 0 ? 5 : 4;\n                    const linkLen = start + cap[1].length + lastParenIndex;\n                    cap[2] = cap[2].substring(0, lastParenIndex);\n                    cap[0] = cap[0].substring(0, linkLen).trim();\n                    cap[3] = '';\n                }\n            }\n            let href = cap[2];\n            let title = '';\n            if (this.options.pedantic) {\n                // split pedantic href and title\n                const link = /^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/.exec(href);\n                if (link) {\n                    href = link[1];\n                    title = link[3];\n                }\n            }\n            else {\n                title = cap[3] ? cap[3].slice(1, -1) : '';\n            }\n            href = href.trim();\n            if (/^</.test(href)) {\n                if (this.options.pedantic && !(/>$/.test(trimmedUrl))) {\n                    // pedantic allows starting angle bracket without ending angle bracket\n                    href = href.slice(1);\n                }\n                else {\n                    href = href.slice(1, -1);\n                }\n            }\n            return outputLink(cap, {\n                href: href ? href.replace(this.rules.inline.anyPunctuation, '$1') : href,\n                title: title ? title.replace(this.rules.inline.anyPunctuation, '$1') : title\n            }, cap[0], this.lexer);\n        }\n    }\n    reflink(src, links) {\n        let cap;\n        if ((cap = this.rules.inline.reflink.exec(src))\n            || (cap = this.rules.inline.nolink.exec(src))) {\n            const linkString = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n            const link = links[linkString.toLowerCase()];\n            if (!link) {\n                const text = cap[0].charAt(0);\n                return {\n                    type: 'text',\n                    raw: text,\n                    text\n                };\n            }\n            return outputLink(cap, link, cap[0], this.lexer);\n        }\n    }\n    emStrong(src, maskedSrc, prevChar = '') {\n        let match = this.rules.inline.emStrongLDelim.exec(src);\n        if (!match)\n            return;\n        // _ can't be between two alphanumerics. \\p{L}\\p{N} includes non-english alphabet/numbers as well\n        if (match[3] && prevChar.match(/[\\p{L}\\p{N}]/u))\n            return;\n        const nextChar = match[1] || match[2] || '';\n        if (!nextChar || !prevChar || this.rules.inline.punctuation.exec(prevChar)) {\n            // unicode Regex counts emoji as 1 char; spread into array for proper count (used multiple times below)\n            const lLength = [...match[0]].length - 1;\n            let rDelim, rLength, delimTotal = lLength, midDelimTotal = 0;\n            const endReg = match[0][0] === '*' ? this.rules.inline.emStrongRDelimAst : this.rules.inline.emStrongRDelimUnd;\n            endReg.lastIndex = 0;\n            // Clip maskedSrc to same section of string as src (move to lexer?)\n            maskedSrc = maskedSrc.slice(-1 * src.length + lLength);\n            while ((match = endReg.exec(maskedSrc)) != null) {\n                rDelim = match[1] || match[2] || match[3] || match[4] || match[5] || match[6];\n                if (!rDelim)\n                    continue; // skip single * in __abc*abc__\n                rLength = [...rDelim].length;\n                if (match[3] || match[4]) { // found another Left Delim\n                    delimTotal += rLength;\n                    continue;\n                }\n                else if (match[5] || match[6]) { // either Left or Right Delim\n                    if (lLength % 3 && !((lLength + rLength) % 3)) {\n                        midDelimTotal += rLength;\n                        continue; // CommonMark Emphasis Rules 9-10\n                    }\n                }\n                delimTotal -= rLength;\n                if (delimTotal > 0)\n                    continue; // Haven't found enough closing delimiters\n                // Remove extra characters. *a*** -> *a*\n                rLength = Math.min(rLength, rLength + delimTotal + midDelimTotal);\n                // char length can be >1 for unicode characters;\n                const lastCharLength = [...match[0]][0].length;\n                const raw = src.slice(0, lLength + match.index + lastCharLength + rLength);\n                // Create `em` if smallest delimiter has odd char count. *a***\n                if (Math.min(lLength, rLength) % 2) {\n                    const text = raw.slice(1, -1);\n                    return {\n                        type: 'em',\n                        raw,\n                        text,\n                        tokens: this.lexer.inlineTokens(text)\n                    };\n                }\n                // Create 'strong' if smallest delimiter has even char count. **a***\n                const text = raw.slice(2, -2);\n                return {\n                    type: 'strong',\n                    raw,\n                    text,\n                    tokens: this.lexer.inlineTokens(text)\n                };\n            }\n        }\n    }\n    codespan(src) {\n        const cap = this.rules.inline.code.exec(src);\n        if (cap) {\n            let text = cap[2].replace(/\\n/g, ' ');\n            const hasNonSpaceChars = /[^ ]/.test(text);\n            const hasSpaceCharsOnBothEnds = /^ /.test(text) && / $/.test(text);\n            if (hasNonSpaceChars && hasSpaceCharsOnBothEnds) {\n                text = text.substring(1, text.length - 1);\n            }\n            text = escape(text, true);\n            return {\n                type: 'codespan',\n                raw: cap[0],\n                text\n            };\n        }\n    }\n    br(src) {\n        const cap = this.rules.inline.br.exec(src);\n        if (cap) {\n            return {\n                type: 'br',\n                raw: cap[0]\n            };\n        }\n    }\n    del(src) {\n        const cap = this.rules.inline.del.exec(src);\n        if (cap) {\n            return {\n                type: 'del',\n                raw: cap[0],\n                text: cap[2],\n                tokens: this.lexer.inlineTokens(cap[2])\n            };\n        }\n    }\n    autolink(src) {\n        const cap = this.rules.inline.autolink.exec(src);\n        if (cap) {\n            let text, href;\n            if (cap[2] === '@') {\n                text = escape(cap[1]);\n                href = 'mailto:' + text;\n            }\n            else {\n                text = escape(cap[1]);\n                href = text;\n            }\n            return {\n                type: 'link',\n                raw: cap[0],\n                text,\n                href,\n                tokens: [\n                    {\n                        type: 'text',\n                        raw: text,\n                        text\n                    }\n                ]\n            };\n        }\n    }\n    url(src) {\n        let cap;\n        if (cap = this.rules.inline.url.exec(src)) {\n            let text, href;\n            if (cap[2] === '@') {\n                text = escape(cap[0]);\n                href = 'mailto:' + text;\n            }\n            else {\n                // do extended autolink path validation\n                let prevCapZero;\n                do {\n                    prevCapZero = cap[0];\n                    cap[0] = this.rules.inline._backpedal.exec(cap[0])?.[0] ?? '';\n                } while (prevCapZero !== cap[0]);\n                text = escape(cap[0]);\n                if (cap[1] === 'www.') {\n                    href = 'http://' + cap[0];\n                }\n                else {\n                    href = cap[0];\n                }\n            }\n            return {\n                type: 'link',\n                raw: cap[0],\n                text,\n                href,\n                tokens: [\n                    {\n                        type: 'text',\n                        raw: text,\n                        text\n                    }\n                ]\n            };\n        }\n    }\n    inlineText(src) {\n        const cap = this.rules.inline.text.exec(src);\n        if (cap) {\n            let text;\n            if (this.lexer.state.inRawBlock) {\n                text = cap[0];\n            }\n            else {\n                text = escape(cap[0]);\n            }\n            return {\n                type: 'text',\n                raw: cap[0],\n                text\n            };\n        }\n    }\n}\n","import { edit, noopTest } from './helpers.ts';\n/**\n * Block-Level Grammar\n */\nconst newline = /^(?: *(?:\\n|$))+/;\nconst blockCode = /^( {4}[^\\n]+(?:\\n(?: *(?:\\n|$))*)?)+/;\nconst fences = /^ {0,3}(`{3,}(?=[^`\\n]*(?:\\n|$))|~{3,})([^\\n]*)(?:\\n|$)(?:|([\\s\\S]*?)(?:\\n|$))(?: {0,3}\\1[~`]* *(?=\\n|$)|$)/;\nconst hr = /^ {0,3}((?:-[\\t ]*){3,}|(?:_[ \\t]*){3,}|(?:\\*[ \\t]*){3,})(?:\\n+|$)/;\nconst heading = /^ {0,3}(#{1,6})(?=\\s|$)(.*)(?:\\n+|$)/;\nconst bullet = /(?:[*+-]|\\d{1,9}[.)])/;\nconst lheading = edit(/^(?!bull )((?:.|\\n(?!\\s*?\\n|bull ))+?)\\n {0,3}(=+|-+) *(?:\\n+|$)/)\n    .replace(/bull/g, bullet) // lists can interrupt\n    .getRegex();\nconst _paragraph = /^([^\\n]+(?:\\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\\n)[^\\n]+)*)/;\nconst blockText = /^[^\\n]+/;\nconst _blockLabel = /(?!\\s*\\])(?:\\\\.|[^\\[\\]\\\\])+/;\nconst def = edit(/^ {0,3}\\[(label)\\]: *(?:\\n *)?([^<\\s][^\\s]*|<.*?>)(?:(?: +(?:\\n *)?| *\\n *)(title))? *(?:\\n+|$)/)\n    .replace('label', _blockLabel)\n    .replace('title', /(?:\"(?:\\\\\"?|[^\"\\\\])*\"|'[^'\\n]*(?:\\n[^'\\n]+)*\\n?'|\\([^()]*\\))/)\n    .getRegex();\nconst list = edit(/^( {0,3}bull)([ \\t][^\\n]+?)?(?:\\n|$)/)\n    .replace(/bull/g, bullet)\n    .getRegex();\nconst _tag = 'address|article|aside|base|basefont|blockquote|body|caption'\n    + '|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption'\n    + '|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe'\n    + '|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option'\n    + '|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr'\n    + '|track|ul';\nconst _comment = /<!--(?!-?>)[\\s\\S]*?(?:-->|$)/;\nconst html = edit('^ {0,3}(?:' // optional indentation\n    + '<(script|pre|style|textarea)[\\\\s>][\\\\s\\\\S]*?(?:</\\\\1>[^\\\\n]*\\\\n+|$)' // (1)\n    + '|comment[^\\\\n]*(\\\\n+|$)' // (2)\n    + '|<\\\\?[\\\\s\\\\S]*?(?:\\\\?>\\\\n*|$)' // (3)\n    + '|<![A-Z][\\\\s\\\\S]*?(?:>\\\\n*|$)' // (4)\n    + '|<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?(?:\\\\]\\\\]>\\\\n*|$)' // (5)\n    + '|</?(tag)(?: +|\\\\n|/?>)[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)' // (6)\n    + '|<(?!script|pre|style|textarea)([a-z][\\\\w-]*)(?:attribute)*? */?>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)' // (7) open tag\n    + '|</(?!script|pre|style|textarea)[a-z][\\\\w-]*\\\\s*>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)' // (7) closing tag\n    + ')', 'i')\n    .replace('comment', _comment)\n    .replace('tag', _tag)\n    .replace('attribute', / +[a-zA-Z:_][\\w.:-]*(?: *= *\"[^\"\\n]*\"| *= *'[^'\\n]*'| *= *[^\\s\"'=<>`]+)?/)\n    .getRegex();\nconst paragraph = edit(_paragraph)\n    .replace('hr', hr)\n    .replace('heading', ' {0,3}#{1,6}(?:\\\\s|$)')\n    .replace('|lheading', '') // setex headings don't interrupt commonmark paragraphs\n    .replace('|table', '')\n    .replace('blockquote', ' {0,3}>')\n    .replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n')\n    .replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n    .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)')\n    .replace('tag', _tag) // pars can be interrupted by type (6) html blocks\n    .getRegex();\nconst blockquote = edit(/^( {0,3}> ?(paragraph|[^\\n]*)(?:\\n|$))+/)\n    .replace('paragraph', paragraph)\n    .getRegex();\n/**\n * Normal Block Grammar\n */\nconst blockNormal = {\n    blockquote,\n    code: blockCode,\n    def,\n    fences,\n    heading,\n    hr,\n    html,\n    lheading,\n    list,\n    newline,\n    paragraph,\n    table: noopTest,\n    text: blockText\n};\n/**\n * GFM Block Grammar\n */\nconst gfmTable = edit('^ *([^\\\\n ].*)\\\\n' // Header\n    + ' {0,3}((?:\\\\| *)?:?-+:? *(?:\\\\| *:?-+:? *)*(?:\\\\| *)?)' // Align\n    + '(?:\\\\n((?:(?! *\\\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\\\n|$))*)\\\\n*|$)') // Cells\n    .replace('hr', hr)\n    .replace('heading', ' {0,3}#{1,6}(?:\\\\s|$)')\n    .replace('blockquote', ' {0,3}>')\n    .replace('code', ' {4}[^\\\\n]')\n    .replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n')\n    .replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n    .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)')\n    .replace('tag', _tag) // tables can be interrupted by type (6) html blocks\n    .getRegex();\nconst blockGfm = {\n    ...blockNormal,\n    table: gfmTable,\n    paragraph: edit(_paragraph)\n        .replace('hr', hr)\n        .replace('heading', ' {0,3}#{1,6}(?:\\\\s|$)')\n        .replace('|lheading', '') // setex headings don't interrupt commonmark paragraphs\n        .replace('table', gfmTable) // interrupt paragraphs with table\n        .replace('blockquote', ' {0,3}>')\n        .replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n')\n        .replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n        .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)')\n        .replace('tag', _tag) // pars can be interrupted by type (6) html blocks\n        .getRegex()\n};\n/**\n * Pedantic grammar (original John Gruber's loose markdown specification)\n */\nconst blockPedantic = {\n    ...blockNormal,\n    html: edit('^ *(?:comment *(?:\\\\n|\\\\s*$)'\n        + '|<(tag)[\\\\s\\\\S]+?</\\\\1> *(?:\\\\n{2,}|\\\\s*$)' // closed tag\n        + '|<tag(?:\"[^\"]*\"|\\'[^\\']*\\'|\\\\s[^\\'\"/>\\\\s]*)*?/?> *(?:\\\\n{2,}|\\\\s*$))')\n        .replace('comment', _comment)\n        .replace(/tag/g, '(?!(?:'\n        + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub'\n        + '|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)'\n        + '\\\\b)\\\\w+(?!:|[^\\\\w\\\\s@]*@)\\\\b')\n        .getRegex(),\n    def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +([\"(][^\\n]+[\")]))? *(?:\\n+|$)/,\n    heading: /^(#{1,6})(.*)(?:\\n+|$)/,\n    fences: noopTest, // fences not supported\n    lheading: /^(.+?)\\n {0,3}(=+|-+) *(?:\\n+|$)/,\n    paragraph: edit(_paragraph)\n        .replace('hr', hr)\n        .replace('heading', ' *#{1,6} *[^\\n]')\n        .replace('lheading', lheading)\n        .replace('|table', '')\n        .replace('blockquote', ' {0,3}>')\n        .replace('|fences', '')\n        .replace('|list', '')\n        .replace('|html', '')\n        .replace('|tag', '')\n        .getRegex()\n};\n/**\n * Inline-Level Grammar\n */\nconst escape = /^\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/;\nconst inlineCode = /^(`+)([^`]|[^`][\\s\\S]*?[^`])\\1(?!`)/;\nconst br = /^( {2,}|\\\\)\\n(?!\\s*$)/;\nconst inlineText = /^(`+|[^`])(?:(?= {2,}\\n)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*_]|\\b_|$)|[^ ](?= {2,}\\n)))/;\n// list of unicode punctuation marks, plus any missing characters from CommonMark spec\nconst _punctuation = '\\\\p{P}$+<=>`^|~';\nconst punctuation = edit(/^((?![*_])[\\spunctuation])/, 'u')\n    .replace(/punctuation/g, _punctuation).getRegex();\n// sequences em should skip over [title](link), `code`, <html>\nconst blockSkip = /\\[[^[\\]]*?\\]\\([^\\(\\)]*?\\)|`[^`]*?`|<[^<>]*?>/g;\nconst emStrongLDelim = edit(/^(?:\\*+(?:((?!\\*)[punct])|[^\\s*]))|^_+(?:((?!_)[punct])|([^\\s_]))/, 'u')\n    .replace(/punct/g, _punctuation)\n    .getRegex();\nconst emStrongRDelimAst = edit('^[^_*]*?__[^_*]*?\\\\*[^_*]*?(?=__)' // Skip orphan inside strong\n    + '|[^*]+(?=[^*])' // Consume to delim\n    + '|(?!\\\\*)[punct](\\\\*+)(?=[\\\\s]|$)' // (1) #*** can only be a Right Delimiter\n    + '|[^punct\\\\s](\\\\*+)(?!\\\\*)(?=[punct\\\\s]|$)' // (2) a***#, a*** can only be a Right Delimiter\n    + '|(?!\\\\*)[punct\\\\s](\\\\*+)(?=[^punct\\\\s])' // (3) #***a, ***a can only be Left Delimiter\n    + '|[\\\\s](\\\\*+)(?!\\\\*)(?=[punct])' // (4) ***# can only be Left Delimiter\n    + '|(?!\\\\*)[punct](\\\\*+)(?!\\\\*)(?=[punct])' // (5) #***# can be either Left or Right Delimiter\n    + '|[^punct\\\\s](\\\\*+)(?=[^punct\\\\s])', 'gu') // (6) a***a can be either Left or Right Delimiter\n    .replace(/punct/g, _punctuation)\n    .getRegex();\n// (6) Not allowed for _\nconst emStrongRDelimUnd = edit('^[^_*]*?\\\\*\\\\*[^_*]*?_[^_*]*?(?=\\\\*\\\\*)' // Skip orphan inside strong\n    + '|[^_]+(?=[^_])' // Consume to delim\n    + '|(?!_)[punct](_+)(?=[\\\\s]|$)' // (1) #___ can only be a Right Delimiter\n    + '|[^punct\\\\s](_+)(?!_)(?=[punct\\\\s]|$)' // (2) a___#, a___ can only be a Right Delimiter\n    + '|(?!_)[punct\\\\s](_+)(?=[^punct\\\\s])' // (3) #___a, ___a can only be Left Delimiter\n    + '|[\\\\s](_+)(?!_)(?=[punct])' // (4) ___# can only be Left Delimiter\n    + '|(?!_)[punct](_+)(?!_)(?=[punct])', 'gu') // (5) #___# can be either Left or Right Delimiter\n    .replace(/punct/g, _punctuation)\n    .getRegex();\nconst anyPunctuation = edit(/\\\\([punct])/, 'gu')\n    .replace(/punct/g, _punctuation)\n    .getRegex();\nconst autolink = edit(/^<(scheme:[^\\s\\x00-\\x1f<>]*|email)>/)\n    .replace('scheme', /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/)\n    .replace('email', /[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/)\n    .getRegex();\nconst _inlineComment = edit(_comment).replace('(?:-->|$)', '-->').getRegex();\nconst tag = edit('^comment'\n    + '|^</[a-zA-Z][\\\\w:-]*\\\\s*>' // self-closing tag\n    + '|^<[a-zA-Z][\\\\w-]*(?:attribute)*?\\\\s*/?>' // open tag\n    + '|^<\\\\?[\\\\s\\\\S]*?\\\\?>' // processing instruction, e.g. <?php ?>\n    + '|^<![a-zA-Z]+\\\\s[\\\\s\\\\S]*?>' // declaration, e.g. <!DOCTYPE html>\n    + '|^<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>') // CDATA section\n    .replace('comment', _inlineComment)\n    .replace('attribute', /\\s+[a-zA-Z:_][\\w.:-]*(?:\\s*=\\s*\"[^\"]*\"|\\s*=\\s*'[^']*'|\\s*=\\s*[^\\s\"'=<>`]+)?/)\n    .getRegex();\nconst _inlineLabel = /(?:\\[(?:\\\\.|[^\\[\\]\\\\])*\\]|\\\\.|`[^`]*`|[^\\[\\]\\\\`])*?/;\nconst link = edit(/^!?\\[(label)\\]\\(\\s*(href)(?:\\s+(title))?\\s*\\)/)\n    .replace('label', _inlineLabel)\n    .replace('href', /<(?:\\\\.|[^\\n<>\\\\])+>|[^\\s\\x00-\\x1f]*/)\n    .replace('title', /\"(?:\\\\\"?|[^\"\\\\])*\"|'(?:\\\\'?|[^'\\\\])*'|\\((?:\\\\\\)?|[^)\\\\])*\\)/)\n    .getRegex();\nconst reflink = edit(/^!?\\[(label)\\]\\[(ref)\\]/)\n    .replace('label', _inlineLabel)\n    .replace('ref', _blockLabel)\n    .getRegex();\nconst nolink = edit(/^!?\\[(ref)\\](?:\\[\\])?/)\n    .replace('ref', _blockLabel)\n    .getRegex();\nconst reflinkSearch = edit('reflink|nolink(?!\\\\()', 'g')\n    .replace('reflink', reflink)\n    .replace('nolink', nolink)\n    .getRegex();\n/**\n * Normal Inline Grammar\n */\nconst inlineNormal = {\n    _backpedal: noopTest, // only used for GFM url\n    anyPunctuation,\n    autolink,\n    blockSkip,\n    br,\n    code: inlineCode,\n    del: noopTest,\n    emStrongLDelim,\n    emStrongRDelimAst,\n    emStrongRDelimUnd,\n    escape,\n    link,\n    nolink,\n    punctuation,\n    reflink,\n    reflinkSearch,\n    tag,\n    text: inlineText,\n    url: noopTest\n};\n/**\n * Pedantic Inline Grammar\n */\nconst inlinePedantic = {\n    ...inlineNormal,\n    link: edit(/^!?\\[(label)\\]\\((.*?)\\)/)\n        .replace('label', _inlineLabel)\n        .getRegex(),\n    reflink: edit(/^!?\\[(label)\\]\\s*\\[([^\\]]*)\\]/)\n        .replace('label', _inlineLabel)\n        .getRegex()\n};\n/**\n * GFM Inline Grammar\n */\nconst inlineGfm = {\n    ...inlineNormal,\n    escape: edit(escape).replace('])', '~|])').getRegex(),\n    url: edit(/^((?:ftp|https?):\\/\\/|www\\.)(?:[a-zA-Z0-9\\-]+\\.?)+[^\\s<]*|^email/, 'i')\n        .replace('email', /[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/)\n        .getRegex(),\n    _backpedal: /(?:[^?!.,:;*_'\"~()&]+|\\([^)]*\\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'\"~)]+(?!$))+/,\n    del: /^(~~?)(?=[^\\s~])([\\s\\S]*?[^\\s~])\\1(?=[^~]|$)/,\n    text: /^([`~]+|[^`~])(?:(?= {2,}\\n)|(?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*~_]|\\b_|https?:\\/\\/|ftp:\\/\\/|www\\.|$)|[^ ](?= {2,}\\n)|[^a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-](?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)))/\n};\n/**\n * GFM + Line Breaks Inline Grammar\n */\nconst inlineBreaks = {\n    ...inlineGfm,\n    br: edit(br).replace('{2,}', '*').getRegex(),\n    text: edit(inlineGfm.text)\n        .replace('\\\\b_', '\\\\b_| {2,}\\\\n')\n        .replace(/\\{2,\\}/g, '*')\n        .getRegex()\n};\n/**\n * exports\n */\nexport const block = {\n    normal: blockNormal,\n    gfm: blockGfm,\n    pedantic: blockPedantic\n};\nexport const inline = {\n    normal: inlineNormal,\n    gfm: inlineGfm,\n    breaks: inlineBreaks,\n    pedantic: inlinePedantic\n};\n","import { _Tokenizer } from './Tokenizer.ts';\nimport { _defaults } from './defaults.ts';\nimport { block, inline } from './rules.ts';\n/**\n * Block Lexer\n */\nexport class _Lexer {\n    tokens;\n    options;\n    state;\n    tokenizer;\n    inlineQueue;\n    constructor(options) {\n        // TokenList cannot be created in one go\n        this.tokens = [];\n        this.tokens.links = Object.create(null);\n        this.options = options || _defaults;\n        this.options.tokenizer = this.options.tokenizer || new _Tokenizer();\n        this.tokenizer = this.options.tokenizer;\n        this.tokenizer.options = this.options;\n        this.tokenizer.lexer = this;\n        this.inlineQueue = [];\n        this.state = {\n            inLink: false,\n            inRawBlock: false,\n            top: true\n        };\n        const rules = {\n            block: block.normal,\n            inline: inline.normal\n        };\n        if (this.options.pedantic) {\n            rules.block = block.pedantic;\n            rules.inline = inline.pedantic;\n        }\n        else if (this.options.gfm) {\n            rules.block = block.gfm;\n            if (this.options.breaks) {\n                rules.inline = inline.breaks;\n            }\n            else {\n                rules.inline = inline.gfm;\n            }\n        }\n        this.tokenizer.rules = rules;\n    }\n    /**\n     * Expose Rules\n     */\n    static get rules() {\n        return {\n            block,\n            inline\n        };\n    }\n    /**\n     * Static Lex Method\n     */\n    static lex(src, options) {\n        const lexer = new _Lexer(options);\n        return lexer.lex(src);\n    }\n    /**\n     * Static Lex Inline Method\n     */\n    static lexInline(src, options) {\n        const lexer = new _Lexer(options);\n        return lexer.inlineTokens(src);\n    }\n    /**\n     * Preprocessing\n     */\n    lex(src) {\n        src = src\n            .replace(/\\r\\n|\\r/g, '\\n');\n        this.blockTokens(src, this.tokens);\n        for (let i = 0; i < this.inlineQueue.length; i++) {\n            const next = this.inlineQueue[i];\n            this.inlineTokens(next.src, next.tokens);\n        }\n        this.inlineQueue = [];\n        return this.tokens;\n    }\n    blockTokens(src, tokens = []) {\n        if (this.options.pedantic) {\n            src = src.replace(/\\t/g, '    ').replace(/^ +$/gm, '');\n        }\n        else {\n            src = src.replace(/^( *)(\\t+)/gm, (_, leading, tabs) => {\n                return leading + '    '.repeat(tabs.length);\n            });\n        }\n        let token;\n        let lastToken;\n        let cutSrc;\n        let lastParagraphClipped;\n        while (src) {\n            if (this.options.extensions\n                && this.options.extensions.block\n                && this.options.extensions.block.some((extTokenizer) => {\n                    if (token = extTokenizer.call({ lexer: this }, src, tokens)) {\n                        src = src.substring(token.raw.length);\n                        tokens.push(token);\n                        return true;\n                    }\n                    return false;\n                })) {\n                continue;\n            }\n            // newline\n            if (token = this.tokenizer.space(src)) {\n                src = src.substring(token.raw.length);\n                if (token.raw.length === 1 && tokens.length > 0) {\n                    // if there's a single \\n as a spacer, it's terminating the last line,\n                    // so move it there so that we don't get unnecessary paragraph tags\n                    tokens[tokens.length - 1].raw += '\\n';\n                }\n                else {\n                    tokens.push(token);\n                }\n                continue;\n            }\n            // code\n            if (token = this.tokenizer.code(src)) {\n                src = src.substring(token.raw.length);\n                lastToken = tokens[tokens.length - 1];\n                // An indented code block cannot interrupt a paragraph.\n                if (lastToken && (lastToken.type === 'paragraph' || lastToken.type === 'text')) {\n                    lastToken.raw += '\\n' + token.raw;\n                    lastToken.text += '\\n' + token.text;\n                    this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;\n                }\n                else {\n                    tokens.push(token);\n                }\n                continue;\n            }\n            // fences\n            if (token = this.tokenizer.fences(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // heading\n            if (token = this.tokenizer.heading(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // hr\n            if (token = this.tokenizer.hr(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // blockquote\n            if (token = this.tokenizer.blockquote(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // list\n            if (token = this.tokenizer.list(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // html\n            if (token = this.tokenizer.html(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // def\n            if (token = this.tokenizer.def(src)) {\n                src = src.substring(token.raw.length);\n                lastToken = tokens[tokens.length - 1];\n                if (lastToken && (lastToken.type === 'paragraph' || lastToken.type === 'text')) {\n                    lastToken.raw += '\\n' + token.raw;\n                    lastToken.text += '\\n' + token.raw;\n                    this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;\n                }\n                else if (!this.tokens.links[token.tag]) {\n                    this.tokens.links[token.tag] = {\n                        href: token.href,\n                        title: token.title\n                    };\n                }\n                continue;\n            }\n            // table (gfm)\n            if (token = this.tokenizer.table(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // lheading\n            if (token = this.tokenizer.lheading(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // top-level paragraph\n            // prevent paragraph consuming extensions by clipping 'src' to extension start\n            cutSrc = src;\n            if (this.options.extensions && this.options.extensions.startBlock) {\n                let startIndex = Infinity;\n                const tempSrc = src.slice(1);\n                let tempStart;\n                this.options.extensions.startBlock.forEach((getStartIndex) => {\n                    tempStart = getStartIndex.call({ lexer: this }, tempSrc);\n                    if (typeof tempStart === 'number' && tempStart >= 0) {\n                        startIndex = Math.min(startIndex, tempStart);\n                    }\n                });\n                if (startIndex < Infinity && startIndex >= 0) {\n                    cutSrc = src.substring(0, startIndex + 1);\n                }\n            }\n            if (this.state.top && (token = this.tokenizer.paragraph(cutSrc))) {\n                lastToken = tokens[tokens.length - 1];\n                if (lastParagraphClipped && lastToken.type === 'paragraph') {\n                    lastToken.raw += '\\n' + token.raw;\n                    lastToken.text += '\\n' + token.text;\n                    this.inlineQueue.pop();\n                    this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;\n                }\n                else {\n                    tokens.push(token);\n                }\n                lastParagraphClipped = (cutSrc.length !== src.length);\n                src = src.substring(token.raw.length);\n                continue;\n            }\n            // text\n            if (token = this.tokenizer.text(src)) {\n                src = src.substring(token.raw.length);\n                lastToken = tokens[tokens.length - 1];\n                if (lastToken && lastToken.type === 'text') {\n                    lastToken.raw += '\\n' + token.raw;\n                    lastToken.text += '\\n' + token.text;\n                    this.inlineQueue.pop();\n                    this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;\n                }\n                else {\n                    tokens.push(token);\n                }\n                continue;\n            }\n            if (src) {\n                const errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\n                if (this.options.silent) {\n                    console.error(errMsg);\n                    break;\n                }\n                else {\n                    throw new Error(errMsg);\n                }\n            }\n        }\n        this.state.top = true;\n        return tokens;\n    }\n    inline(src, tokens = []) {\n        this.inlineQueue.push({ src, tokens });\n        return tokens;\n    }\n    /**\n     * Lexing/Compiling\n     */\n    inlineTokens(src, tokens = []) {\n        let token, lastToken, cutSrc;\n        // String with links masked to avoid interference with em and strong\n        let maskedSrc = src;\n        let match;\n        let keepPrevChar, prevChar;\n        // Mask out reflinks\n        if (this.tokens.links) {\n            const links = Object.keys(this.tokens.links);\n            if (links.length > 0) {\n                while ((match = this.tokenizer.rules.inline.reflinkSearch.exec(maskedSrc)) != null) {\n                    if (links.includes(match[0].slice(match[0].lastIndexOf('[') + 1, -1))) {\n                        maskedSrc = maskedSrc.slice(0, match.index) + '[' + 'a'.repeat(match[0].length - 2) + ']' + maskedSrc.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex);\n                    }\n                }\n            }\n        }\n        // Mask out other blocks\n        while ((match = this.tokenizer.rules.inline.blockSkip.exec(maskedSrc)) != null) {\n            maskedSrc = maskedSrc.slice(0, match.index) + '[' + 'a'.repeat(match[0].length - 2) + ']' + maskedSrc.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);\n        }\n        // Mask out escaped characters\n        while ((match = this.tokenizer.rules.inline.anyPunctuation.exec(maskedSrc)) != null) {\n            maskedSrc = maskedSrc.slice(0, match.index) + '++' + maskedSrc.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);\n        }\n        while (src) {\n            if (!keepPrevChar) {\n                prevChar = '';\n            }\n            keepPrevChar = false;\n            // extensions\n            if (this.options.extensions\n                && this.options.extensions.inline\n                && this.options.extensions.inline.some((extTokenizer) => {\n                    if (token = extTokenizer.call({ lexer: this }, src, tokens)) {\n                        src = src.substring(token.raw.length);\n                        tokens.push(token);\n                        return true;\n                    }\n                    return false;\n                })) {\n                continue;\n            }\n            // escape\n            if (token = this.tokenizer.escape(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // tag\n            if (token = this.tokenizer.tag(src)) {\n                src = src.substring(token.raw.length);\n                lastToken = tokens[tokens.length - 1];\n                if (lastToken && token.type === 'text' && lastToken.type === 'text') {\n                    lastToken.raw += token.raw;\n                    lastToken.text += token.text;\n                }\n                else {\n                    tokens.push(token);\n                }\n                continue;\n            }\n            // link\n            if (token = this.tokenizer.link(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // reflink, nolink\n            if (token = this.tokenizer.reflink(src, this.tokens.links)) {\n                src = src.substring(token.raw.length);\n                lastToken = tokens[tokens.length - 1];\n                if (lastToken && token.type === 'text' && lastToken.type === 'text') {\n                    lastToken.raw += token.raw;\n                    lastToken.text += token.text;\n                }\n                else {\n                    tokens.push(token);\n                }\n                continue;\n            }\n            // em & strong\n            if (token = this.tokenizer.emStrong(src, maskedSrc, prevChar)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // code\n            if (token = this.tokenizer.codespan(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // br\n            if (token = this.tokenizer.br(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // del (gfm)\n            if (token = this.tokenizer.del(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // autolink\n            if (token = this.tokenizer.autolink(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // url (gfm)\n            if (!this.state.inLink && (token = this.tokenizer.url(src))) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // text\n            // prevent inlineText consuming extensions by clipping 'src' to extension start\n            cutSrc = src;\n            if (this.options.extensions && this.options.extensions.startInline) {\n                let startIndex = Infinity;\n                const tempSrc = src.slice(1);\n                let tempStart;\n                this.options.extensions.startInline.forEach((getStartIndex) => {\n                    tempStart = getStartIndex.call({ lexer: this }, tempSrc);\n                    if (typeof tempStart === 'number' && tempStart >= 0) {\n                        startIndex = Math.min(startIndex, tempStart);\n                    }\n                });\n                if (startIndex < Infinity && startIndex >= 0) {\n                    cutSrc = src.substring(0, startIndex + 1);\n                }\n            }\n            if (token = this.tokenizer.inlineText(cutSrc)) {\n                src = src.substring(token.raw.length);\n                if (token.raw.slice(-1) !== '_') { // Track prevChar before string of ____ started\n                    prevChar = token.raw.slice(-1);\n                }\n                keepPrevChar = true;\n                lastToken = tokens[tokens.length - 1];\n                if (lastToken && lastToken.type === 'text') {\n                    lastToken.raw += token.raw;\n                    lastToken.text += token.text;\n                }\n                else {\n                    tokens.push(token);\n                }\n                continue;\n            }\n            if (src) {\n                const errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\n                if (this.options.silent) {\n                    console.error(errMsg);\n                    break;\n                }\n                else {\n                    throw new Error(errMsg);\n                }\n            }\n        }\n        return tokens;\n    }\n}\n","import { _defaults } from './defaults.ts';\nimport { cleanUrl, escape } from './helpers.ts';\n/**\n * Renderer\n */\nexport class _Renderer {\n    options;\n    constructor(options) {\n        this.options = options || _defaults;\n    }\n    code(code, infostring, escaped) {\n        const lang = (infostring || '').match(/^\\S*/)?.[0];\n        code = code.replace(/\\n$/, '') + '\\n';\n        if (!lang) {\n            return '<pre><code>'\n                + (escaped ? code : escape(code, true))\n                + '</code></pre>\\n';\n        }\n        return '<pre><code class=\"language-'\n            + escape(lang)\n            + '\">'\n            + (escaped ? code : escape(code, true))\n            + '</code></pre>\\n';\n    }\n    blockquote(quote) {\n        return `<blockquote>\\n${quote}</blockquote>\\n`;\n    }\n    html(html, block) {\n        return html;\n    }\n    heading(text, level, raw) {\n        // ignore IDs\n        return `<h${level}>${text}</h${level}>\\n`;\n    }\n    hr() {\n        return '<hr>\\n';\n    }\n    list(body, ordered, start) {\n        const type = ordered ? 'ol' : 'ul';\n        const startatt = (ordered && start !== 1) ? (' start=\"' + start + '\"') : '';\n        return '<' + type + startatt + '>\\n' + body + '</' + type + '>\\n';\n    }\n    listitem(text, task, checked) {\n        return `<li>${text}</li>\\n`;\n    }\n    checkbox(checked) {\n        return '<input '\n            + (checked ? 'checked=\"\" ' : '')\n            + 'disabled=\"\" type=\"checkbox\">';\n    }\n    paragraph(text) {\n        return `<p>${text}</p>\\n`;\n    }\n    table(header, body) {\n        if (body)\n            body = `<tbody>${body}</tbody>`;\n        return '<table>\\n'\n            + '<thead>\\n'\n            + header\n            + '</thead>\\n'\n            + body\n            + '</table>\\n';\n    }\n    tablerow(content) {\n        return `<tr>\\n${content}</tr>\\n`;\n    }\n    tablecell(content, flags) {\n        const type = flags.header ? 'th' : 'td';\n        const tag = flags.align\n            ? `<${type} align=\"${flags.align}\">`\n            : `<${type}>`;\n        return tag + content + `</${type}>\\n`;\n    }\n    /**\n     * span level renderer\n     */\n    strong(text) {\n        return `<strong>${text}</strong>`;\n    }\n    em(text) {\n        return `<em>${text}</em>`;\n    }\n    codespan(text) {\n        return `<code>${text}</code>`;\n    }\n    br() {\n        return '<br>';\n    }\n    del(text) {\n        return `<del>${text}</del>`;\n    }\n    link(href, title, text) {\n        const cleanHref = cleanUrl(href);\n        if (cleanHref === null) {\n            return text;\n        }\n        href = cleanHref;\n        let out = '<a href=\"' + href + '\"';\n        if (title) {\n            out += ' title=\"' + title + '\"';\n        }\n        out += '>' + text + '</a>';\n        return out;\n    }\n    image(href, title, text) {\n        const cleanHref = cleanUrl(href);\n        if (cleanHref === null) {\n            return text;\n        }\n        href = cleanHref;\n        let out = `<img src=\"${href}\" alt=\"${text}\"`;\n        if (title) {\n            out += ` title=\"${title}\"`;\n        }\n        out += '>';\n        return out;\n    }\n    text(text) {\n        return text;\n    }\n}\n","/**\n * TextRenderer\n * returns only the textual part of the token\n */\nexport class _TextRenderer {\n    // no need for block level renderers\n    strong(text) {\n        return text;\n    }\n    em(text) {\n        return text;\n    }\n    codespan(text) {\n        return text;\n    }\n    del(text) {\n        return text;\n    }\n    html(text) {\n        return text;\n    }\n    text(text) {\n        return text;\n    }\n    link(href, title, text) {\n        return '' + text;\n    }\n    image(href, title, text) {\n        return '' + text;\n    }\n    br() {\n        return '';\n    }\n}\n","import { _Renderer } from './Renderer.ts';\nimport { _TextRenderer } from './TextRenderer.ts';\nimport { _defaults } from './defaults.ts';\nimport { unescape } from './helpers.ts';\n/**\n * Parsing & Compiling\n */\nexport class _Parser {\n    options;\n    renderer;\n    textRenderer;\n    constructor(options) {\n        this.options = options || _defaults;\n        this.options.renderer = this.options.renderer || new _Renderer();\n        this.renderer = this.options.renderer;\n        this.renderer.options = this.options;\n        this.textRenderer = new _TextRenderer();\n    }\n    /**\n     * Static Parse Method\n     */\n    static parse(tokens, options) {\n        const parser = new _Parser(options);\n        return parser.parse(tokens);\n    }\n    /**\n     * Static Parse Inline Method\n     */\n    static parseInline(tokens, options) {\n        const parser = new _Parser(options);\n        return parser.parseInline(tokens);\n    }\n    /**\n     * Parse Loop\n     */\n    parse(tokens, top = true) {\n        let out = '';\n        for (let i = 0; i < tokens.length; i++) {\n            const token = tokens[i];\n            // Run any renderer extensions\n            if (this.options.extensions && this.options.extensions.renderers && this.options.extensions.renderers[token.type]) {\n                const genericToken = token;\n                const ret = this.options.extensions.renderers[genericToken.type].call({ parser: this }, genericToken);\n                if (ret !== false || !['space', 'hr', 'heading', 'code', 'table', 'blockquote', 'list', 'html', 'paragraph', 'text'].includes(genericToken.type)) {\n                    out += ret || '';\n                    continue;\n                }\n            }\n            switch (token.type) {\n                case 'space': {\n                    continue;\n                }\n                case 'hr': {\n                    out += this.renderer.hr();\n                    continue;\n                }\n                case 'heading': {\n                    const headingToken = token;\n                    out += this.renderer.heading(this.parseInline(headingToken.tokens), headingToken.depth, unescape(this.parseInline(headingToken.tokens, this.textRenderer)));\n                    continue;\n                }\n                case 'code': {\n                    const codeToken = token;\n                    out += this.renderer.code(codeToken.text, codeToken.lang, !!codeToken.escaped);\n                    continue;\n                }\n                case 'table': {\n                    const tableToken = token;\n                    let header = '';\n                    // header\n                    let cell = '';\n                    for (let j = 0; j < tableToken.header.length; j++) {\n                        cell += this.renderer.tablecell(this.parseInline(tableToken.header[j].tokens), { header: true, align: tableToken.align[j] });\n                    }\n                    header += this.renderer.tablerow(cell);\n                    let body = '';\n                    for (let j = 0; j < tableToken.rows.length; j++) {\n                        const row = tableToken.rows[j];\n                        cell = '';\n                        for (let k = 0; k < row.length; k++) {\n                            cell += this.renderer.tablecell(this.parseInline(row[k].tokens), { header: false, align: tableToken.align[k] });\n                        }\n                        body += this.renderer.tablerow(cell);\n                    }\n                    out += this.renderer.table(header, body);\n                    continue;\n                }\n                case 'blockquote': {\n                    const blockquoteToken = token;\n                    const body = this.parse(blockquoteToken.tokens);\n                    out += this.renderer.blockquote(body);\n                    continue;\n                }\n                case 'list': {\n                    const listToken = token;\n                    const ordered = listToken.ordered;\n                    const start = listToken.start;\n                    const loose = listToken.loose;\n                    let body = '';\n                    for (let j = 0; j < listToken.items.length; j++) {\n                        const item = listToken.items[j];\n                        const checked = item.checked;\n                        const task = item.task;\n                        let itemBody = '';\n                        if (item.task) {\n                            const checkbox = this.renderer.checkbox(!!checked);\n                            if (loose) {\n                                if (item.tokens.length > 0 && item.tokens[0].type === 'paragraph') {\n                                    item.tokens[0].text = checkbox + ' ' + item.tokens[0].text;\n                                    if (item.tokens[0].tokens && item.tokens[0].tokens.length > 0 && item.tokens[0].tokens[0].type === 'text') {\n                                        item.tokens[0].tokens[0].text = checkbox + ' ' + item.tokens[0].tokens[0].text;\n                                    }\n                                }\n                                else {\n                                    item.tokens.unshift({\n                                        type: 'text',\n                                        text: checkbox + ' '\n                                    });\n                                }\n                            }\n                            else {\n                                itemBody += checkbox + ' ';\n                            }\n                        }\n                        itemBody += this.parse(item.tokens, loose);\n                        body += this.renderer.listitem(itemBody, task, !!checked);\n                    }\n                    out += this.renderer.list(body, ordered, start);\n                    continue;\n                }\n                case 'html': {\n                    const htmlToken = token;\n                    out += this.renderer.html(htmlToken.text, htmlToken.block);\n                    continue;\n                }\n                case 'paragraph': {\n                    const paragraphToken = token;\n                    out += this.renderer.paragraph(this.parseInline(paragraphToken.tokens));\n                    continue;\n                }\n                case 'text': {\n                    let textToken = token;\n                    let body = textToken.tokens ? this.parseInline(textToken.tokens) : textToken.text;\n                    while (i + 1 < tokens.length && tokens[i + 1].type === 'text') {\n                        textToken = tokens[++i];\n                        body += '\\n' + (textToken.tokens ? this.parseInline(textToken.tokens) : textToken.text);\n                    }\n                    out += top ? this.renderer.paragraph(body) : body;\n                    continue;\n                }\n                default: {\n                    const errMsg = 'Token with \"' + token.type + '\" type was not found.';\n                    if (this.options.silent) {\n                        console.error(errMsg);\n                        return '';\n                    }\n                    else {\n                        throw new Error(errMsg);\n                    }\n                }\n            }\n        }\n        return out;\n    }\n    /**\n     * Parse Inline Tokens\n     */\n    parseInline(tokens, renderer) {\n        renderer = renderer || this.renderer;\n        let out = '';\n        for (let i = 0; i < tokens.length; i++) {\n            const token = tokens[i];\n            // Run any renderer extensions\n            if (this.options.extensions && this.options.extensions.renderers && this.options.extensions.renderers[token.type]) {\n                const ret = this.options.extensions.renderers[token.type].call({ parser: this }, token);\n                if (ret !== false || !['escape', 'html', 'link', 'image', 'strong', 'em', 'codespan', 'br', 'del', 'text'].includes(token.type)) {\n                    out += ret || '';\n                    continue;\n                }\n            }\n            switch (token.type) {\n                case 'escape': {\n                    const escapeToken = token;\n                    out += renderer.text(escapeToken.text);\n                    break;\n                }\n                case 'html': {\n                    const tagToken = token;\n                    out += renderer.html(tagToken.text);\n                    break;\n                }\n                case 'link': {\n                    const linkToken = token;\n                    out += renderer.link(linkToken.href, linkToken.title, this.parseInline(linkToken.tokens, renderer));\n                    break;\n                }\n                case 'image': {\n                    const imageToken = token;\n                    out += renderer.image(imageToken.href, imageToken.title, imageToken.text);\n                    break;\n                }\n                case 'strong': {\n                    const strongToken = token;\n                    out += renderer.strong(this.parseInline(strongToken.tokens, renderer));\n                    break;\n                }\n                case 'em': {\n                    const emToken = token;\n                    out += renderer.em(this.parseInline(emToken.tokens, renderer));\n                    break;\n                }\n                case 'codespan': {\n                    const codespanToken = token;\n                    out += renderer.codespan(codespanToken.text);\n                    break;\n                }\n                case 'br': {\n                    out += renderer.br();\n                    break;\n                }\n                case 'del': {\n                    const delToken = token;\n                    out += renderer.del(this.parseInline(delToken.tokens, renderer));\n                    break;\n                }\n                case 'text': {\n                    const textToken = token;\n                    out += renderer.text(textToken.text);\n                    break;\n                }\n                default: {\n                    const errMsg = 'Token with \"' + token.type + '\" type was not found.';\n                    if (this.options.silent) {\n                        console.error(errMsg);\n                        return '';\n                    }\n                    else {\n                        throw new Error(errMsg);\n                    }\n                }\n            }\n        }\n        return out;\n    }\n}\n","import { _defaults } from './defaults.ts';\nexport class _Hooks {\n    options;\n    constructor(options) {\n        this.options = options || _defaults;\n    }\n    static passThroughHooks = new Set([\n        'preprocess',\n        'postprocess',\n        'processAllTokens'\n    ]);\n    /**\n     * Process markdown before marked\n     */\n    preprocess(markdown) {\n        return markdown;\n    }\n    /**\n     * Process HTML after marked is finished\n     */\n    postprocess(html) {\n        return html;\n    }\n    /**\n     * Process all tokens before walk tokens\n     */\n    processAllTokens(tokens) {\n        return tokens;\n    }\n}\n","import { _getDefaults } from './defaults.ts';\nimport { _Lexer } from './Lexer.ts';\nimport { _Parser } from './Parser.ts';\nimport { _Hooks } from './Hooks.ts';\nimport { _Renderer } from './Renderer.ts';\nimport { _Tokenizer } from './Tokenizer.ts';\nimport { _TextRenderer } from './TextRenderer.ts';\nimport { escape } from './helpers.ts';\nexport class Marked {\n    defaults = _getDefaults();\n    options = this.setOptions;\n    parse = this.#parseMarkdown(_Lexer.lex, _Parser.parse);\n    parseInline = this.#parseMarkdown(_Lexer.lexInline, _Parser.parseInline);\n    Parser = _Parser;\n    Renderer = _Renderer;\n    TextRenderer = _TextRenderer;\n    Lexer = _Lexer;\n    Tokenizer = _Tokenizer;\n    Hooks = _Hooks;\n    constructor(...args) {\n        this.use(...args);\n    }\n    /**\n     * Run callback for every token\n     */\n    walkTokens(tokens, callback) {\n        let values = [];\n        for (const token of tokens) {\n            values = values.concat(callback.call(this, token));\n            switch (token.type) {\n                case 'table': {\n                    const tableToken = token;\n                    for (const cell of tableToken.header) {\n                        values = values.concat(this.walkTokens(cell.tokens, callback));\n                    }\n                    for (const row of tableToken.rows) {\n                        for (const cell of row) {\n                            values = values.concat(this.walkTokens(cell.tokens, callback));\n                        }\n                    }\n                    break;\n                }\n                case 'list': {\n                    const listToken = token;\n                    values = values.concat(this.walkTokens(listToken.items, callback));\n                    break;\n                }\n                default: {\n                    const genericToken = token;\n                    if (this.defaults.extensions?.childTokens?.[genericToken.type]) {\n                        this.defaults.extensions.childTokens[genericToken.type].forEach((childTokens) => {\n                            const tokens = genericToken[childTokens].flat(Infinity);\n                            values = values.concat(this.walkTokens(tokens, callback));\n                        });\n                    }\n                    else if (genericToken.tokens) {\n                        values = values.concat(this.walkTokens(genericToken.tokens, callback));\n                    }\n                }\n            }\n        }\n        return values;\n    }\n    use(...args) {\n        const extensions = this.defaults.extensions || { renderers: {}, childTokens: {} };\n        args.forEach((pack) => {\n            // copy options to new object\n            const opts = { ...pack };\n            // set async to true if it was set to true before\n            opts.async = this.defaults.async || opts.async || false;\n            // ==-- Parse \"addon\" extensions --== //\n            if (pack.extensions) {\n                pack.extensions.forEach((ext) => {\n                    if (!ext.name) {\n                        throw new Error('extension name required');\n                    }\n                    if ('renderer' in ext) { // Renderer extensions\n                        const prevRenderer = extensions.renderers[ext.name];\n                        if (prevRenderer) {\n                            // Replace extension with func to run new extension but fall back if false\n                            extensions.renderers[ext.name] = function (...args) {\n                                let ret = ext.renderer.apply(this, args);\n                                if (ret === false) {\n                                    ret = prevRenderer.apply(this, args);\n                                }\n                                return ret;\n                            };\n                        }\n                        else {\n                            extensions.renderers[ext.name] = ext.renderer;\n                        }\n                    }\n                    if ('tokenizer' in ext) { // Tokenizer Extensions\n                        if (!ext.level || (ext.level !== 'block' && ext.level !== 'inline')) {\n                            throw new Error(\"extension level must be 'block' or 'inline'\");\n                        }\n                        const extLevel = extensions[ext.level];\n                        if (extLevel) {\n                            extLevel.unshift(ext.tokenizer);\n                        }\n                        else {\n                            extensions[ext.level] = [ext.tokenizer];\n                        }\n                        if (ext.start) { // Function to check for start of token\n                            if (ext.level === 'block') {\n                                if (extensions.startBlock) {\n                                    extensions.startBlock.push(ext.start);\n                                }\n                                else {\n                                    extensions.startBlock = [ext.start];\n                                }\n                            }\n                            else if (ext.level === 'inline') {\n                                if (extensions.startInline) {\n                                    extensions.startInline.push(ext.start);\n                                }\n                                else {\n                                    extensions.startInline = [ext.start];\n                                }\n                            }\n                        }\n                    }\n                    if ('childTokens' in ext && ext.childTokens) { // Child tokens to be visited by walkTokens\n                        extensions.childTokens[ext.name] = ext.childTokens;\n                    }\n                });\n                opts.extensions = extensions;\n            }\n            // ==-- Parse \"overwrite\" extensions --== //\n            if (pack.renderer) {\n                const renderer = this.defaults.renderer || new _Renderer(this.defaults);\n                for (const prop in pack.renderer) {\n                    if (!(prop in renderer)) {\n                        throw new Error(`renderer '${prop}' does not exist`);\n                    }\n                    if (prop === 'options') {\n                        // ignore options property\n                        continue;\n                    }\n                    const rendererProp = prop;\n                    const rendererFunc = pack.renderer[rendererProp];\n                    const prevRenderer = renderer[rendererProp];\n                    // Replace renderer with func to run extension, but fall back if false\n                    renderer[rendererProp] = (...args) => {\n                        let ret = rendererFunc.apply(renderer, args);\n                        if (ret === false) {\n                            ret = prevRenderer.apply(renderer, args);\n                        }\n                        return ret || '';\n                    };\n                }\n                opts.renderer = renderer;\n            }\n            if (pack.tokenizer) {\n                const tokenizer = this.defaults.tokenizer || new _Tokenizer(this.defaults);\n                for (const prop in pack.tokenizer) {\n                    if (!(prop in tokenizer)) {\n                        throw new Error(`tokenizer '${prop}' does not exist`);\n                    }\n                    if (['options', 'rules', 'lexer'].includes(prop)) {\n                        // ignore options, rules, and lexer properties\n                        continue;\n                    }\n                    const tokenizerProp = prop;\n                    const tokenizerFunc = pack.tokenizer[tokenizerProp];\n                    const prevTokenizer = tokenizer[tokenizerProp];\n                    // Replace tokenizer with func to run extension, but fall back if false\n                    // @ts-expect-error cannot type tokenizer function dynamically\n                    tokenizer[tokenizerProp] = (...args) => {\n                        let ret = tokenizerFunc.apply(tokenizer, args);\n                        if (ret === false) {\n                            ret = prevTokenizer.apply(tokenizer, args);\n                        }\n                        return ret;\n                    };\n                }\n                opts.tokenizer = tokenizer;\n            }\n            // ==-- Parse Hooks extensions --== //\n            if (pack.hooks) {\n                const hooks = this.defaults.hooks || new _Hooks();\n                for (const prop in pack.hooks) {\n                    if (!(prop in hooks)) {\n                        throw new Error(`hook '${prop}' does not exist`);\n                    }\n                    if (prop === 'options') {\n                        // ignore options property\n                        continue;\n                    }\n                    const hooksProp = prop;\n                    const hooksFunc = pack.hooks[hooksProp];\n                    const prevHook = hooks[hooksProp];\n                    if (_Hooks.passThroughHooks.has(prop)) {\n                        // @ts-expect-error cannot type hook function dynamically\n                        hooks[hooksProp] = (arg) => {\n                            if (this.defaults.async) {\n                                return Promise.resolve(hooksFunc.call(hooks, arg)).then(ret => {\n                                    return prevHook.call(hooks, ret);\n                                });\n                            }\n                            const ret = hooksFunc.call(hooks, arg);\n                            return prevHook.call(hooks, ret);\n                        };\n                    }\n                    else {\n                        // @ts-expect-error cannot type hook function dynamically\n                        hooks[hooksProp] = (...args) => {\n                            let ret = hooksFunc.apply(hooks, args);\n                            if (ret === false) {\n                                ret = prevHook.apply(hooks, args);\n                            }\n                            return ret;\n                        };\n                    }\n                }\n                opts.hooks = hooks;\n            }\n            // ==-- Parse WalkTokens extensions --== //\n            if (pack.walkTokens) {\n                const walkTokens = this.defaults.walkTokens;\n                const packWalktokens = pack.walkTokens;\n                opts.walkTokens = function (token) {\n                    let values = [];\n                    values.push(packWalktokens.call(this, token));\n                    if (walkTokens) {\n                        values = values.concat(walkTokens.call(this, token));\n                    }\n                    return values;\n                };\n            }\n            this.defaults = { ...this.defaults, ...opts };\n        });\n        return this;\n    }\n    setOptions(opt) {\n        this.defaults = { ...this.defaults, ...opt };\n        return this;\n    }\n    lexer(src, options) {\n        return _Lexer.lex(src, options ?? this.defaults);\n    }\n    parser(tokens, options) {\n        return _Parser.parse(tokens, options ?? this.defaults);\n    }\n    #parseMarkdown(lexer, parser) {\n        return (src, options) => {\n            const origOpt = { ...options };\n            const opt = { ...this.defaults, ...origOpt };\n            // Show warning if an extension set async to true but the parse was called with async: false\n            if (this.defaults.async === true && origOpt.async === false) {\n                if (!opt.silent) {\n                    console.warn('marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored.');\n                }\n                opt.async = true;\n            }\n            const throwError = this.#onError(!!opt.silent, !!opt.async);\n            // throw error in case of non string input\n            if (typeof src === 'undefined' || src === null) {\n                return throwError(new Error('marked(): input parameter is undefined or null'));\n            }\n            if (typeof src !== 'string') {\n                return throwError(new Error('marked(): input parameter is of type '\n                    + Object.prototype.toString.call(src) + ', string expected'));\n            }\n            if (opt.hooks) {\n                opt.hooks.options = opt;\n            }\n            if (opt.async) {\n                return Promise.resolve(opt.hooks ? opt.hooks.preprocess(src) : src)\n                    .then(src => lexer(src, opt))\n                    .then(tokens => opt.hooks ? opt.hooks.processAllTokens(tokens) : tokens)\n                    .then(tokens => opt.walkTokens ? Promise.all(this.walkTokens(tokens, opt.walkTokens)).then(() => tokens) : tokens)\n                    .then(tokens => parser(tokens, opt))\n                    .then(html => opt.hooks ? opt.hooks.postprocess(html) : html)\n                    .catch(throwError);\n            }\n            try {\n                if (opt.hooks) {\n                    src = opt.hooks.preprocess(src);\n                }\n                let tokens = lexer(src, opt);\n                if (opt.hooks) {\n                    tokens = opt.hooks.processAllTokens(tokens);\n                }\n                if (opt.walkTokens) {\n                    this.walkTokens(tokens, opt.walkTokens);\n                }\n                let html = parser(tokens, opt);\n                if (opt.hooks) {\n                    html = opt.hooks.postprocess(html);\n                }\n                return html;\n            }\n            catch (e) {\n                return throwError(e);\n            }\n        };\n    }\n    #onError(silent, async) {\n        return (e) => {\n            e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n            if (silent) {\n                const msg = '<p>An error occurred:</p><pre>'\n                    + escape(e.message + '', true)\n                    + '</pre>';\n                if (async) {\n                    return Promise.resolve(msg);\n                }\n                return msg;\n            }\n            if (async) {\n                return Promise.reject(e);\n            }\n            throw e;\n        };\n    }\n}\n","import { _Lexer } from './Lexer.ts';\nimport { _Parser } from './Parser.ts';\nimport { _Tokenizer } from './Tokenizer.ts';\nimport { _Renderer } from './Renderer.ts';\nimport { _TextRenderer } from './TextRenderer.ts';\nimport { _Hooks } from './Hooks.ts';\nimport { Marked } from './Instance.ts';\nimport { _getDefaults, changeDefaults, _defaults } from './defaults.ts';\nconst markedInstance = new Marked();\nexport function marked(src, opt) {\n    return markedInstance.parse(src, opt);\n}\n/**\n * Sets the default options.\n *\n * @param options Hash of options\n */\nmarked.options =\n    marked.setOptions = function (options) {\n        markedInstance.setOptions(options);\n        marked.defaults = markedInstance.defaults;\n        changeDefaults(marked.defaults);\n        return marked;\n    };\n/**\n * Gets the original marked default options.\n */\nmarked.getDefaults = _getDefaults;\nmarked.defaults = _defaults;\n/**\n * Use Extension\n */\nmarked.use = function (...args) {\n    markedInstance.use(...args);\n    marked.defaults = markedInstance.defaults;\n    changeDefaults(marked.defaults);\n    return marked;\n};\n/**\n * Run callback for every token\n */\nmarked.walkTokens = function (tokens, callback) {\n    return markedInstance.walkTokens(tokens, callback);\n};\n/**\n * Compiles markdown to HTML without enclosing `p` tag.\n *\n * @param src String of markdown source to be compiled\n * @param options Hash of options\n * @return String of compiled HTML\n */\nmarked.parseInline = markedInstance.parseInline;\n/**\n * Expose\n */\nmarked.Parser = _Parser;\nmarked.parser = _Parser.parse;\nmarked.Renderer = _Renderer;\nmarked.TextRenderer = _TextRenderer;\nmarked.Lexer = _Lexer;\nmarked.lexer = _Lexer.lex;\nmarked.Tokenizer = _Tokenizer;\nmarked.Hooks = _Hooks;\nmarked.parse = marked;\nexport const options = marked.options;\nexport const setOptions = marked.setOptions;\nexport const use = marked.use;\nexport const walkTokens = marked.walkTokens;\nexport const parseInline = marked.parseInline;\nexport const parse = marked;\nexport const parser = _Parser.parse;\nexport const lexer = _Lexer.lex;\nexport { _defaults as defaults, _getDefaults as getDefaults } from './defaults.ts';\nexport { _Lexer as Lexer } from './Lexer.ts';\nexport { _Parser as Parser } from './Parser.ts';\nexport { _Tokenizer as Tokenizer } from './Tokenizer.ts';\nexport { _Renderer as Renderer } from './Renderer.ts';\nexport { _TextRenderer as TextRenderer } from './TextRenderer.ts';\nexport { _Hooks as Hooks } from './Hooks.ts';\nexport { Marked } from './Instance.ts';\n","// Simple in-memory storage for demo purposes\n// This replaces SQLite temporarily to avoid WASM loading issues\n\nimport type { StructuredResponse } from '../gemini/gemini';\n\ninterface ChatSession {\n  id: string;\n  title: string;\n  createdAt: number;\n  projectName?: string;\n  projectType?: string;\n  projectDescription?: string;\n  isActive: boolean;\n  technologies: string[];\n}\n\ninterface ChatMessage {\n  id: string;\n  chatSessionId: string;\n  role: 'user' | 'assistant';\n  content: string;\n  timestamp: number;\n  structuredResponse?: string;\n  relevantFiles: any[];\n  documentationLinks: any[];\n  suggestedQueries: any[];\n}\n\n// In-memory storage\nconst storage = {\n  sessions: new Map<string, ChatSession>(),\n  messages: new Map<string, ChatMessage[]>(),\n};\n\nexport async function initDB() {\n  console.log('[ReactLLM] Using in-memory storage');\n  return true;\n}\n\nexport async function createChatSession(\n  id: string,\n  title: string,\n  projectInfo?: StructuredResponse['projectInfo']\n) {\n  const session: ChatSession = {\n    id,\n    title,\n    createdAt: Date.now(),\n    projectName: projectInfo?.name,\n    projectType: projectInfo?.type,\n    projectDescription: projectInfo?.description,\n    isActive: true,\n    technologies: projectInfo?.mainTechnologies || [],\n  };\n  \n  storage.sessions.set(id, session);\n  storage.messages.set(id, []);\n}\n\nexport async function createMessage(\n  id: string,\n  chatSessionId: string,\n  role: 'user' | 'assistant',\n  content: string,\n  structuredResponse?: string\n) {\n  const message: ChatMessage = {\n    id,\n    chatSessionId,\n    role,\n    content,\n    timestamp: Date.now(),\n    structuredResponse,\n    relevantFiles: [],\n    documentationLinks: [],\n    suggestedQueries: [],\n  };\n  \n  const messages = storage.messages.get(chatSessionId) || [];\n  messages.push(message);\n  storage.messages.set(chatSessionId, messages);\n  \n  // Parse structured response if present\n  if (structuredResponse && role === 'assistant') {\n    try {\n      const parsed = JSON.parse(structuredResponse) as StructuredResponse;\n      \n      message.relevantFiles = parsed.relevantFiles || [];\n      message.documentationLinks = parsed.documentationLinks || [];\n      message.suggestedQueries = (parsed.suggestedQueries || []).map(q => ({ query: q }));\n    } catch (e) {\n      console.error('Failed to parse structured response:', e);\n    }\n  }\n}\n\nexport async function getChatSessions(): Promise<ChatSession[]> {\n  return Array.from(storage.sessions.values())\n    .filter(s => s.isActive)\n    .sort((a, b) => b.createdAt - a.createdAt);\n}\n\nexport async function getMessagesForChatSession(chatSessionId: string): Promise<ChatMessage[]> {\n  return storage.messages.get(chatSessionId) || [];\n}\n\nexport async function deleteChatSession(id: string) {\n  const session = storage.sessions.get(id);\n  if (session) {\n    session.isActive = false;\n  }\n}","export const styles = `\n@font-face {\n  font-family: 'IosevkaTerm';\n  src: url('https://intdev-global.s3.us-west-2.amazonaws.com/public/internet-dev/6397be61-3ea4-459d-8a3e-fd95168cb214.woff2') format('woff2');\n  font-display: swap;\n}\n\n* {\n  font-family: 'IosevkaTerm', monospace;\n}\n\n.toolbar {\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n  width: 400px;\n  height: 500px;\n  background: rgba(0, 0, 0, 0.8);\n  border-radius: 12px;\n  font-family: 'IosevkaTerm', monospace;\n  color: rgba(255, 255, 255, 0.9);\n  backdrop-filter: blur(10px);\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  padding-bottom: 0;\n  transition: opacity 0.3s ease-in-out;\n}\n\n.toolbar.minimized {\n  height: 60px;\n  overflow: hidden;\n}\n\n.header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 8px 12px;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n  font-size: 14px;\n  text-transform: lowercase;\n  height: 44px;\n  flex-shrink: 0;\n}\n\n.header-left {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  min-width: 0;\n  flex: 1;\n}\n\n.chat-title {\n  opacity: 0.8;\n  cursor: pointer;\n  padding: 2px 6px;\n  border-radius: 4px;\n  transition: background 0.2s ease;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  min-width: 0;\n  flex: 1;\n}\n\n.model-display {\n  font-size: 11px;\n  color: rgba(255, 255, 255, 0.6);\n  background: rgba(255, 255, 255, 0.1);\n  padding: 2px 8px;\n  border-radius: 4px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  white-space: nowrap;\n  margin-left: 8px;\n}\n\n.model-display:hover {\n  background: rgba(255, 255, 255, 0.15);\n  color: rgba(255, 255, 255, 0.8);\n}\n\n.controls {\n  display: flex;\n  gap: 8px;\n  width: 100%;\n  justify-content: flex-start;\n}\n\n.control-button {\n  background: rgba(255, 255, 255, 0.1);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  color: rgba(255, 255, 255, 0.9);\n  cursor: pointer;\n  padding: 8px;\n  font-size: 14px;\n  border-radius: 8px;\n  min-width: 36px;\n  height: 36px;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n}\n\n.control-button:hover {\n  background: rgba(255, 255, 255, 0.15);\n  border-color: rgba(255, 255, 255, 0.3);\n  transform: translateY(-1px);\n}\n\n.control-button:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n  transform: none;\n}\n\n.control-button.active {\n  background: rgba(100, 200, 255, 0.2);\n  border-color: rgba(100, 200, 255, 0.3);\n  color: rgba(100, 200, 255, 0.9);\n}\n\n.control-button svg {\n  width: 16px;\n  height: 16px;\n  display: block;\n}\n\n.model-button svg {\n  opacity: 0.9;\n}\n\n.component-selector-button.active {\n  background: rgba(100, 200, 255, 0.2);\n  border-color: rgba(100, 200, 255, 0.3);\n}\n\n.component-selector-button.active svg {\n  color: rgba(100, 200, 255, 0.9);\n}\n\n.chats-dropdown {\n  position: absolute;\n  top: 100%;\n  left: 0;\n  right: 0;\n  background: rgba(0, 0, 0, 0.9);\n  border-radius: 8px;\n  margin: 4px;\n  max-height: 300px;\n  overflow-y: auto;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n  z-index: 1000;\n}\n\n.chat-item {\n  padding: 8px 12px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  transition: background 0.2s ease;\n}\n\n.chat-item:hover {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n.chat-item-title {\n  flex: 1;\n  margin-right: 8px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.chat-item-actions {\n  opacity: 0;\n  transition: opacity 0.2s ease;\n  display: flex;\n  gap: 8px;\n}\n\n.chat-item:hover .chat-item-actions {\n  opacity: 1;\n}\n\n.chat-item-button {\n  background: none;\n  border: none;\n  color: rgba(255, 255, 255, 0.6);\n  cursor: pointer;\n  padding: 2px 6px;\n  font-size: 12px;\n  border-radius: 4px;\n  transition: all 0.2s ease;\n}\n\n.chat-item-button:hover {\n  color: rgba(255, 255, 255, 0.9);\n  background: rgba(255, 255, 255, 0.1);\n}\n\n.docs-section {\n  margin-top: 12px;\n  padding-top: 12px;\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.docs-link {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  padding: 8px;\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 4px;\n  margin-bottom: 8px;\n  cursor: pointer;\n  transition: background 0.2s ease;\n  text-decoration: none;\n  color: inherit;\n}\n\n.docs-link:hover {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n.docs-link-title {\n  font-weight: bold;\n  color: rgba(255, 255, 255, 0.9);\n}\n\n.docs-link-description {\n  font-size: 12px;\n  color: rgba(255, 255, 255, 0.7);\n}\n\n.suggested-queries {\n  margin-top: 12px;\n  padding-top: 12px;\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.suggested-queries-title {\n  font-size: 12px;\n  color: rgba(255, 255, 255, 0.5);\n  margin-bottom: 8px;\n}\n\n.suggested-queries-list {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n}\n\n.suggested-query {\n  padding: 4px 8px;\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 4px;\n  font-size: 12px;\n  cursor: pointer;\n  transition: background 0.2s ease;\n}\n\n.suggested-query:hover {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n.messages {\n  flex: 1;\n  overflow-y: auto;\n  padding: 12px;\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n\n.message {\n  opacity: 0;\n  animation: fadeIn 0.3s ease forwards;\n  padding: 12px;\n  border-radius: 8px;\n  background: rgba(255, 255, 255, 0.05);\n  line-height: 1.5;\n}\n\n.user-message {\n  color: rgba(255, 255, 255, 0.9);\n  background: rgba(100, 100, 255, 0.1);\n  align-self: flex-end;\n  max-width: 85%;\n}\n\n.assistant-message {\n  color: rgba(255, 255, 255, 0.8);\n  background: rgba(255, 255, 255, 0.05);\n  align-self: flex-start;\n  max-width: 100%;\n}\n\n.assistant-message pre {\n  background: rgba(255, 255, 255, 0.1);\n  padding: 8px;\n  border-radius: 4px;\n  overflow-x: auto;\n}\n\n.assistant-message code {\n  background: rgba(255, 255, 255, 0.1);\n  padding: 2px 4px;\n  border-radius: 3px;\n}\n\n.assistant-message ul, .assistant-message ol {\n  margin: 8px 0;\n  padding-left: 20px;\n}\n\n.assistant-message p {\n  margin: 8px 0;\n}\n\n.relevant-files {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  margin-top: 12px;\n  padding-top: 12px;\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.relevant-file {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 4px 8px;\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 4px;\n  font-size: 12px;\n  cursor: pointer;\n  transition: background 0.2s ease;\n  max-width: 100%;\n  overflow: hidden;\n}\n\n.relevant-file:hover {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n.file-path {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.chat-sessions {\n  display: flex;\n  gap: 8px;\n  padding: 8px 12px;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n  overflow-x: auto;\n}\n\n.chat-tab {\n  padding: 4px 8px;\n  background: rgba(255, 255, 255, 0.1);\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 12px;\n  white-space: nowrap;\n  transition: background 0.2s ease;\n}\n\n.chat-tab:hover {\n  background: rgba(255, 255, 255, 0.15);\n}\n\n.chat-tab.active {\n  background: rgba(255, 255, 255, 0.2);\n}\n\n.new-chat-button {\n  background: rgba(255, 255, 255, 0.15);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  color: rgba(255, 255, 255, 0.9);\n  padding: 12px 24px;\n  border-radius: 8px;\n  font-size: 14px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.new-chat-button:hover {\n  background: rgba(255, 255, 255, 0.2);\n  border-color: rgba(255, 255, 255, 0.3);\n}\n\n/* Legacy input area styles - kept for compatibility */\n.input-area {\n  position: sticky;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: rgba(0, 0, 0, 0.8);\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n  padding: 16px;\n  display: flex;\n  gap: 12px;\n  backdrop-filter: blur(10px);\n}\n\n.empty-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  text-align: center;\n  padding: 32px;\n  color: rgba(255, 255, 255, 0.8);\n}\n\n.empty-state-title {\n  font-size: 20px;\n  margin-bottom: 12px;\n  font-weight: 500;\n}\n\n.empty-state-description {\n  font-size: 14px;\n  color: rgba(255, 255, 255, 0.6);\n  margin-bottom: 24px;\n  max-width: 280px;\n  line-height: 1.5;\n}\n\n.content-tabs {\n  display: flex;\n  gap: 2px;\n  padding: 8px 12px;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n  height: 44px;\n  flex-shrink: 0;\n}\n\n.content-tab {\n  padding: 4px 8px;\n  font-size: 12px;\n  color: rgba(255, 255, 255, 0.6);\n  cursor: pointer;\n  border-radius: 4px;\n  transition: all 0.2s ease;\n}\n\n.content-tab:hover {\n  color: rgba(255, 255, 255, 0.9);\n  background: rgba(255, 255, 255, 0.1);\n}\n\n.content-tab.active {\n  color: rgba(255, 255, 255, 0.9);\n  background: rgba(255, 255, 255, 0.1);\n}\n\n.content-section {\n  position: absolute;\n  inset: 88px 0 60px 0;\n  opacity: 0;\n  transition: opacity 0.2s ease;\n  pointer-events: none;\n  overflow-y: auto;\n  padding: 12px;\n}\n\n.content-section.active {\n  opacity: 1;\n  pointer-events: all;\n}\n\n.files-grid, .docs-grid {\n  display: grid;\n  gap: 8px;\n  padding: 12px;\n}\n\n.file-card, .doc-card {\n  background: rgba(255, 255, 255, 0.05);\n  padding: 8px;\n  border-radius: 4px;\n  transition: background 0.2s ease;\n  cursor: pointer;\n}\n\n.file-card:hover, .doc-card:hover {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n.file-card-path {\n  font-size: 12px;\n  color: rgba(255, 255, 255, 0.9);\n  margin-bottom: 4px;\n}\n\n.file-card-reason {\n  font-size: 11px;\n  color: rgba(255, 255, 255, 0.6);\n}\n\n.doc-card-title {\n  font-size: 12px;\n  color: rgba(255, 255, 255, 0.9);\n  margin-bottom: 4px;\n}\n\n.doc-card-description {\n  font-size: 11px;\n  color: rgba(255, 255, 255, 0.6);\n}\n\n.loading-title {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  color: rgba(255, 255, 255, 0.6);\n  font-size: 14px;\n}\n\n.loading-dots {\n  display: inline-flex;\n  align-items: center;\n  gap: 4px;\n  margin-left: 4px;\n}\n\n.loading-dot {\n  width: 3px;\n  height: 3px;\n  background: currentColor;\n  border-radius: 50%;\n  animation: loadingDot 1.4s infinite;\n  opacity: 0.6;\n}\n\n.loading-dot:nth-child(2) {\n  animation-delay: 0.2s;\n}\n\n.loading-dot:nth-child(3) {\n  animation-delay: 0.4s;\n}\n\n@keyframes loadingDot {\n  0%, 100% { opacity: 0.2; transform: scale(0.8); }\n  50% { opacity: 1; transform: scale(1); }\n}\n\n@keyframes fadeIn {\n  from { opacity: 0; transform: translateY(10px); }\n  to { opacity: 1; transform: translateY(0); }\n}\n\n/* Messages Container */\n.messages-container {\n  flex: 1;\n  overflow-y: auto;\n  padding: 16px;\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  scroll-behavior: smooth;\n}\n\n.message-wrapper {\n  animation: fadeIn 0.3s ease;\n}\n\n/* Input area - modern LLM chat style */\n.input-area {\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n  background: rgba(0, 0, 0, 0.5);\n  backdrop-filter: blur(10px);\n  flex-shrink: 0;\n}\n\n.input-form {\n  padding: 12px 16px 0;\n}\n\n.input-area .input {\n  width: 100%;\n  background: rgba(255, 255, 255, 0.05);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 12px;\n  padding: 12px 16px;\n  color: rgba(255, 255, 255, 0.9);\n  font-size: 14px;\n  font-family: inherit;\n  min-height: 48px;\n  max-height: 120px;\n  resize: vertical;\n  transition: all 0.2s ease;\n}\n\n.input-area .input:hover:not(:disabled) {\n  background: rgba(255, 255, 255, 0.08);\n  border-color: rgba(255, 255, 255, 0.15);\n}\n\n.input-area .input:focus {\n  outline: none;\n  background: rgba(255, 255, 255, 0.08);\n  border-color: rgba(255, 255, 255, 0.2);\n}\n\n.input-area .input:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.input-area .input::placeholder {\n  color: rgba(255, 255, 255, 0.4);\n}\n\n.input-controls {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 8px 16px 12px;\n  gap: 8px;\n}\n\n.control-icon-button {\n  background: transparent;\n  border: none;\n  padding: 6px;\n  color: rgba(255, 255, 255, 0.6);\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 6px;\n}\n\n.control-icon-button:hover {\n  background: rgba(255, 255, 255, 0.1);\n  color: rgba(255, 255, 255, 0.9);\n}\n\n.control-icon-button.active {\n  background: rgba(100, 200, 255, 0.2);\n  color: rgba(100, 200, 255, 0.9);\n}\n\n.control-icon-button svg {\n  width: 18px;\n  height: 18px;\n}\n\n.input-controls .send-button {\n  background: rgba(255, 255, 255, 0.1);\n  border: 1px solid rgba(255, 255, 255, 0.15);\n  border-radius: 8px;\n  padding: 6px 16px;\n  color: rgba(255, 255, 255, 0.9);\n  cursor: pointer;\n  transition: all 0.2s ease;\n  font-size: 16px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-left: auto;\n}\n\n.input-controls .send-button:hover:not(:disabled) {\n  background: rgba(255, 255, 255, 0.2);\n  border-color: rgba(255, 255, 255, 0.3);\n}\n\n.input-controls .send-button:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.minimized .messages,\n.minimized .input-area {\n  display: none;\n}\n\n.minimized .latest-message {\n  display: block;\n  padding: 0 12px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  line-height: 40px;\n  color: rgba(255, 255, 255, 0.7);\n}\n\n/* Model Selector Styles */\n.model-selector {\n  position: relative;\n  z-index: 1000;\n}\n\n.model-selector-header {\n  position: relative;\n}\n\n.model-selector-toggle {\n  background: none;\n  border: none;\n  color: rgba(255, 255, 255, 0.9);\n  cursor: pointer;\n  padding: 0;\n  font-size: 14px;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  transition: opacity 0.2s ease;\n}\n\n.model-selector-toggle:hover {\n  opacity: 0.8;\n}\n\n.selected-model-info {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  text-align: left;\n}\n\n.model-name {\n  font-size: 12px;\n  font-weight: 500;\n}\n\n.model-provider {\n  font-size: 10px;\n  color: rgba(255, 255, 255, 0.6);\n}\n\n.no-model {\n  font-size: 12px;\n  color: rgba(255, 255, 255, 0.6);\n}\n\n.expand-icon {\n  font-size: 10px;\n  transition: transform 0.2s ease;\n}\n\n.expand-icon.expanded {\n  transform: rotate(180deg);\n}\n\n.model-selector-dropdown {\n  position: absolute;\n  top: calc(100% + 8px);\n  right: 0;\n  width: 380px;\n  max-height: 500px;\n  background: rgba(0, 0, 0, 0.95);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 8px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n}\n\n.search-section {\n  padding: 12px;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.model-search-input {\n  width: 100%;\n  background: rgba(255, 255, 255, 0.1);\n  border: 1px solid rgba(255, 255, 255, 0.15);\n  border-radius: 6px;\n  padding: 8px 12px;\n  color: rgba(255, 255, 255, 0.9);\n  font-size: 13px;\n  transition: all 0.2s ease;\n}\n\n.model-search-input:focus {\n  outline: none;\n  border-color: rgba(255, 255, 255, 0.3);\n  background: rgba(255, 255, 255, 0.15);\n}\n\n.filter-options {\n  margin-top: 8px;\n}\n\n.filter-checkbox {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  font-size: 12px;\n  color: rgba(255, 255, 255, 0.7);\n  cursor: pointer;\n}\n\n.filter-checkbox input[type=\"checkbox\"] {\n  width: 14px;\n  height: 14px;\n  cursor: pointer;\n}\n\n.loading-models {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  padding: 32px;\n  color: rgba(255, 255, 255, 0.6);\n  font-size: 13px;\n}\n\n.loading-spinner {\n  width: 16px;\n  height: 16px;\n  border: 2px solid rgba(255, 255, 255, 0.2);\n  border-top-color: rgba(255, 255, 255, 0.8);\n  border-radius: 50%;\n  animation: spin 0.8s linear infinite;\n}\n\n@keyframes spin {\n  to { transform: rotate(360deg); }\n}\n\n.model-list {\n  flex: 1;\n  overflow-y: auto;\n  padding: 8px;\n}\n\n.model-group {\n  margin-bottom: 16px;\n}\n\n.group-title {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 8px;\n  font-size: 11px;\n  text-transform: uppercase;\n  color: rgba(255, 255, 255, 0.5);\n  font-weight: 600;\n  letter-spacing: 0.05em;\n}\n\n.model-count {\n  font-weight: normal;\n  opacity: 0.6;\n}\n\n.model-items {\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n}\n\n.model-option {\n  background: rgba(255, 255, 255, 0.05);\n  border: 1px solid transparent;\n  border-radius: 6px;\n  padding: 10px 12px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  width: 100%;\n  text-align: left;\n}\n\n.model-option:hover {\n  background: rgba(255, 255, 255, 0.1);\n  border-color: rgba(255, 255, 255, 0.1);\n}\n\n.model-option.selected {\n  background: rgba(255, 255, 255, 0.15);\n  border-color: rgba(255, 255, 255, 0.3);\n}\n\n.model-info {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.model-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.model-option .model-name {\n  font-size: 13px;\n  color: rgba(255, 255, 255, 0.9);\n  font-weight: 500;\n}\n\n.model-badge {\n  font-size: 11px;\n  padding: 2px 6px;\n  border-radius: 4px;\n  background: rgba(255, 200, 0, 0.2);\n  color: rgba(255, 200, 0, 0.9);\n}\n\n.model-details {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  font-size: 11px;\n  color: rgba(255, 255, 255, 0.6);\n}\n\n.model-context {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n\n.model-price {\n  color: rgba(100, 255, 100, 0.8);\n}\n\n.no-models {\n  padding: 32px;\n  text-align: center;\n  color: rgba(255, 255, 255, 0.5);\n  font-size: 13px;\n}\n\n.model-selector-footer {\n  padding: 8px 12px;\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n  background: rgba(0, 0, 0, 0.5);\n}\n\n.model-info-text {\n  font-size: 11px;\n  color: rgba(255, 255, 255, 0.5);\n  text-align: center;\n}\n\n/* Full Page Views */\n.view-container {\n  position: absolute;\n  inset: 0;\n  background: rgba(0, 0, 0, 0.95);\n  z-index: 100;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n\n.view-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 16px;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n  flex-shrink: 0;\n}\n\n.view-title {\n  font-size: 18px;\n  font-weight: 500;\n  color: rgba(255, 255, 255, 0.9);\n}\n\n.view-close {\n  background: none;\n  border: none;\n  color: rgba(255, 255, 255, 0.6);\n  cursor: pointer;\n  padding: 8px;\n  border-radius: 4px;\n  transition: all 0.2s ease;\n  font-size: 20px;\n  line-height: 1;\n}\n\n.view-close:hover {\n  background: rgba(255, 255, 255, 0.1);\n  color: rgba(255, 255, 255, 0.9);\n}\n\n.view-content {\n  flex: 1;\n  overflow-y: auto;\n  padding: 24px;\n}\n\n/* Settings View */\n.settings-section {\n  margin-bottom: 32px;\n}\n\n.settings-label {\n  display: block;\n  font-size: 14px;\n  color: rgba(255, 255, 255, 0.8);\n  margin-bottom: 8px;\n  font-weight: 500;\n}\n\n.settings-input {\n  width: 100%;\n  background: rgba(255, 255, 255, 0.1);\n  border: 1px solid rgba(255, 255, 255, 0.15);\n  border-radius: 8px;\n  padding: 12px 16px;\n  color: rgba(255, 255, 255, 0.9);\n  font-size: 14px;\n  transition: all 0.2s ease;\n  font-family: 'IosevkaTerm', monospace;\n}\n\n.settings-input:focus {\n  outline: none;\n  border-color: rgba(255, 255, 255, 0.3);\n  background: rgba(255, 255, 255, 0.15);\n}\n\n.settings-hint {\n  font-size: 12px;\n  color: rgba(255, 255, 255, 0.5);\n  margin-top: 4px;\n}\n\n.settings-button {\n  background: rgba(255, 255, 255, 0.15);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  border-radius: 8px;\n  padding: 10px 20px;\n  color: rgba(255, 255, 255, 0.9);\n  font-size: 14px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  margin-top: 16px;\n}\n\n.settings-button:hover {\n  background: rgba(255, 255, 255, 0.2);\n  border-color: rgba(255, 255, 255, 0.3);\n}\n\n.settings-button:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n/* Models View */\n.models-grid {\n  display: grid;\n  gap: 16px;\n}\n\n.model-card {\n  background: rgba(255, 255, 255, 0.05);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 12px;\n  padding: 16px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.model-card:hover {\n  background: rgba(255, 255, 255, 0.08);\n  border-color: rgba(255, 255, 255, 0.2);\n  transform: translateY(-2px);\n}\n\n.model-card.selected {\n  background: rgba(255, 255, 255, 0.15);\n  border-color: rgba(255, 255, 255, 0.3);\n}\n\n.model-card-header {\n  display: flex;\n  align-items: start;\n  justify-content: space-between;\n  margin-bottom: 12px;\n}\n\n.model-card-name {\n  font-size: 16px;\n  font-weight: 500;\n  color: rgba(255, 255, 255, 0.9);\n}\n\n.model-card-provider {\n  font-size: 12px;\n  color: rgba(255, 255, 255, 0.5);\n  margin-top: 4px;\n}\n\n.model-card-badge {\n  padding: 4px 8px;\n  border-radius: 4px;\n  font-size: 11px;\n  font-weight: 500;\n}\n\n.model-card-badge.recommended {\n  background: rgba(255, 200, 0, 0.2);\n  color: rgba(255, 200, 0, 0.9);\n}\n\n.model-card-specs {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 12px;\n  margin-bottom: 12px;\n}\n\n.model-spec {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.model-spec-label {\n  font-size: 11px;\n  color: rgba(255, 255, 255, 0.5);\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n}\n\n.model-spec-value {\n  font-size: 14px;\n  color: rgba(255, 255, 255, 0.8);\n  font-weight: 500;\n}\n\n.model-card-description {\n  font-size: 13px;\n  color: rgba(255, 255, 255, 0.6);\n  line-height: 1.5;\n}\n\n.api-key-prompt {\n  background: rgba(255, 200, 0, 0.1);\n  border: 1px solid rgba(255, 200, 0, 0.2);\n  border-radius: 8px;\n  padding: 16px;\n  margin-bottom: 24px;\n  text-align: center;\n}\n\n.api-key-prompt-text {\n  color: rgba(255, 200, 0, 0.9);\n  font-size: 14px;\n  margin-bottom: 12px;\n}\n\n.api-key-prompt-button {\n  background: rgba(255, 200, 0, 0.2);\n  border: 1px solid rgba(255, 200, 0, 0.3);\n  color: rgba(255, 200, 0, 0.9);\n  padding: 8px 16px;\n  border-radius: 6px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  font-size: 13px;\n}\n\n.api-key-prompt-button:hover {\n  background: rgba(255, 200, 0, 0.3);\n  border-color: rgba(255, 200, 0, 0.4);\n}\n\n/* Components View */\n.empty-components {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  min-height: 200px;\n  text-align: center;\n}\n\n.empty-components p {\n  color: rgba(255, 255, 255, 0.5);\n  margin-bottom: 16px;\n}\n\n.select-component-button {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 8px 16px;\n  background: rgba(100, 200, 255, 0.2);\n  border: 1px solid rgba(100, 200, 255, 0.3);\n  border-radius: 8px;\n  color: rgba(100, 200, 255, 0.9);\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.select-component-button:hover {\n  background: rgba(100, 200, 255, 0.3);\n  border-color: rgba(100, 200, 255, 0.4);\n}\n\n.components-list {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n\n.component-item {\n  background: rgba(255, 255, 255, 0.05);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 8px;\n  padding: 16px;\n}\n\n.component-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 12px;\n}\n\n.component-name {\n  font-size: 16px;\n  font-weight: 500;\n  color: rgba(255, 255, 255, 0.9);\n}\n\n.remove-button {\n  background: none;\n  border: none;\n  color: rgba(255, 255, 255, 0.5);\n  cursor: pointer;\n  font-size: 20px;\n  padding: 0;\n  width: 24px;\n  height: 24px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 4px;\n  transition: all 0.2s ease;\n}\n\n.remove-button:hover {\n  background: rgba(255, 255, 255, 0.1);\n  color: rgba(255, 255, 255, 0.8);\n}\n\n.component-details {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n\n.detail-row {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.detail-label {\n  font-size: 12px;\n  color: rgba(255, 255, 255, 0.5);\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n}\n\n.detail-value {\n  font-size: 13px;\n  color: rgba(255, 255, 255, 0.8);\n  font-family: 'IosevkaTerm', monospace;\n}\n\n.props-value {\n  background: rgba(0, 0, 0, 0.3);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 4px;\n  padding: 8px;\n  overflow-x: auto;\n  font-size: 12px;\n}\n\n.component-actions {\n  margin-top: 8px;\n}\n\n.action-button {\n  background: rgba(255, 255, 255, 0.1);\n  border: 1px solid rgba(255, 255, 255, 0.15);\n  border-radius: 6px;\n  color: rgba(255, 255, 255, 0.9);\n  cursor: pointer;\n  padding: 6px 12px;\n  font-size: 13px;\n  transition: all 0.2s ease;\n}\n\n.action-button:hover {\n  background: rgba(255, 255, 255, 0.15);\n  border-color: rgba(255, 255, 255, 0.2);\n}\n\n.hook-item {\n  font-size: 12px;\n  color: rgba(255, 255, 255, 0.7);\n  margin-bottom: 4px;\n  font-family: 'IosevkaTerm', monospace;\n}\n`; ","/**\n * @license bippy\n *\n * Copyright (c) Aiden Bai\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n//#region src/rdt-hook.ts\nconst version = \"0.3.17\";\nconst BIPPY_INSTRUMENTATION_STRING = `bippy-${version}`;\nconst objectDefineProperty = Object.defineProperty;\nconst objectHasOwnProperty = Object.prototype.hasOwnProperty;\nconst NO_OP = () => {};\nconst checkDCE = (fn) => {\n\ttry {\n\t\tconst code = Function.prototype.toString.call(fn);\n\t\tif (code.indexOf(\"^_^\") > -1) setTimeout(() => {\n\t\t\tthrow new Error(\"React is running in production mode, but dead code elimination has not been applied. Read how to correctly configure React for production: https://reactjs.org/link/perf-use-production-build\");\n\t\t});\n\t} catch {}\n};\nconst isRealReactDevtools = (rdtHook = getRDTHook()) => {\n\treturn \"getFiberRoots\" in rdtHook;\n};\nlet isReactRefreshOverride = false;\nlet injectFnStr = void 0;\nconst isReactRefresh = (rdtHook = getRDTHook()) => {\n\tif (isReactRefreshOverride) return true;\n\tif (typeof rdtHook.inject === \"function\") injectFnStr = rdtHook.inject.toString();\n\treturn Boolean(injectFnStr?.includes(\"(injected)\"));\n};\nconst onActiveListeners = new Set();\nconst _renderers = new Set();\nconst installRDTHook = (onActive) => {\n\tconst renderers = new Map();\n\tlet i = 0;\n\tlet rdtHook = {\n\t\tcheckDCE,\n\t\tsupportsFiber: true,\n\t\tsupportsFlight: true,\n\t\thasUnsupportedRendererAttached: false,\n\t\trenderers,\n\t\tonCommitFiberRoot: NO_OP,\n\t\tonCommitFiberUnmount: NO_OP,\n\t\tonPostCommitFiberRoot: NO_OP,\n\t\tinject(renderer) {\n\t\t\tconst nextID = ++i;\n\t\t\trenderers.set(nextID, renderer);\n\t\t\t_renderers.add(renderer);\n\t\t\tif (!rdtHook._instrumentationIsActive) {\n\t\t\t\trdtHook._instrumentationIsActive = true;\n\t\t\t\tonActiveListeners.forEach((listener) => listener());\n\t\t\t}\n\t\t\treturn nextID;\n\t\t},\n\t\t_instrumentationSource: BIPPY_INSTRUMENTATION_STRING,\n\t\t_instrumentationIsActive: false\n\t};\n\ttry {\n\t\tobjectDefineProperty(globalThis, \"__REACT_DEVTOOLS_GLOBAL_HOOK__\", {\n\t\t\tget() {\n\t\t\t\treturn rdtHook;\n\t\t\t},\n\t\t\tset(newHook) {\n\t\t\t\tif (newHook && typeof newHook === \"object\") {\n\t\t\t\t\tconst ourRenderers = rdtHook.renderers;\n\t\t\t\t\trdtHook = newHook;\n\t\t\t\t\tif (ourRenderers.size > 0) {\n\t\t\t\t\t\tourRenderers.forEach((renderer, id) => {\n\t\t\t\t\t\t\t_renderers.add(renderer);\n\t\t\t\t\t\t\tnewHook.renderers.set(id, renderer);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tpatchRDTHook(onActive);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true\n\t\t});\n\t\tconst originalWindowHasOwnProperty = window.hasOwnProperty;\n\t\tlet hasRanHack = false;\n\t\tobjectDefineProperty(window, \"hasOwnProperty\", {\n\t\t\tvalue: function() {\n\t\t\t\ttry {\n\t\t\t\t\tif (!hasRanHack && arguments[0] === \"__REACT_DEVTOOLS_GLOBAL_HOOK__\") {\n\t\t\t\t\t\tglobalThis.__REACT_DEVTOOLS_GLOBAL_HOOK__ = void 0;\n\t\t\t\t\t\thasRanHack = true;\n\t\t\t\t\t\treturn -0;\n\t\t\t\t\t}\n\t\t\t\t} catch {}\n\t\t\t\treturn originalWindowHasOwnProperty.apply(this, arguments);\n\t\t\t},\n\t\t\tconfigurable: true,\n\t\t\twritable: true\n\t\t});\n\t} catch {\n\t\tpatchRDTHook(onActive);\n\t}\n\treturn rdtHook;\n};\nconst patchRDTHook = (onActive) => {\n\tif (onActive) onActiveListeners.add(onActive);\n\ttry {\n\t\tconst rdtHook = globalThis.__REACT_DEVTOOLS_GLOBAL_HOOK__;\n\t\tif (!rdtHook) return;\n\t\tif (!rdtHook._instrumentationSource) {\n\t\t\trdtHook.checkDCE = checkDCE;\n\t\t\trdtHook.supportsFiber = true;\n\t\t\trdtHook.supportsFlight = true;\n\t\t\trdtHook.hasUnsupportedRendererAttached = false;\n\t\t\trdtHook._instrumentationSource = BIPPY_INSTRUMENTATION_STRING;\n\t\t\trdtHook._instrumentationIsActive = false;\n\t\t\tif (rdtHook.renderers.size) {\n\t\t\t\trdtHook._instrumentationIsActive = true;\n\t\t\t\tonActiveListeners.forEach((listener) => listener());\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst prevInject = rdtHook.inject;\n\t\t\tif (isReactRefresh(rdtHook) && !isRealReactDevtools()) {\n\t\t\t\tisReactRefreshOverride = true;\n\t\t\t\tconst nextID = rdtHook.inject({ scheduleRefresh() {} });\n\t\t\t\tif (nextID) rdtHook._instrumentationIsActive = true;\n\t\t\t}\n\t\t\trdtHook.inject = (renderer) => {\n\t\t\t\tconst id = prevInject(renderer);\n\t\t\t\t_renderers.add(renderer);\n\t\t\t\trdtHook._instrumentationIsActive = true;\n\t\t\t\tonActiveListeners.forEach((listener) => listener());\n\t\t\t\treturn id;\n\t\t\t};\n\t\t}\n\t\tif (rdtHook.renderers.size || rdtHook._instrumentationIsActive || isReactRefresh()) onActive?.();\n\t} catch {}\n};\nconst hasRDTHook = () => {\n\treturn objectHasOwnProperty.call(globalThis, \"__REACT_DEVTOOLS_GLOBAL_HOOK__\");\n};\n/**\n* Returns the current React DevTools global hook.\n*/\nconst getRDTHook = (onActive) => {\n\tif (!hasRDTHook()) return installRDTHook(onActive);\n\tpatchRDTHook(onActive);\n\treturn globalThis.__REACT_DEVTOOLS_GLOBAL_HOOK__;\n};\nconst isClientEnvironment = () => {\n\treturn Boolean(typeof window !== \"undefined\" && (window.document?.createElement || window.navigator?.product === \"ReactNative\"));\n};\n/**\n* Usually used purely for side effect\n*/\nconst safelyInstallRDTHook = () => {\n\ttry {\n\t\tif (isClientEnvironment()) getRDTHook();\n\t} catch {}\n};\n\n//#endregion\nexport { BIPPY_INSTRUMENTATION_STRING as BIPPY_INSTRUMENTATION_STRING$1, _renderers as _renderers$1, getRDTHook as getRDTHook$1, hasRDTHook as hasRDTHook$1, installRDTHook as installRDTHook$1, isClientEnvironment as isClientEnvironment$1, isReactRefresh as isReactRefresh$1, isRealReactDevtools as isRealReactDevtools$1, patchRDTHook as patchRDTHook$1, safelyInstallRDTHook as safelyInstallRDTHook$1, version as version$1 };","/**\n * @license bippy\n *\n * Copyright (c) Aiden Bai\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport { BIPPY_INSTRUMENTATION_STRING$1 as BIPPY_INSTRUMENTATION_STRING, getRDTHook$1 as getRDTHook, hasRDTHook$1 as hasRDTHook, isReactRefresh$1 as isReactRefresh, isRealReactDevtools$1 as isRealReactDevtools } from \"./rdt-hook-D8LwQB-4.js\";\n\n//#region src/install-hook-script-string.ts\nconst INSTALL_HOOK_SCRIPT_STRING = \"(()=>{try{var t=()=>{};const n=new Map;let o=0;globalThis.__REACT_DEVTOOLS_GLOBAL_HOOK__={checkDCE:t,supportsFiber:!0,supportsFlight:!0,hasUnsupportedRendererAttached:!1,renderers:n,onCommitFiberRoot:t,onCommitFiberUnmount:t,onPostCommitFiberRoot:t,inject(t){var e=++o;return n.set(e,t),globalThis.__REACT_DEVTOOLS_GLOBAL_HOOK__._instrumentationIsActive=!0,e},_instrumentationIsActive:!1,_script:!0}}catch{}})()\";\n\n//#endregion\n//#region src/core.ts\nconst FunctionComponentTag = 0;\nconst ClassComponentTag = 1;\nconst HostRootTag = 3;\nconst HostComponentTag = 5;\nconst HostTextTag = 6;\nconst FragmentTag = 7;\nconst ContextConsumerTag = 9;\nconst ForwardRefTag = 11;\nconst SuspenseComponentTag = 13;\nconst MemoComponentTag = 14;\nconst SimpleMemoComponentTag = 15;\nconst DehydratedSuspenseComponentTag = 18;\nconst OffscreenComponentTag = 22;\nconst LegacyHiddenComponentTag = 23;\nconst HostHoistableTag = 26;\nconst HostSingletonTag = 27;\nconst CONCURRENT_MODE_NUMBER = 60111;\nconst ELEMENT_TYPE_SYMBOL_STRING = \"Symbol(react.element)\";\nconst TRANSITIONAL_ELEMENT_TYPE_SYMBOL_STRING = \"Symbol(react.transitional.element)\";\nconst CONCURRENT_MODE_SYMBOL_STRING = \"Symbol(react.concurrent_mode)\";\nconst DEPRECATED_ASYNC_MODE_SYMBOL_STRING = \"Symbol(react.async_mode)\";\nconst PerformedWork = 1;\nconst Placement = 2;\nconst Hydrating = 4096;\nconst Update = 4;\nconst Cloned = 8;\nconst ChildDeletion = 16;\nconst ContentReset = 32;\nconst Snapshot = 1024;\nconst Visibility = 8192;\nconst MutationMask = Placement | Update | ChildDeletion | ContentReset | Hydrating | Visibility | Snapshot;\n/**\n* Returns `true` if object is a React Element.\n*\n* @see https://react.dev/reference/react/isValidElement\n*/\nconst isValidElement = (element) => typeof element === \"object\" && element != null && \"$$typeof\" in element && [ELEMENT_TYPE_SYMBOL_STRING, TRANSITIONAL_ELEMENT_TYPE_SYMBOL_STRING].includes(String(element.$$typeof));\n/**\n* Returns `true` if object is a React Fiber.\n*/\nconst isValidFiber = (fiber) => typeof fiber === \"object\" && fiber != null && \"tag\" in fiber && \"stateNode\" in fiber && \"return\" in fiber && \"child\" in fiber && \"sibling\" in fiber && \"flags\" in fiber;\n/**\n* Returns `true` if fiber is a host fiber. Host fibers are DOM nodes in react-dom, `View` in react-native, etc.\n*\n* @see https://reactnative.dev/architecture/glossary#host-view-tree-and-host-view\n*/\nconst isHostFiber = (fiber) => {\n\tswitch (fiber.tag) {\n\t\tcase HostComponentTag:\n\t\tcase HostHoistableTag:\n\t\tcase HostSingletonTag: return true;\n\t\tdefault: return typeof fiber.type === \"string\";\n\t}\n};\n/**\n* Returns `true` if fiber is a composite fiber. Composite fibers are fibers that can render (like functional components, class components, etc.)\n*\n* @see https://reactnative.dev/architecture/glossary#react-composite-components\n*/\nconst isCompositeFiber = (fiber) => {\n\tswitch (fiber.tag) {\n\t\tcase FunctionComponentTag:\n\t\tcase ClassComponentTag:\n\t\tcase SimpleMemoComponentTag:\n\t\tcase MemoComponentTag:\n\t\tcase ForwardRefTag: return true;\n\t\tdefault: return false;\n\t}\n};\n/**\n* Traverses up or down a {@link Fiber}'s contexts, return `true` to stop and select the current and previous context value.\n*/\nconst traverseContexts = (fiber, selector) => {\n\ttry {\n\t\tconst nextDependencies = fiber.dependencies;\n\t\tconst prevDependencies = fiber.alternate?.dependencies;\n\t\tif (!nextDependencies || !prevDependencies) return false;\n\t\tif (typeof nextDependencies !== \"object\" || !(\"firstContext\" in nextDependencies) || typeof prevDependencies !== \"object\" || !(\"firstContext\" in prevDependencies)) return false;\n\t\tlet nextContext = nextDependencies.firstContext;\n\t\tlet prevContext = prevDependencies.firstContext;\n\t\twhile (nextContext && typeof nextContext === \"object\" && \"memoizedValue\" in nextContext || prevContext && typeof prevContext === \"object\" && \"memoizedValue\" in prevContext) {\n\t\t\tif (selector(nextContext, prevContext) === true) return true;\n\t\t\tnextContext = nextContext?.next;\n\t\t\tprevContext = prevContext?.next;\n\t\t}\n\t} catch {}\n\treturn false;\n};\n/**\n* Traverses up or down a {@link Fiber}'s states, return `true` to stop and select the current and previous state value. This stores both state values and effects.\n*/\nconst traverseState = (fiber, selector) => {\n\ttry {\n\t\tlet nextState = fiber.memoizedState;\n\t\tlet prevState = fiber.alternate?.memoizedState;\n\t\twhile (nextState || prevState) {\n\t\t\tif (selector(nextState, prevState) === true) return true;\n\t\t\tnextState = nextState?.next;\n\t\t\tprevState = prevState?.next;\n\t\t}\n\t} catch {}\n\treturn false;\n};\n/**\n* Traverses up or down a {@link Fiber}'s props, return `true` to stop and select the current and previous props value.\n*/\nconst traverseProps = (fiber, selector) => {\n\ttry {\n\t\tconst nextProps = fiber.memoizedProps;\n\t\tconst prevProps = fiber.alternate?.memoizedProps || {};\n\t\tconst allKeys = new Set([...Object.keys(prevProps), ...Object.keys(nextProps)]);\n\t\tfor (const propName of allKeys) {\n\t\t\tconst prevValue = prevProps?.[propName];\n\t\t\tconst nextValue = nextProps?.[propName];\n\t\t\tif (selector(propName, nextValue, prevValue) === true) return true;\n\t\t}\n\t} catch {}\n\treturn false;\n};\n/**\n* Returns `true` if the {@link Fiber} has rendered. Note that this does not mean the fiber has rendered in the current commit, just that it has rendered in the past.\n*/\nconst didFiberRender = (fiber) => {\n\tconst nextProps = fiber.memoizedProps;\n\tconst prevProps = fiber.alternate?.memoizedProps || {};\n\tconst flags = fiber.flags ?? fiber.effectTag ?? 0;\n\tswitch (fiber.tag) {\n\t\tcase ClassComponentTag:\n\t\tcase FunctionComponentTag:\n\t\tcase ContextConsumerTag:\n\t\tcase ForwardRefTag:\n\t\tcase MemoComponentTag:\n\t\tcase SimpleMemoComponentTag: return (flags & PerformedWork) === PerformedWork;\n\t\tdefault:\n\t\t\tif (!fiber.alternate) return true;\n\t\t\treturn prevProps !== nextProps || fiber.alternate.memoizedState !== fiber.memoizedState || fiber.alternate.ref !== fiber.ref;\n\t}\n};\n/**\n* Returns `true` if the {@link Fiber} has committed. Note that this does not mean the fiber has committed in the current commit, just that it has committed in the past.\n*/\nconst didFiberCommit = (fiber) => {\n\treturn Boolean((fiber.flags & (MutationMask | Cloned)) !== 0 || (fiber.subtreeFlags & (MutationMask | Cloned)) !== 0);\n};\n/**\n* Returns all host {@link Fiber}s that have committed and rendered.\n*/\nconst getMutatedHostFibers = (fiber) => {\n\tconst mutations = [];\n\tconst stack = [fiber];\n\twhile (stack.length) {\n\t\tconst node = stack.pop();\n\t\tif (!node) continue;\n\t\tif (isHostFiber(node) && didFiberCommit(node) && didFiberRender(node)) mutations.push(node);\n\t\tif (node.child) stack.push(node.child);\n\t\tif (node.sibling) stack.push(node.sibling);\n\t}\n\treturn mutations;\n};\n/**\n* Returns the stack of {@link Fiber}s from the current fiber to the root fiber.\n*\n* @example\n* ```ts\n* [fiber, fiber.return, fiber.return.return, ...]\n* ```\n*/\nconst getFiberStack = (fiber) => {\n\tconst stack = [];\n\tlet currentFiber = fiber;\n\twhile (currentFiber.return) {\n\t\tstack.push(currentFiber);\n\t\tcurrentFiber = currentFiber.return;\n\t}\n\treturn stack;\n};\n/**\n* Returns `true` if the {@link Fiber} should be filtered out during reconciliation.\n*/\nconst shouldFilterFiber = (fiber) => {\n\tswitch (fiber.tag) {\n\t\tcase DehydratedSuspenseComponentTag: return true;\n\t\tcase HostTextTag:\n\t\tcase FragmentTag:\n\t\tcase LegacyHiddenComponentTag:\n\t\tcase OffscreenComponentTag: return true;\n\t\tcase HostRootTag: return false;\n\t\tdefault: {\n\t\t\tconst symbolOrNumber = typeof fiber.type === \"object\" && fiber.type !== null ? fiber.type.$$typeof : fiber.type;\n\t\t\tconst typeSymbol = typeof symbolOrNumber === \"symbol\" ? symbolOrNumber.toString() : symbolOrNumber;\n\t\t\tswitch (typeSymbol) {\n\t\t\t\tcase CONCURRENT_MODE_NUMBER:\n\t\t\t\tcase CONCURRENT_MODE_SYMBOL_STRING:\n\t\t\t\tcase DEPRECATED_ASYNC_MODE_SYMBOL_STRING: return true;\n\t\t\t\tdefault: return false;\n\t\t\t}\n\t\t}\n\t}\n};\n/**\n* Returns the nearest host {@link Fiber} to the current {@link Fiber}.\n*/\nconst getNearestHostFiber = (fiber, ascending = false) => {\n\tlet hostFiber = traverseFiber(fiber, isHostFiber, ascending);\n\tif (!hostFiber) hostFiber = traverseFiber(fiber, isHostFiber, !ascending);\n\treturn hostFiber;\n};\n/**\n* Returns all host {@link Fiber}s in the tree that are associated with the current {@link Fiber}.\n*/\nconst getNearestHostFibers = (fiber) => {\n\tconst hostFibers = [];\n\tconst stack = [];\n\tif (isHostFiber(fiber)) hostFibers.push(fiber);\n\telse if (fiber.child) stack.push(fiber.child);\n\twhile (stack.length) {\n\t\tconst currentNode = stack.pop();\n\t\tif (!currentNode) break;\n\t\tif (isHostFiber(currentNode)) hostFibers.push(currentNode);\n\t\telse if (currentNode.child) stack.push(currentNode.child);\n\t\tif (currentNode.sibling) stack.push(currentNode.sibling);\n\t}\n\treturn hostFibers;\n};\n/**\n* Traverses up or down a {@link Fiber}, return `true` to stop and select a node.\n*/\nconst traverseFiber = (fiber, selector, ascending = false) => {\n\tif (!fiber) return null;\n\tif (selector(fiber) === true) return fiber;\n\tlet child = ascending ? fiber.return : fiber.child;\n\twhile (child) {\n\t\tconst match = traverseFiber(child, selector, ascending);\n\t\tif (match) return match;\n\t\tchild = ascending ? null : child.sibling;\n\t}\n\treturn null;\n};\n/**\n* Returns the timings of the {@link Fiber}.\n*\n* @example\n* ```ts\n* const { selfTime, totalTime } = getTimings(fiber);\n* console.log(selfTime, totalTime);\n* ```\n*/\nconst getTimings = (fiber) => {\n\tconst totalTime = fiber?.actualDuration ?? 0;\n\tlet selfTime = totalTime;\n\tlet child = fiber?.child ?? null;\n\twhile (totalTime > 0 && child != null) {\n\t\tselfTime -= child.actualDuration ?? 0;\n\t\tchild = child.sibling;\n\t}\n\treturn {\n\t\tselfTime,\n\t\ttotalTime\n\t};\n};\n/**\n* Returns `true` if the {@link Fiber} uses React Compiler's memo cache.\n*/\nconst hasMemoCache = (fiber) => {\n\treturn Boolean(fiber.updateQueue?.memoCache);\n};\n/**\n* Returns the type (e.g. component definition) of the {@link Fiber}\n*/\nconst getType = (type) => {\n\tconst currentType = type;\n\tif (typeof currentType === \"function\") return currentType;\n\tif (typeof currentType === \"object\" && currentType) return getType(currentType.type || currentType.render);\n\treturn null;\n};\n/**\n* Returns the display name of the {@link Fiber} type.\n*/\nconst getDisplayName = (type) => {\n\tconst currentType = type;\n\tif (typeof currentType === \"string\") return currentType;\n\tif (typeof currentType !== \"function\" && !(typeof currentType === \"object\" && currentType)) return null;\n\tconst name = currentType.displayName || currentType.name || null;\n\tif (name) return name;\n\tconst unwrappedType = getType(currentType);\n\tif (!unwrappedType) return null;\n\treturn unwrappedType.displayName || unwrappedType.name || null;\n};\n/**\n* Returns the build type of the React renderer.\n*/\nconst detectReactBuildType = (renderer) => {\n\ttry {\n\t\tif (typeof renderer.version === \"string\" && renderer.bundleType > 0) return \"development\";\n\t} catch {}\n\treturn \"production\";\n};\n/**\n* Returns `true` if bippy's instrumentation is active.\n*/\nconst isInstrumentationActive = () => {\n\tconst rdtHook = getRDTHook();\n\treturn Boolean(rdtHook._instrumentationIsActive) || isRealReactDevtools() || isReactRefresh();\n};\n/**\n* Returns the latest fiber (since it may be double-buffered).\n*/\nconst getLatestFiber = (fiber) => {\n\tconst alternate = fiber.alternate;\n\tif (!alternate) return fiber;\n\tif (alternate.actualStartTime && fiber.actualStartTime) return alternate.actualStartTime > fiber.actualStartTime ? alternate : fiber;\n\tfor (const root of _fiberRoots) {\n\t\tconst latestFiber = traverseFiber(root.current, (innerFiber) => {\n\t\t\tif (innerFiber === fiber) return true;\n\t\t});\n\t\tif (latestFiber) return latestFiber;\n\t}\n\treturn fiber;\n};\nlet fiberId = 0;\nconst fiberIdMap = new WeakMap();\nconst setFiberId = (fiber, id = fiberId++) => {\n\tfiberIdMap.set(fiber, id);\n};\nconst getFiberId = (fiber) => {\n\tlet id = fiberIdMap.get(fiber);\n\tif (!id && fiber.alternate) id = fiberIdMap.get(fiber.alternate);\n\tif (!id) {\n\t\tid = fiberId++;\n\t\tsetFiberId(fiber, id);\n\t}\n\treturn id;\n};\nconst mountFiberRecursively = (onRender, firstChild, traverseSiblings) => {\n\tlet fiber = firstChild;\n\twhile (fiber != null) {\n\t\tif (!fiberIdMap.has(fiber)) getFiberId(fiber);\n\t\tconst shouldIncludeInTree = !shouldFilterFiber(fiber);\n\t\tif (shouldIncludeInTree && didFiberRender(fiber)) onRender(fiber, \"mount\");\n\t\tif (fiber.tag === SuspenseComponentTag) {\n\t\t\tconst isTimedOut = fiber.memoizedState !== null;\n\t\t\tif (isTimedOut) {\n\t\t\t\tconst primaryChildFragment = fiber.child;\n\t\t\t\tconst fallbackChildFragment = primaryChildFragment ? primaryChildFragment.sibling : null;\n\t\t\t\tif (fallbackChildFragment) {\n\t\t\t\t\tconst fallbackChild = fallbackChildFragment.child;\n\t\t\t\t\tif (fallbackChild !== null) mountFiberRecursively(onRender, fallbackChild, false);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlet primaryChild = null;\n\t\t\t\tconst areSuspenseChildrenConditionallyWrapped = OffscreenComponentTag === -1;\n\t\t\t\tif (areSuspenseChildrenConditionallyWrapped) primaryChild = fiber.child;\n\t\t\t\telse if (fiber.child !== null) primaryChild = fiber.child.child;\n\t\t\t\tif (primaryChild !== null) mountFiberRecursively(onRender, primaryChild, false);\n\t\t\t}\n\t\t} else if (fiber.child != null) mountFiberRecursively(onRender, fiber.child, true);\n\t\tfiber = traverseSiblings ? fiber.sibling : null;\n\t}\n};\nconst updateFiberRecursively = (onRender, nextFiber, prevFiber, parentFiber) => {\n\tif (!fiberIdMap.has(nextFiber)) getFiberId(nextFiber);\n\tif (!prevFiber) return;\n\tif (!fiberIdMap.has(prevFiber)) getFiberId(prevFiber);\n\tconst isSuspense = nextFiber.tag === SuspenseComponentTag;\n\tconst shouldIncludeInTree = !shouldFilterFiber(nextFiber);\n\tif (shouldIncludeInTree && didFiberRender(nextFiber)) onRender(nextFiber, \"update\");\n\tconst prevDidTimeout = isSuspense && prevFiber.memoizedState !== null;\n\tconst nextDidTimeOut = isSuspense && nextFiber.memoizedState !== null;\n\tif (prevDidTimeout && nextDidTimeOut) {\n\t\tconst nextFallbackChildSet = nextFiber.child?.sibling ?? null;\n\t\tconst prevFallbackChildSet = prevFiber.child?.sibling ?? null;\n\t\tif (nextFallbackChildSet !== null && prevFallbackChildSet !== null) updateFiberRecursively(onRender, nextFallbackChildSet, prevFallbackChildSet, nextFiber);\n\t} else if (prevDidTimeout && !nextDidTimeOut) {\n\t\tconst nextPrimaryChildSet = nextFiber.child;\n\t\tif (nextPrimaryChildSet !== null) mountFiberRecursively(onRender, nextPrimaryChildSet, true);\n\t} else if (!prevDidTimeout && nextDidTimeOut) {\n\t\tunmountFiberChildrenRecursively(onRender, prevFiber);\n\t\tconst nextFallbackChildSet = nextFiber.child?.sibling ?? null;\n\t\tif (nextFallbackChildSet !== null) mountFiberRecursively(onRender, nextFallbackChildSet, true);\n\t} else if (nextFiber.child !== prevFiber.child) {\n\t\tlet nextChild = nextFiber.child;\n\t\twhile (nextChild) {\n\t\t\tif (nextChild.alternate) {\n\t\t\t\tconst prevChild = nextChild.alternate;\n\t\t\t\tupdateFiberRecursively(onRender, nextChild, prevChild, shouldIncludeInTree ? nextFiber : parentFiber);\n\t\t\t} else mountFiberRecursively(onRender, nextChild, false);\n\t\t\tnextChild = nextChild.sibling;\n\t\t}\n\t}\n};\nconst unmountFiber = (onRender, fiber) => {\n\tconst isRoot = fiber.tag === HostRootTag;\n\tif (isRoot || !shouldFilterFiber(fiber)) onRender(fiber, \"unmount\");\n};\nconst unmountFiberChildrenRecursively = (onRender, fiber) => {\n\tconst isTimedOutSuspense = fiber.tag === SuspenseComponentTag && fiber.memoizedState !== null;\n\tlet child = fiber.child;\n\tif (isTimedOutSuspense) {\n\t\tconst primaryChildFragment = fiber.child;\n\t\tconst fallbackChildFragment = primaryChildFragment?.sibling ?? null;\n\t\tchild = fallbackChildFragment?.child ?? null;\n\t}\n\twhile (child !== null) {\n\t\tif (child.return !== null) {\n\t\t\tunmountFiber(onRender, child);\n\t\t\tunmountFiberChildrenRecursively(onRender, child);\n\t\t}\n\t\tchild = child.sibling;\n\t}\n};\nlet commitId = 0;\nconst rootInstanceMap = new WeakMap();\n/**\n* Creates a fiber visitor function. Must pass a fiber root and a render handler.\n* @example\n* traverseRenderedFibers(root, (fiber, phase) => {\n*   console.log(phase)\n* })\n*/\nconst traverseRenderedFibers = (root, onRender) => {\n\tconst fiber = \"current\" in root ? root.current : root;\n\tlet rootInstance = rootInstanceMap.get(root);\n\tif (!rootInstance) {\n\t\trootInstance = {\n\t\t\tprevFiber: null,\n\t\t\tid: commitId++\n\t\t};\n\t\trootInstanceMap.set(root, rootInstance);\n\t}\n\tconst { prevFiber } = rootInstance;\n\tif (!fiber) unmountFiber(onRender, fiber);\n\telse if (prevFiber !== null) {\n\t\tconst wasMounted = prevFiber && prevFiber.memoizedState != null && prevFiber.memoizedState.element != null && prevFiber.memoizedState.isDehydrated !== true;\n\t\tconst isMounted = fiber.memoizedState != null && fiber.memoizedState.element != null && fiber.memoizedState.isDehydrated !== true;\n\t\tif (!wasMounted && isMounted) mountFiberRecursively(onRender, fiber, false);\n\t\telse if (wasMounted && isMounted) updateFiberRecursively(onRender, fiber, fiber.alternate, null);\n\t\telse if (wasMounted && !isMounted) unmountFiber(onRender, fiber);\n\t} else mountFiberRecursively(onRender, fiber, true);\n\trootInstance.prevFiber = fiber;\n};\n/**\n* @deprecated use `traverseRenderedFibers` instead\n*/\nconst createFiberVisitor = ({ onRender }) => {\n\treturn (_rendererID, root, _state) => {\n\t\ttraverseRenderedFibers(root, onRender);\n\t};\n};\n/**\n* Instruments the DevTools hook.\n* @example\n* const hook = instrument({\n*   onActive() {\n*     console.log('initialized');\n*   },\n*   onCommitFiberRoot(rendererID, root) {\n*     console.log('fiberRoot', root.current)\n*   },\n* });\n*/\nconst instrument = (options) => {\n\treturn getRDTHook(() => {\n\t\tconst rdtHook = getRDTHook();\n\t\toptions.onActive?.();\n\t\trdtHook._instrumentationSource = options.name ?? BIPPY_INSTRUMENTATION_STRING;\n\t\tconst prevOnCommitFiberRoot = rdtHook.onCommitFiberRoot;\n\t\tif (options.onCommitFiberRoot) rdtHook.onCommitFiberRoot = (rendererID, root, priority) => {\n\t\t\tif (prevOnCommitFiberRoot) prevOnCommitFiberRoot(rendererID, root, priority);\n\t\t\toptions.onCommitFiberRoot?.(rendererID, root, priority);\n\t\t};\n\t\tconst prevOnCommitFiberUnmount = rdtHook.onCommitFiberUnmount;\n\t\tif (options.onCommitFiberUnmount) rdtHook.onCommitFiberUnmount = (rendererID, root) => {\n\t\t\tif (prevOnCommitFiberUnmount) prevOnCommitFiberUnmount(rendererID, root);\n\t\t\toptions.onCommitFiberUnmount?.(rendererID, root);\n\t\t};\n\t\tconst prevOnPostCommitFiberRoot = rdtHook.onPostCommitFiberRoot;\n\t\tif (options.onPostCommitFiberRoot) rdtHook.onPostCommitFiberRoot = (rendererID, root) => {\n\t\t\tif (prevOnPostCommitFiberRoot) prevOnPostCommitFiberRoot(rendererID, root);\n\t\t\toptions.onPostCommitFiberRoot?.(rendererID, root);\n\t\t};\n\t});\n};\nconst getFiberFromHostInstance = (hostInstance) => {\n\tconst rdtHook = getRDTHook();\n\tfor (const renderer of rdtHook.renderers.values()) try {\n\t\tconst fiber = renderer.findFiberByHostInstance?.(hostInstance);\n\t\tif (fiber) return fiber;\n\t} catch {}\n\tif (typeof hostInstance === \"object\" && hostInstance != null) {\n\t\tif (\"_reactRootContainer\" in hostInstance) return hostInstance._reactRootContainer?._internalRoot?.current?.child;\n\t\tfor (const key in hostInstance) if (key.startsWith(\"__reactInternalInstance$\") || key.startsWith(\"__reactFiber\")) return hostInstance[key] || null;\n\t}\n\treturn null;\n};\nconst INSTALL_ERROR = new Error();\nconst _fiberRoots = new Set();\nconst secure = (options, secureOptions = {}) => {\n\tconst onActive = options.onActive;\n\tconst isRDTHookInstalled = hasRDTHook();\n\tconst isUsingRealReactDevtools = isRealReactDevtools();\n\tconst isUsingReactRefresh = isReactRefresh();\n\tlet timeout;\n\tlet isProduction = secureOptions.isProduction ?? false;\n\toptions.onActive = () => {\n\t\tclearTimeout(timeout);\n\t\tlet isSecure = true;\n\t\ttry {\n\t\t\tconst rdtHook = getRDTHook();\n\t\t\tfor (const renderer of rdtHook.renderers.values()) {\n\t\t\t\tconst [majorVersion] = renderer.version.split(\".\");\n\t\t\t\tif (Number(majorVersion) < (secureOptions.minReactMajorVersion ?? 17)) isSecure = false;\n\t\t\t\tconst buildType = detectReactBuildType(renderer);\n\t\t\t\tif (buildType !== \"development\") {\n\t\t\t\t\tisProduction = true;\n\t\t\t\t\tif (!secureOptions.dangerouslyRunInProduction) isSecure = false;\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tsecureOptions.onError?.(err);\n\t\t}\n\t\tif (!isSecure) {\n\t\t\toptions.onCommitFiberRoot = void 0;\n\t\t\toptions.onCommitFiberUnmount = void 0;\n\t\t\toptions.onPostCommitFiberRoot = void 0;\n\t\t\toptions.onActive = void 0;\n\t\t\treturn;\n\t\t}\n\t\tonActive?.();\n\t\ttry {\n\t\t\tconst onCommitFiberRoot$1 = options.onCommitFiberRoot;\n\t\t\tif (onCommitFiberRoot$1) options.onCommitFiberRoot = (rendererID, root, priority) => {\n\t\t\t\tif (!_fiberRoots.has(root)) _fiberRoots.add(root);\n\t\t\t\ttry {\n\t\t\t\t\tonCommitFiberRoot$1(rendererID, root, priority);\n\t\t\t\t} catch (err) {\n\t\t\t\t\tsecureOptions.onError?.(err);\n\t\t\t\t}\n\t\t\t};\n\t\t\tconst onCommitFiberUnmount = options.onCommitFiberUnmount;\n\t\t\tif (onCommitFiberUnmount) options.onCommitFiberUnmount = (rendererID, root) => {\n\t\t\t\ttry {\n\t\t\t\t\tonCommitFiberUnmount(rendererID, root);\n\t\t\t\t} catch (err) {\n\t\t\t\t\tsecureOptions.onError?.(err);\n\t\t\t\t}\n\t\t\t};\n\t\t\tconst onPostCommitFiberRoot = options.onPostCommitFiberRoot;\n\t\t\tif (onPostCommitFiberRoot) options.onPostCommitFiberRoot = (rendererID, root) => {\n\t\t\t\ttry {\n\t\t\t\t\tonPostCommitFiberRoot(rendererID, root);\n\t\t\t\t} catch (err) {\n\t\t\t\t\tsecureOptions.onError?.(err);\n\t\t\t\t}\n\t\t\t};\n\t\t} catch (err) {\n\t\t\tsecureOptions.onError?.(err);\n\t\t}\n\t};\n\tif (!isRDTHookInstalled && !isUsingRealReactDevtools && !isUsingReactRefresh) timeout = setTimeout(() => {\n\t\tif (!isProduction) secureOptions.onError?.(INSTALL_ERROR);\n\t\tstop();\n\t}, secureOptions.installCheckTimeout ?? 100);\n\treturn options;\n};\n/**\n* a wrapper around the {@link instrument} function that sets the `onCommitFiberRoot` hook.\n*\n* @example\n* onCommitFiberRoot((root) => {\n*   console.log(root.current);\n* });\n*/\nconst onCommitFiberRoot = (handler) => {\n\treturn instrument(secure({ onCommitFiberRoot: (_, root) => {\n\t\thandler(root);\n\t} }));\n};\n\n//#endregion\nexport { CONCURRENT_MODE_NUMBER, CONCURRENT_MODE_SYMBOL_STRING, ClassComponentTag, ContextConsumerTag, DEPRECATED_ASYNC_MODE_SYMBOL_STRING, DehydratedSuspenseComponentTag, ELEMENT_TYPE_SYMBOL_STRING, ForwardRefTag, FragmentTag, FunctionComponentTag, HostComponentTag, HostHoistableTag, HostRootTag, HostSingletonTag, HostTextTag, INSTALL_ERROR, INSTALL_HOOK_SCRIPT_STRING, LegacyHiddenComponentTag, MemoComponentTag, OffscreenComponentTag, SimpleMemoComponentTag, SuspenseComponentTag, TRANSITIONAL_ELEMENT_TYPE_SYMBOL_STRING, _fiberRoots, createFiberVisitor, detectReactBuildType, didFiberCommit, didFiberRender, fiberIdMap, getDisplayName, getFiberFromHostInstance, getFiberId, getFiberStack, getLatestFiber, getMutatedHostFibers, getNearestHostFiber, getNearestHostFibers, getTimings, getType, hasMemoCache, instrument, isCompositeFiber, isHostFiber, isInstrumentationActive, isValidElement, isValidFiber, mountFiberRecursively, onCommitFiberRoot, secure, setFiberId, shouldFilterFiber, traverseContexts, traverseFiber, traverseProps, traverseRenderedFibers, traverseState, unmountFiber, unmountFiberChildrenRecursively, updateFiberRecursively };","/**\n * @license bippy\n *\n * Copyright (c) Aiden Bai\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport { safelyInstallRDTHook$1 as safelyInstallRDTHook } from \"./rdt-hook-D8LwQB-4.js\";\n\n//#region src/index.ts\nsafelyInstallRDTHook();\n\n//#endregion","import { \n  instrument,\n  onCommitFiberRoot,\n  traverseFiber,\n  isHostFiber,\n  getNearestHostFiber,\n  traverseRenderedFibers,\n  secure,\n  type Fiber \n} from 'bippy';\n\nexport interface SourceLocation {\n  fileName?: string;\n  lineNumber?: number;\n  columnNumber?: number;\n}\n\nexport interface ComponentInfo {\n  id: string;\n  name: string;\n  props: any;\n  state: any;\n  hooks: any[];\n  parent?: ComponentInfo;\n  children: ComponentInfo[];\n  domElement?: HTMLElement;\n  sourceLocation?: SourceLocation;\n  fiberType: string;\n  isComponent: boolean;\n  depth: number;\n}\n\nexport type ComponentSelectionCallback = (component: ComponentInfo) => void;\n\nexport class ComponentInspector {\n  private fiberMap = new WeakMap<HTMLElement, Fiber>();\n  private componentMap = new Map<string, ComponentInfo>();\n  private selectionCallback?: ComponentSelectionCallback;\n  private isInstrumented = false;\n  private componentCounter = 0;\n  \n  constructor() {\n    this.setupInstrumentation();\n  }\n  \n  private setupInstrumentation() {\n    if (this.isInstrumented) return;\n    \n    try {\n      // Use bippy's secure wrapper to prevent crashes\n      const handlers = secure({\n        onCommitFiberRoot: (rendererID: any, root: any) => {\n          this.processFiberRoot(root);\n        },\n      });\n      \n      // Instrument with the secure handlers\n      instrument(handlers);\n      \n      this.isInstrumented = true;\n      console.log('[ReactLLM] Component instrumentation initialized with bippy');\n    } catch (error) {\n      console.error('[ReactLLM] Failed to setup instrumentation:', error);\n    }\n  }\n  \n  private processFiberRoot(root: any) {\n    try {\n      // Use bippy's traverseRenderedFibers to only process fibers that have actually rendered\n      traverseRenderedFibers(root, (fiber: Fiber) => {\n        this.processFiber(fiber);\n      });\n    } catch (error) {\n      console.error('[ReactLLM] Error processing fiber root:', error);\n    }\n  }\n  \n  private processFiber(fiber: Fiber) {\n    try {\n      // Skip if this fiber doesn't represent a component or DOM element\n      if (!this.isRelevantFiber(fiber)) return;\n      \n      const info = this.extractComponentInfo(fiber);\n      \n      // Map DOM elements to fibers for click detection\n      if (info.domElement) {\n        this.fiberMap.set(info.domElement, fiber);\n        info.domElement.dataset.reactLlmId = info.id;\n      }\n      \n      this.componentMap.set(info.id, info);\n    } catch (error) {\n      console.error('[ReactLLM] Error processing fiber:', error);\n    }\n  }\n  \n  private isRelevantFiber(fiber: Fiber): boolean {\n    // Include function components, class components, and host components (DOM elements)\n    return fiber.type !== null || \n           fiber.elementType !== null || \n           typeof fiber.type === 'string' || // Host components (div, span, etc.)\n           typeof fiber.type === 'function'; // Function/class components\n  }\n  \n  private extractComponentInfo(fiber: Fiber): ComponentInfo {\n    const id = this.getFiberId(fiber);\n    const name = this.getDisplayName(fiber);\n    const isComponent = this.isComponentFiber(fiber);\n    \n    return {\n      id,\n      name,\n      props: fiber.memoizedProps || {},\n      state: fiber.memoizedState || null,\n      hooks: this.extractHooks(fiber),\n      parent: this.getParentComponent(fiber),\n      children: this.getChildComponents(fiber),\n      domElement: this.getDOMElement(fiber),\n      sourceLocation: this.getSourceLocation(fiber),\n      fiberType: this.getFiberType(fiber),\n      isComponent,\n      depth: this.getFiberDepth(fiber)\n    };\n  }\n  \n  private getFiberId(fiber: Fiber): string {\n    // Create a unique ID based on fiber properties\n    const key = fiber.key || '';\n    const index = fiber.index || 0;\n    const type = this.getDisplayName(fiber);\n    return `${type}-${key}-${index}-${++this.componentCounter}`;\n  }\n  \n  private getDisplayName(fiber: Fiber): string {\n    if (typeof fiber.type === 'string') {\n      return fiber.type; // Host component like 'div', 'span'\n    }\n    \n    if (typeof fiber.type === 'function') {\n      return fiber.type.displayName || fiber.type.name || 'Anonymous';\n    }\n    \n    if (fiber.elementType && typeof fiber.elementType === 'function') {\n      return fiber.elementType.displayName || fiber.elementType.name || 'Anonymous';\n    }\n    \n    // Handle different fiber types based on React fiber tags\n    switch (fiber.tag) {\n      case 0: return 'FunctionComponent';\n      case 1: return 'ClassComponent';\n      case 3: return 'HostRoot';\n      case 5: return 'HostComponent';\n      case 6: return 'HostText';\n      case 7: return 'Fragment';\n      case 8: return 'Mode';\n      case 9: return 'ContextConsumer';\n      case 10: return 'ContextProvider';\n      case 11: return 'ForwardRef';\n      case 12: return 'Profiler';\n      case 13: return 'SuspenseComponent';\n      case 14: return 'MemoComponent';\n      case 15: return 'SimpleMemoComponent';\n      case 16: return 'LazyComponent';\n      default: return `Unknown(${fiber.tag})`;\n    }\n  }\n  \n  private isComponentFiber(fiber: Fiber): boolean {\n    // Function components, class components, memo components, etc.\n    return fiber.tag === 0 || fiber.tag === 1 || fiber.tag === 14 || fiber.tag === 15;\n  }\n  \n  private getFiberType(fiber: Fiber): string {\n    const tagMap: Record<number, string> = {\n      0: 'FunctionComponent',\n      1: 'ClassComponent',\n      3: 'HostRoot',\n      5: 'HostComponent',\n      6: 'HostText',\n      7: 'Fragment',\n      8: 'Mode',\n      9: 'ContextConsumer',\n      10: 'ContextProvider',\n      11: 'ForwardRef',\n      12: 'Profiler',\n      13: 'SuspenseComponent',\n      14: 'MemoComponent',\n      15: 'SimpleMemoComponent',\n      16: 'LazyComponent'\n    };\n    \n    return tagMap[fiber.tag] || `Unknown(${fiber.tag})`;\n  }\n  \n  private extractHooks(fiber: Fiber): any[] {\n    const hooks: any[] = [];\n    \n    try {\n      let hook = fiber.memoizedState;\n      while (hook) {\n        hooks.push({\n          memoizedState: hook.memoizedState,\n          baseState: hook.baseState,\n          next: !!hook.next\n        });\n        hook = hook.next;\n      }\n    } catch (error) {\n      // Hooks extraction failed, return empty array\n    }\n    \n    return hooks;\n  }\n  \n  private getParentComponent(fiber: Fiber): ComponentInfo | undefined {\n    let parent = fiber.return;\n    while (parent) {\n      if (this.isComponentFiber(parent)) {\n        const parentId = this.getFiberId(parent);\n        return this.componentMap.get(parentId);\n      }\n      parent = parent.return;\n    }\n    return undefined;\n  }\n  \n  private getChildComponents(fiber: Fiber): ComponentInfo[] {\n    const children: ComponentInfo[] = [];\n    let child = fiber.child;\n    \n    while (child) {\n      if (this.isComponentFiber(child)) {\n        const childId = this.getFiberId(child);\n        const childInfo = this.componentMap.get(childId);\n        if (childInfo) {\n          children.push(childInfo);\n        }\n      }\n      child = child.sibling;\n    }\n    \n    return children;\n  }\n  \n  private getDOMElement(fiber: Fiber): HTMLElement | undefined {\n    // For host components, the stateNode is the DOM element\n    if (fiber.tag === 5 && fiber.stateNode instanceof HTMLElement) {\n      return fiber.stateNode;\n    }\n    \n    // For components, use bippy's getNearestHostFiber\n    try {\n      const hostFiber = getNearestHostFiber(fiber);\n      if (hostFiber && hostFiber.stateNode instanceof HTMLElement) {\n        return hostFiber.stateNode;\n      }\n    } catch (error) {\n      // Fall back to manual search\n      let current = fiber.child;\n      while (current) {\n        if (current.tag === 5 && current.stateNode instanceof HTMLElement) {\n          return current.stateNode;\n        }\n        current = current.child;\n      }\n    }\n    \n    return undefined;\n  }\n  \n  private getSourceLocation(fiber: Fiber): SourceLocation | undefined {\n    // Try to extract source location from fiber's debug info\n    if (fiber._debugSource) {\n      return {\n        fileName: fiber._debugSource.fileName,\n        lineNumber: fiber._debugSource.lineNumber,\n        columnNumber: fiber._debugSource.columnNumber\n      };\n    }\n    \n    return undefined;\n  }\n  \n  private getFiberDepth(fiber: Fiber): number {\n    let depth = 0;\n    let parent = fiber.return;\n    while (parent) {\n      depth++;\n      parent = parent.return;\n    }\n    return depth;\n  }\n  \n  getComponentAtPoint(x: number, y: number): ComponentInfo | null {\n    const element = document.elementFromPoint(x, y) as HTMLElement;\n    if (!element) return null;\n    \n    // Walk up DOM tree to find React component\n    let current: HTMLElement | null = element;\n    while (current) {\n      const fiber = this.fiberMap.get(current);\n      if (fiber) {\n        const id = this.getFiberId(fiber);\n        const component = this.componentMap.get(id);\n        if (component && component.isComponent) {\n          return component;\n        }\n      }\n      current = current.parentElement;\n    }\n    \n    return null;\n  }\n  \n  getComponentById(id: string): ComponentInfo | null {\n    return this.componentMap.get(id) || null;\n  }\n  \n  getAllComponents(): ComponentInfo[] {\n    return Array.from(this.componentMap.values())\n      .filter(comp => comp.isComponent)\n      .sort((a, b) => a.depth - b.depth);\n  }\n  \n  getComponentTree(): ComponentInfo[] {\n    const components = this.getAllComponents();\n    return components.filter(comp => !comp.parent);\n  }\n  \n  selectComponent(component: ComponentInfo) {\n    if (this.selectionCallback) {\n      this.selectionCallback(component);\n    }\n  }\n  \n  onSelection(callback: ComponentSelectionCallback) {\n    this.selectionCallback = callback;\n  }\n  \n  highlightComponent(component: ComponentInfo) {\n    if (component.domElement) {\n      component.domElement.style.outline = '2px solid #007acc';\n      component.domElement.style.outlineOffset = '2px';\n    }\n  }\n  \n  unhighlightComponent(component: ComponentInfo) {\n    if (component.domElement) {\n      component.domElement.style.outline = '';\n      component.domElement.style.outlineOffset = '';\n    }\n  }\n  \n  isInstrumentationReady(): boolean {\n    return this.isInstrumented;\n  }\n}","/** @jsx h */\nimport { h } from 'preact';\nimport { useSignal, effect } from '@preact/signals';\nimport { ComponentInspector as BippyInspector, type ComponentInfo } from '../instrumentation/bippy-adapter';\n\ninterface Props {\n  isActive: boolean;\n  onSelect: (component: ComponentInfo) => void;\n}\n\nexport function ComponentInspector({ isActive, onSelect }: Props) {\n  const canvas = useSignal<HTMLCanvasElement | null>(null);\n  const hoveredComponent = useSignal<ComponentInfo | null>(null);\n  const animationFrame = useSignal<number | null>(null);\n  const inspector = useSignal<BippyInspector | null>(null);\n  \n  effect(() => {\n    // Initialize bippy inspector\n    if (!inspector.value) {\n      inspector.value = new BippyInspector();\n      inspector.value.onSelection(onSelect);\n    }\n    \n    if (!isActive) {\n      if (canvas.value) {\n        canvas.value.style.display = 'none';\n      }\n      if (animationFrame.value) {\n        cancelAnimationFrame(animationFrame.value);\n      }\n      return;\n    }\n    \n    // Create canvas if it doesn't exist\n    if (!canvas.value) {\n      const canvasEl = document.createElement('canvas');\n      canvasEl.style.cssText = `\n        position: fixed;\n        inset: 0;\n        pointer-events: none;\n        z-index: 2147483647;\n        display: none;\n      `;\n      document.body.appendChild(canvasEl);\n      canvas.value = canvasEl;\n      \n      // Set canvas size\n      const updateCanvasSize = () => {\n        canvasEl.width = window.innerWidth;\n        canvasEl.height = window.innerHeight;\n      };\n      updateCanvasSize();\n      window.addEventListener('resize', updateCanvasSize);\n    }\n    \n    const ctx = canvas.value.getContext('2d')!;\n    \n    const drawOutline = (component: ComponentInfo) => {\n      if (!component.domElement) return;\n      \n      const rect = component.domElement.getBoundingClientRect();\n      \n      // Clear canvas\n      ctx.clearRect(0, 0, canvas.value!.width, canvas.value!.height);\n      \n      // Draw outline\n      ctx.strokeStyle = 'rgba(100, 200, 255, 0.8)';\n      ctx.lineWidth = 2;\n      ctx.fillStyle = 'rgba(100, 200, 255, 0.1)';\n      \n      ctx.beginPath();\n      ctx.rect(rect.left, rect.top, rect.width, rect.height);\n      ctx.fill();\n      ctx.stroke();\n      \n      // Draw component name label\n      if (component.name && component.name !== 'Unknown') {\n        const labelHeight = 20;\n        const labelPadding = 8;\n        const labelWidth = component.name.length * 7 + labelPadding * 2;\n        const labelY = rect.top > labelHeight ? rect.top - labelHeight : rect.bottom;\n        \n        // Background\n        ctx.fillStyle = 'rgba(100, 200, 255, 0.9)';\n        ctx.fillRect(rect.left, labelY, labelWidth, labelHeight);\n        \n        // Text\n        ctx.font = '12px IosevkaTerm, monospace';\n        ctx.fillStyle = 'white';\n        ctx.fillText(component.name, rect.left + labelPadding, labelY + 14);\n        \n        // Show component type if it's not a regular component\n        if (!component.isComponent && component.fiberType) {\n          ctx.font = '10px IosevkaTerm, monospace';\n          ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';\n          ctx.fillText(`(${component.fiberType})`, rect.left + labelWidth + 4, labelY + 14);\n        }\n      }\n    };\n    \n    const handleMouseMove = (e: MouseEvent) => {\n      const target = e.target as HTMLElement;\n      \n      // Skip if it's part of our UI\n      if (target.closest('.toolbar')) {\n        ctx.clearRect(0, 0, canvas.value!.width, canvas.value!.height);\n        canvas.value!.style.display = 'none';\n        hoveredComponent.value = null;\n        return;\n      }\n      \n      // Get component at this point using bippy\n      const component = inspector.value!.getComponentAtPoint(e.clientX, e.clientY);\n      if (component) {\n        hoveredComponent.value = component;\n        canvas.value!.style.display = 'block';\n        \n        // Use requestAnimationFrame for smooth rendering\n        if (animationFrame.value) {\n          cancelAnimationFrame(animationFrame.value);\n        }\n        animationFrame.value = requestAnimationFrame(() => {\n          drawOutline(component);\n        });\n      } else {\n        ctx.clearRect(0, 0, canvas.value!.width, canvas.value!.height);\n        canvas.value!.style.display = 'none';\n        hoveredComponent.value = null;\n      }\n    };\n    \n    const handleClick = (e: MouseEvent) => {\n      e.preventDefault();\n      e.stopPropagation();\n      \n      const target = e.target as HTMLElement;\n      if (target.closest('.toolbar')) return;\n      \n      // Use bippy to get component info\n      const component = inspector.value!.getComponentAtPoint(e.clientX, e.clientY);\n      if (component) {\n        onSelect(component);\n        canvas.value!.style.display = 'none';\n      }\n    };\n    \n    document.addEventListener('mousemove', handleMouseMove);\n    document.addEventListener('click', handleClick, true);\n    \n    return () => {\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('click', handleClick, true);\n      if (canvas.value) {\n        canvas.value.style.display = 'none';\n      }\n      if (animationFrame.value) {\n        cancelAnimationFrame(animationFrame.value);\n      }\n    };\n  });\n  \n  return null;\n}","/** @jsx h */\nimport { h, Fragment } from 'preact';\nimport { useSignal, effect } from '@preact/signals';\nimport { marked } from 'marked';\n// Temporarily use simple storage instead of SQLite to avoid WASM issues\nimport { initDB, createChatSession, createMessage, getChatSessions, getMessagesForChatSession, deleteChatSession } from '../db/simple-storage';\nimport { styles } from './Toolbar.styles';\nimport { LLMHub } from '../llm/providers';\nimport type { Message, Model } from '../llm/openrouter';\nimport { ComponentInspector } from './ComponentInspector';\nimport type { ComponentInfo } from '../instrumentation/bippy-adapter';\n\n// Legacy support for Gemini response format\ninterface StructuredResponse {\n  markdown: string;\n  chatTitle?: string;\n  relevantFiles: RelevantFile[];\n  documentationLinks: DocumentationLink[];\n  suggestedQueries?: string[];\n  projectInfo?: {\n    name: string;\n    type: string;\n    mainTechnologies: string[];\n    description: string;\n  };\n}\n\ninterface RelevantFile {\n  path: string;\n  reason: string;\n  type: 'core' | 'config' | 'component' | 'util' | 'test' | 'other';\n  snippet?: string;\n}\n\ninterface DocumentationLink {\n  url: string;\n  title: string;\n  description: string;\n}\n\ninterface ChatMessage {\n  role: 'user' | 'assistant';\n  content: string;\n  structuredResponse?: StructuredResponse;\n}\n\ninterface ProjectInfo {\n  name: string;\n  type: string;\n  mainTechnologies: string[];\n  description: string;\n}\n\ninterface ChatSession {\n  id: string;\n  title: string;\n  messages: ChatMessage[];\n  projectInfo?: ProjectInfo;\n}\n\ntype ContentTab = 'chat' | 'files' | 'docs' | 'suggestions';\ntype ViewMode = 'chat' | 'models' | 'settings' | 'components';\ntype SelectionMode = 'none' | 'selecting' | 'selected';\n\nfunction getInitialResponse(): StructuredResponse {\n  return {\n    projectInfo: {\n      name: 'Example Project',\n      type: 'Library',\n      mainTechnologies: ['React', 'TypeScript', 'SQLite'],\n      description: 'A floating chat interface powered by Gemini'\n    },\n    markdown: 'Welcome to the example project!',\n    chatTitle: 'New Chat',\n    relevantFiles: [],\n    documentationLinks: [],\n    suggestedQueries: []\n  };\n}\n\ninterface Props {\n  hub: LLMHub;\n}\n\nexport function Toolbar({ hub }: Props) {\n  console.log('[Toolbar] Initializing with hub:', hub, 'isInitialized:', hub?.isInitialized());\n  \n  const isInitializing = useSignal(true);\n  const isVisible = useSignal(false);\n  const isMinimized = useSignal(false);\n  const chatSessions = useSignal<ChatSession[]>([]);\n  const activeChatId = useSignal<string | null>(null);\n  const inputValue = useSignal('');\n  const editingTitle = useSignal('');\n  const activeTab = useSignal<ContentTab>('chat');\n  const projectInfo = useSignal<ProjectInfo | null>(null);\n  const hasInitialChat = useSignal(false);\n  const isLoadingMessages = useSignal(false);\n  const isStreamingResponse = useSignal(false);\n  const streamingContent = useSignal('');\n  const showModelSelector = useSignal(false);\n  const currentView = useSignal<ViewMode>('chat');\n  const apiKey = useSignal('');\n  const selectionMode = useSignal<SelectionMode>('none');\n  const selectedComponent = useSignal<any>(null);\n\n  // Check for dev mode and OpenRouter key\n  effect(() => {\n    const isDev = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';\n    if (isDev) {\n      // Check for OpenRouter API key in localStorage or env\n      const storedKey = localStorage.getItem('react-llm-openrouter-key');\n      const envKey = (window as any).__REACT_LLM_CONFIG__?.openrouterKey;\n      \n      if (storedKey || envKey) {\n        apiKey.value = storedKey || envKey;\n        // Initialize OpenRouter instead of demo mode\n        hub.initializeProvider('openrouter', apiKey.value).then(() => {\n          console.log('[ReactLLM] OpenRouter initialized with', hub.getAvailableModels().length, 'models');\n        });\n      }\n    }\n  });\n\n  // Initialize database and load chat sessions\n  effect(() => {\n    if (hasInitialChat.value) return;\n    \n    const initialize = async () => {\n      try {\n        // Initialize SQLite database\n        await initDB();\n        \n        // Load existing chat sessions\n        const sessions = await getChatSessions();\n        \n        if (sessions.length > 0) {\n          // Load messages for the most recent session\n          const messages = await getMessagesForChatSession(sessions[0].id);\n          const firstSession: ChatSession = {\n            id: sessions[0].id,\n            title: sessions[0].title,\n            messages: messages.map(m => ({\n              role: m.role === 'user' || m.role === 'assistant' ? m.role : 'assistant',\n              content: m.content,\n              structuredResponse: m.structuredResponse ? JSON.parse(m.structuredResponse) as StructuredResponse : undefined\n            }))\n          };\n          \n          chatSessions.value = [firstSession];\n          activeChatId.value = firstSession.id;\n          hasInitialChat.value = true;\n          \n          // Extract project info from the first message if it exists\n          const firstMessage = messages.find(m => m.role === 'assistant' && m.structuredResponse);\n          if (firstMessage?.structuredResponse) {\n            try {\n              const structuredResponse = JSON.parse(firstMessage.structuredResponse) as StructuredResponse;\n              if (structuredResponse.projectInfo) {\n                projectInfo.value = structuredResponse.projectInfo;\n              }\n            } catch (e) {\n              console.warn('Failed to parse structured response:', e);\n            }\n          }\n        } else if (hub.isInitialized()) {\n          // No existing chats, create initial welcome message\n          const initialResponse = getInitialResponse();\n          if (initialResponse.projectInfo) {\n            projectInfo.value = initialResponse.projectInfo;\n          }\n          \n          // Create initial chat in database\n          const newId = String(Date.now());\n          await createChatSession(newId, 'Welcome');\n          \n          // Create initial message\n          const welcomeMessage = `Welcome to React LLM! I'm ready to help you with your React codebase.\n\nI'm currently using **${hub.getActiveModel()}** - you can change models anytime using the  button.\n\nWhat would you like to explore?`;\n          \n          await createMessage(\n            String(Date.now()),\n            newId,\n            'assistant',\n            welcomeMessage,\n            JSON.stringify({\n              ...initialResponse,\n              markdown: welcomeMessage\n            })\n          );\n          \n          // Update state\n          const chat: ChatSession = {\n            id: newId,\n            title: 'Welcome',\n            messages: [{\n              role: 'assistant',\n              content: welcomeMessage,\n              structuredResponse: {\n                ...initialResponse,\n                markdown: welcomeMessage\n              }\n            }],\n            projectInfo: initialResponse.projectInfo\n          };\n          \n          chatSessions.value = [chat];\n          activeChatId.value = chat.id;\n          hasInitialChat.value = true;\n        }\n      } finally {\n        isInitializing.value = false;\n        setTimeout(() => isVisible.value = true, 50);\n      }\n    };\n\n    initialize();\n  });\n\n  // Load messages when active chat changes\n  effect(() => {\n    if (!activeChatId.value || isLoadingMessages.value) return;\n    \n    const currentChat = chatSessions.value.find(c => c.id === activeChatId.value);\n    // Skip if we already have messages for this chat\n    if (currentChat?.messages && currentChat.messages.length > 0) return;\n    \n    const loadMessages = async () => {\n      isLoadingMessages.value = true;\n      try {\n        const messages = await getMessagesForChatSession(activeChatId.value!);\n        chatSessions.value = chatSessions.value.map(session => \n          session.id === activeChatId.value ? {\n            ...session,\n            messages: messages.map(m => ({\n              role: m.role,\n              content: m.content,\n              structuredResponse: m.structuredResponse ? JSON.parse(m.structuredResponse) : undefined,\n              relevantFiles: m.relevantFiles || [],\n              documentationLinks: m.documentationLinks || [],\n              suggestedQueries: m.suggestedQueries || []\n            }))\n          } : session\n        );\n      } catch (error) {\n        console.error('Failed to load messages:', error);\n      } finally {\n        isLoadingMessages.value = false;\n      }\n    };\n\n    loadMessages();\n  });\n\n  const createNewChat = async () => {\n    console.log('[createNewChat] Starting...', {\n      isInitializing: isInitializing.value,\n      hubInitialized: hub?.isInitialized(),\n      activeModel: hub?.getActiveModel()\n    });\n    \n    if (isInitializing.value) return;\n\n    const newId = String(Date.now());\n    \n    try {\n      // Create chat session in database\n      await createChatSession(newId, 'New Chat');\n      \n      // Get initial analysis from LLM\n      let response: StructuredResponse;\n      try {\n        const llmContent = await hub.completeChat([\n          { role: 'user', content: 'Please provide a helpful introduction and overview of how I can assist with this React codebase.' }\n        ]);\n        \n        response = {\n          markdown: llmContent,\n          chatTitle: extractTitleFromResponse(llmContent),\n          relevantFiles: [],\n          documentationLinks: [],\n          suggestedQueries: extractSuggestionsFromResponse(llmContent)\n        };\n      } catch (error) {\n        console.error('Failed to get LLM response:', error);\n        response = {\n          markdown: 'Hello! I\\'m ready to help you with your React codebase.',\n          chatTitle: 'New Chat',\n          relevantFiles: [],\n          documentationLinks: [],\n          suggestedQueries: ['How does this work?', 'Can you explain this pattern?']\n        };\n      }\n      \n      // Create initial message in database\n      await createMessage(\n        String(Date.now()),\n        newId,\n        'assistant',\n        response.markdown,\n        JSON.stringify(response)\n      );\n      \n      const newChat: ChatSession = {\n        id: newId,\n        title: response.chatTitle || 'New Chat',\n        messages: [{\n          role: 'assistant',\n          content: response.markdown,\n          structuredResponse: response\n        }],\n        projectInfo: response.projectInfo\n      };\n      \n      chatSessions.value = [...chatSessions.value, newChat];\n      activeChatId.value = newId;\n    } catch (error) {\n      console.error('Failed to create new chat:', error);\n    }\n  };\n\n  const formatChatTitle = (title: string) => {\n    if (!title) return projectInfo.value?.name || 'untitled project';\n    if (!projectInfo.value?.name || !projectInfo.value?.description) return title;\n    \n    const cleanTitle = title.toLowerCase().startsWith(projectInfo.value.name.toLowerCase()) \n      ? title.slice(projectInfo.value.name.length).replace(/^[-:\\s]+/, '')\n      : title;\n      \n    return `${projectInfo.value.name} - ${projectInfo.value.description}`.toLowerCase();\n  };\n\n  const activeChat = () => activeChatId.value ? \n    chatSessions.value.find(c => c.id === activeChatId.value) : null;\n\n  const deleteChat = async (chatId: string) => {\n    try {\n      await deleteChatSession(chatId);\n      chatSessions.value = chatSessions.value.filter(c => c.id !== chatId);\n      if (activeChatId.value === chatId) {\n        activeChatId.value = chatSessions.value[0]?.id || null;\n      }\n    } catch (error) {\n      console.error('Failed to delete chat:', error);\n    }\n  };\n\n  const startEditingTitle = (chatId: string) => {\n    const chat = chatSessions.value.find(c => c.id === chatId);\n    if (chat) {\n      editingTitle.value = chat.title;\n    }\n  };\n\n  const saveEditingTitle = () => {\n    if (editingTitle.value.trim()) {\n      chatSessions.value = chatSessions.value.map(chat => \n        chat.id === activeChatId.value ? \n          { ...chat, title: editingTitle.value.trim() } : \n          chat\n      );\n    }\n    editingTitle.value = '';\n  };\n\n  const handleSubmit = async (e: Event) => {\n    e.preventDefault();\n    if (!inputValue.value.trim() || isInitializing.value) return;\n\n    const userMessage = inputValue.value;\n    inputValue.value = '';\n    \n    if (!activeChatId.value) {\n      await createNewChat();\n      return;\n    }\n    \n    const chat = activeChat()!;\n    const isNewChat = chat.messages.length === 0;\n    const userMessageId = String(Date.now());\n    \n    try {\n      // Save user message to database\n      await createMessage(\n        userMessageId,\n        chat.id,\n        'user',\n        userMessage\n      );\n      \n      // Update UI immediately\n      const updatedMessages = [...chat.messages, { role: 'user', content: userMessage }];\n      chatSessions.value = chatSessions.value.map(c => \n        c.id === activeChatId.value ? { ...c, messages: updatedMessages } : c\n      );\n      \n      isInitializing.value = true;\n\n      // Get response from LLM Hub with streaming\n      isStreamingResponse.value = true;\n      streamingContent.value = '';\n      \n      const llmMessages: Message[] = [\n        ...chat.messages.map(m => ({ role: m.role, content: m.content })),\n        { role: 'user', content: userMessage }\n      ];\n      \n      let fullResponse = '';\n      \n      try {\n        for await (const chunk of hub.chat(llmMessages)) {\n          fullResponse += chunk;\n          streamingContent.value = fullResponse;\n          // Don't update messages array during streaming - we show streamingContent separately\n        }\n        \n        // Create structured response from the full response\n        const response: StructuredResponse = {\n          markdown: fullResponse,\n          chatTitle: isNewChat ? extractTitleFromResponse(fullResponse) : undefined,\n          relevantFiles: [],\n          documentationLinks: [],\n          suggestedQueries: extractSuggestionsFromResponse(fullResponse)\n        };\n      \n        // Save assistant message to database\n        const assistantMessageId = String(Date.now() + 1);\n        await createMessage(\n          assistantMessageId,\n          chat.id,\n          'assistant',\n          fullResponse,\n          JSON.stringify(response)\n        );\n        \n        // Update UI with final response\n        const newMessages = [...updatedMessages, { \n          role: 'assistant' as const, \n          content: fullResponse,\n          structuredResponse: response\n        }];\n        \n        chatSessions.value = chatSessions.value.map(c => \n          c.id === activeChatId.value ? {\n            ...c,\n            title: isNewChat && response.chatTitle ? response.chatTitle : c.title,\n            messages: newMessages,\n            projectInfo: isNewChat ? response.projectInfo : c.projectInfo\n          } : c\n        );\n      } catch (streamError) {\n        console.error('Streaming error:', streamError);\n        \n        // Fallback to simple response if streaming fails\n        const errorResponse = 'I apologize, but I encountered an issue processing your request. Please try again.';\n        const assistantMessageId = String(Date.now() + 1);\n        await createMessage(\n          assistantMessageId,\n          chat.id,\n          'assistant',\n          errorResponse\n        );\n        \n        chatSessions.value = chatSessions.value.map(c => \n          c.id === activeChatId.value ? {\n            ...c,\n            messages: [...updatedMessages, { \n              role: 'assistant' as const, \n              content: errorResponse\n            }]\n          } : c\n        );\n      }\n    } catch (error) {\n      console.error('Failed to get response:', error);\n      \n      // Save error message to database\n      const errorMessageId = String(Date.now() + 1);\n      await createMessage(\n        errorMessageId,\n        chat.id,\n        'assistant',\n        'Sorry, I encountered an error. Please try again.'\n      );\n      \n      chatSessions.value = chatSessions.value.map(c => \n        c.id === activeChatId.value ? {\n          ...c,\n          messages: [...chat.messages, { \n            role: 'assistant', \n            content: 'Sorry, I encountered an error. Please try again.'\n          }]\n        } : c\n      );\n    } finally {\n      isInitializing.value = false;\n      isStreamingResponse.value = false;\n      streamingContent.value = '';\n    }\n  };\n\n  const extractTitleFromResponse = (response: string | undefined): string => {\n    // Simple title extraction from response content\n    if (!response) return 'New Chat';\n    const lines = response.split('\\n');\n    const firstLine = lines[0]?.replace(/^#+\\s*/, '').trim();\n    return firstLine && firstLine.length < 100 ? firstLine : 'New Chat';\n  };\n  \n  const extractSuggestionsFromResponse = (response: string | undefined): string[] => {\n    // Simple suggestion extraction - look for questions or bullet points\n    if (!response) return [];\n    const suggestions: string[] = [];\n    const lines = response.split('\\n');\n    \n    for (const line of lines) {\n      const trimmed = line.trim();\n      if (trimmed.startsWith('- ') && trimmed.endsWith('?')) {\n        suggestions.push(trimmed.slice(2));\n      } else if (trimmed.match(/^\\d+\\./)) {\n        const question = trimmed.replace(/^\\d+\\.\\s*/, '');\n        if (question.endsWith('?')) {\n          suggestions.push(question);\n        }\n      }\n    }\n    \n    return suggestions.slice(0, 3); // Limit to 3 suggestions\n  };\n  \n  const handleModelChange = (provider: string, model: string) => {\n    hub.setActiveModel(provider, model);\n    showModelSelector.value = false;\n  };\n  \n  const selectedComponents = useSignal<any[]>([]);\n  \n  const handleComponentSelect = (componentInfo: ComponentInfo) => {\n    selectedComponent.value = componentInfo;\n    selectionMode.value = 'selected';\n    \n    // Add to selected components list\n    if (componentInfo) {\n      const existingIndex = selectedComponents.value.findIndex(\n        c => c.id === componentInfo.id\n      );\n      \n      if (existingIndex === -1) {\n        selectedComponents.value = [...selectedComponents.value, {\n          ...componentInfo,\n          timestamp: new Date().toISOString()\n        }];\n      }\n      \n      // Switch to components view to show selection\n      currentView.value = 'components';\n    }\n  };\n\n  const renderComponentsView = () => (\n    <div className=\"view-container\">\n      <div className=\"view-header\">\n        <h2 className=\"view-title\">Selected Components</h2>\n        <button className=\"view-close\" onClick={() => currentView.value = 'chat'}></button>\n      </div>\n      <div className=\"view-content\">\n        {selectedComponents.value.length === 0 ? (\n          <div className=\"empty-components\">\n            <p>No components selected yet</p>\n            <button \n              className=\"select-component-button\"\n              onClick={() => {\n                currentView.value = 'chat';\n                selectionMode.value = 'selecting';\n              }}\n            >\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path d=\"M2 2h4v2H4v2H2V2zm10 0h4v4h-2V4h-2V2zM2 10h2v2h2v2H2v-4zm12 2h2v-2h-2v2zm0 0v2h-2v2h4v-4h-2z\"/>\n                <circle cx=\"8\" cy=\"8\" r=\"2\" opacity=\"0.5\"/>\n              </svg>\n              Select a Component\n            </button>\n          </div>\n        ) : (\n          <div className=\"components-list\">\n            {selectedComponents.value.map((comp) => (\n              <div key={comp.id} className=\"component-item\">\n                <div className=\"component-header\">\n                  <h3 className=\"component-name\">{comp.name}</h3>\n                  <button \n                    className=\"remove-button\"\n                    onClick={() => {\n                      selectedComponents.value = selectedComponents.value.filter(c => c.id !== comp.id);\n                    }}\n                  >\n                    \n                  </button>\n                </div>\n                <div className=\"component-details\">\n                  {comp.domElement && (\n                    <div className=\"detail-row\">\n                      <span className=\"detail-label\">Element:</span>\n                      <code className=\"detail-value\">\n                        &lt;{comp.domElement.tagName.toLowerCase()}{comp.domElement.id ? ` id=\"${comp.domElement.id}\"` : ''}{comp.domElement.className ? ` class=\"${comp.domElement.className}\"` : ''}&gt;\n                      </code>\n                    </div>\n                  )}\n                  {Object.keys(comp.props || {}).length > 0 && (\n                    <div className=\"detail-row\">\n                      <span className=\"detail-label\">Props:</span>\n                      <pre className=\"detail-value props-value\">{JSON.stringify(comp.props, null, 2)}</pre>\n                    </div>\n                  )}\n                  {comp.state && (\n                    <div className=\"detail-row\">\n                      <span className=\"detail-label\">State:</span>\n                      <pre className=\"detail-value props-value\">{JSON.stringify(comp.state, null, 2)}</pre>\n                    </div>\n                  )}\n                  {comp.hooks && comp.hooks.length > 0 && (\n                    <div className=\"detail-row\">\n                      <span className=\"detail-label\">Hooks:</span>\n                      <div className=\"detail-value\">\n                        {comp.hooks.map((hook: any, i: number) => (\n                          <div key={i} className=\"hook-item\">\n                            Hook {i}: {JSON.stringify(hook.memoizedState)}\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                  )}\n                  <div className=\"component-actions\">\n                    <button \n                      className=\"action-button\"\n                      onClick={() => {\n                        currentView.value = 'chat';\n                        inputValue.value = `Tell me about the ${comp.name} component`;\n                      }}\n                    >\n                      Ask about this component\n                    </button>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n\n  const renderSettingsView = () => (\n    <div className=\"view-container\">\n      <div className=\"view-header\">\n        <h2 className=\"view-title\">Settings</h2>\n        <button className=\"view-close\" onClick={() => currentView.value = 'chat'}></button>\n      </div>\n      <div className=\"view-content\">\n        <div className=\"settings-section\">\n          <label className=\"settings-label\">OpenRouter API Key</label>\n          <input\n            type=\"password\"\n            className=\"settings-input\"\n            value={apiKey.value}\n            onInput={(e) => apiKey.value = (e.target as HTMLInputElement).value}\n            placeholder=\"sk-or-...\"\n          />\n          <div className=\"settings-hint\">\n            Get your API key from{' '}\n            <a href=\"https://openrouter.ai/keys\" target=\"_blank\" rel=\"noopener noreferrer\" style={{ color: 'rgba(100, 200, 255, 0.9)' }}>\n              openrouter.ai/keys\n            </a>\n          </div>\n          <button\n            className=\"settings-button\"\n            onClick={async () => {\n              if (apiKey.value) {\n                localStorage.setItem('react-llm-openrouter-key', apiKey.value);\n                await hub.initializeProvider('openrouter', apiKey.value);\n                currentView.value = 'models';\n              }\n            }}\n            disabled={!apiKey.value}\n          >\n            Save and Connect\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n\n  const renderModelsView = () => {\n    const models = hub.getAvailableModels();\n    const hasApiKey = hub.isInitialized() && hub.getActiveProvider() !== 'demo';\n    \n    return (\n      <div className=\"view-container\">\n        <div className=\"view-header\">\n          <h2 className=\"view-title\">Select Model</h2>\n          <button className=\"view-close\" onClick={() => currentView.value = 'chat'}></button>\n        </div>\n        <div className=\"view-content\">\n          {!hasApiKey && (\n            <div className=\"api-key-prompt\">\n              <div className=\"api-key-prompt-text\">\n                Add your OpenRouter API key to access all models\n              </div>\n              <button \n                className=\"api-key-prompt-button\"\n                onClick={() => currentView.value = 'settings'}\n              >\n                Add API Key\n              </button>\n            </div>\n          )}\n          \n          <div className=\"models-grid\">\n            {models.map((model: Model) => (\n              <div\n                key={model.id}\n                className={`model-card ${hub.getActiveModel() === model.id ? 'selected' : ''}`}\n                onClick={() => {\n                  hub.setActiveModel('openrouter', model.id);\n                  handleModelChange('openrouter', model.id);\n                  currentView.value = 'chat';\n                }}\n              >\n                <div className=\"model-card-header\">\n                  <div>\n                    <div className=\"model-card-name\">{model.name}</div>\n                    <div className=\"model-card-provider\">{model.provider}</div>\n                  </div>\n                  {model.id.includes('claude-3-5-sonnet') || model.id.includes('gpt-4o') ? (\n                    <span className=\"model-card-badge recommended\">Recommended</span>\n                  ) : null}\n                </div>\n                \n                <div className=\"model-card-specs\">\n                  <div className=\"model-spec\">\n                    <div className=\"model-spec-label\">Context</div>\n                    <div className=\"model-spec-value\">\n                      {model.contextLength >= 1000000 ? `${(model.contextLength / 1000000).toFixed(1)}M` :\n                       model.contextLength >= 1000 ? `${(model.contextLength / 1000).toFixed(0)}K` :\n                       model.contextLength}\n                    </div>\n                  </div>\n                  <div className=\"model-spec\">\n                    <div className=\"model-spec-label\">Input</div>\n                    <div className=\"model-spec-value\">${(model.pricing.prompt * 1000).toFixed(3)}/1K</div>\n                  </div>\n                  <div className=\"model-spec\">\n                    <div className=\"model-spec-label\">Output</div>\n                    <div className=\"model-spec-value\">${(model.pricing.completion * 1000).toFixed(3)}/1K</div>\n                  </div>\n                </div>\n                \n                {model.description && (\n                  <div className=\"model-card-description\">{model.description}</div>\n                )}\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  const renderMessage = (msg: ChatMessage) => {\n    if (msg.role === 'user') {\n      return <div className=\"message user-message\">{msg.content}</div>;\n    }\n\n    const html = marked(msg.content);\n    if (typeof html !== 'string') return null;\n\n    return (\n      <div className=\"message assistant-message\">\n        <div dangerouslySetInnerHTML={{ __html: html }} />\n        \n        {msg.structuredResponse?.relevantFiles && msg.structuredResponse.relevantFiles.length > 0 && (\n          <div className=\"relevant-files\">\n            {msg.structuredResponse.relevantFiles.map((file, i) => (\n              <div key={i} className=\"relevant-file\" title={file.reason}>\n                <span className=\"file-path\">{file.path}</span>\n              </div>\n            ))}\n          </div>\n        )}\n\n        {msg.structuredResponse?.documentationLinks && msg.structuredResponse.documentationLinks.length > 0 && (\n          <div className=\"docs-section\">\n            {msg.structuredResponse.documentationLinks.map((link, i) => (\n              <a \n                key={i} \n                href={link.url} \n                target=\"_blank\" \n                rel=\"noopener noreferrer\" \n                className=\"docs-link\"\n              >\n                <div className=\"docs-link-title\">{link.title}</div>\n                <div className=\"docs-link-description\">{link.description}</div>\n              </a>\n            ))}\n          </div>\n        )}\n\n        {msg.structuredResponse?.suggestedQueries && msg.structuredResponse.suggestedQueries.length > 0 && (\n          <div className=\"suggested-queries\">\n            <div className=\"suggested-queries-title\">suggested questions</div>\n            <div className=\"suggested-queries-list\">\n              {msg.structuredResponse.suggestedQueries.map((query, i) => (\n                <div \n                  key={i} \n                  className=\"suggested-query\"\n                  onClick={() => {\n                    inputValue.value = query;\n                    const input = document.querySelector('.input') as HTMLInputElement;\n                    if (input) {\n                      input.focus();\n                    }\n                  }}\n                >\n                  {query.toLowerCase()}\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  return (\n    <Fragment>\n      <style>{styles}</style>\n      {selectionMode.value === 'selecting' && (\n        <ComponentInspector \n          isActive={true} \n          onSelect={handleComponentSelect}\n        />\n      )}\n      <div \n        className={`toolbar ${isMinimized.value ? 'minimized' : ''} ${isVisible.value ? '' : 'opacity-0'}`}\n      >\n        <div className=\"header\">\n          <div className=\"controls\">\n            <button \n              className={`control-button ${currentView.value === 'components' ? 'active' : ''}`} \n              onClick={() => currentView.value = currentView.value === 'components' ? 'chat' : 'components'}\n              title=\"Selected Components\"\n            >\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n                <rect x=\"2\" y=\"2\" width=\"5\" height=\"5\" rx=\"1\" stroke=\"currentColor\" strokeWidth=\"1.5\" fill=\"none\"/>\n                <rect x=\"9\" y=\"2\" width=\"5\" height=\"5\" rx=\"1\" stroke=\"currentColor\" strokeWidth=\"1.5\" fill=\"none\"/>\n                <rect x=\"2\" y=\"9\" width=\"5\" height=\"5\" rx=\"1\" stroke=\"currentColor\" strokeWidth=\"1.5\" fill=\"none\"/>\n                <rect x=\"9\" y=\"9\" width=\"5\" height=\"5\" rx=\"1\" stroke=\"currentColor\" strokeWidth=\"1.5\" fill=\"none\"/>\n              </svg>\n            </button>\n            <button \n              className={`control-button model-button ${currentView.value === 'models' ? 'active' : ''}`} \n              onClick={() => currentView.value = currentView.value === 'models' ? 'chat' : 'models'}\n              title=\"Select Model\"\n            >\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n                <rect x=\"2\" y=\"2\" width=\"12\" height=\"12\" rx=\"2\" stroke=\"currentColor\" strokeWidth=\"1.5\" fill=\"none\"/>\n                <rect x=\"5\" y=\"5\" width=\"6\" height=\"1.5\" rx=\"0.75\" fill=\"currentColor\"/>\n                <rect x=\"5\" y=\"8\" width=\"6\" height=\"1.5\" rx=\"0.75\" fill=\"currentColor\"/>\n                <rect x=\"5\" y=\"11\" width=\"4\" height=\"1.5\" rx=\"0.75\" fill=\"currentColor\"/>\n              </svg>\n            </button>\n            <button \n              className={`control-button ${currentView.value === 'settings' ? 'active' : ''}`} \n              onClick={() => currentView.value = currentView.value === 'settings' ? 'chat' : 'settings'}\n              title=\"Settings\"\n            >\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path d=\"M8 10a2 2 0 100-4 2 2 0 000 4z\"/>\n                <path d=\"M13.3 9.2a1.2 1.2 0 010-2.4l.7-.1a6 6 0 00-.4-1.6l-.6.4a1.2 1.2 0 01-1.7-.4 1.2 1.2 0 01.4-1.7l.6-.3A6 6 0 0011 2l-.1.7a1.2 1.2 0 01-2.4 0L8.4 2a6 6 0 00-1.6.4l.4.6a1.2 1.2 0 01-.4 1.7 1.2 1.2 0 01-1.7-.4l-.3-.6A6 6 0 002 5l.7.1a1.2 1.2 0 010 2.4L2 7.6a6 6 0 00.4 1.6l.6-.4a1.2 1.2 0 011.7.4 1.2 1.2 0 01-.4 1.7l-.6.3A6 6 0 005 14l.1-.7a1.2 1.2 0 012.4 0l.1.7a6 6 0 001.6-.4l-.4-.6a1.2 1.2 0 01.4-1.7 1.2 1.2 0 011.7.4l.3.6A6 6 0 0014 11l-.7-.1zM8 11a3 3 0 110-6 3 3 0 010 6z\"/>\n              </svg>\n            </button>\n            <button \n              className=\"control-button\" \n              onClick={createNewChat}\n              disabled={isInitializing.value}\n            >\n              +\n            </button>\n            <button \n              className=\"control-button\" \n              onClick={() => isMinimized.value = !isMinimized.value}\n            >\n              {isMinimized.value ? '+' : '-'}\n            </button>\n          </div>\n        </div>\n\n        {!isMinimized.value && currentView.value === 'models' && renderModelsView()}\n        {!isMinimized.value && currentView.value === 'settings' && renderSettingsView()}\n        {!isMinimized.value && currentView.value === 'components' && renderComponentsView()}\n        \n        {!isMinimized.value && currentView.value === 'chat' && (\n          activeChat() ? (\n            <Fragment>\n              <div className=\"messages-container\">\n                {activeChat()!.messages.map((msg, i) => (\n                  <div key={i} className=\"message-wrapper\">\n                    {renderMessage(msg)}\n                  </div>\n                ))}\n                {isStreamingResponse.value && streamingContent.value && (\n                  <div className=\"message-wrapper\">\n                    <div className=\"message assistant-message\">\n                      <div dangerouslySetInnerHTML={{ __html: marked(streamingContent.value) }} />\n                    </div>\n                  </div>\n                )}\n              </div>\n              \n              <div className=\"input-area\">\n                <form onSubmit={handleSubmit} className=\"input-form\">\n                  <input\n                    type=\"text\"\n                    className=\"input\"\n                    value={inputValue.value}\n                    onInput={(e) => inputValue.value = (e.target as HTMLInputElement).value}\n                    placeholder=\"ask about your react codebase...\"\n                    disabled={isInitializing.value || isStreamingResponse.value}\n                  />\n                </form>\n                <div className=\"input-controls\">\n                  <button \n                    type=\"button\"\n                    className={`control-icon-button ${selectionMode.value === 'selecting' ? 'active' : ''}`}\n                    onClick={() => selectionMode.value = selectionMode.value === 'selecting' ? 'none' : 'selecting'}\n                    title=\"Select Component\"\n                  >\n                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n                      <path d=\"M2 2h4v2H4v2H2V2zm10 0h4v4h-2V4h-2V2zM2 10h2v2h2v2H2v-4zm12 2h2v-2h-2v2zm0 0v2h-2v2h4v-4h-2z\"/>\n                      <circle cx=\"8\" cy=\"8\" r=\"2\" opacity=\"0.5\"/>\n                    </svg>\n                  </button>\n                  <button \n                    type=\"button\"\n                    className=\"send-button\"\n                    onClick={(e) => {\n                      e.preventDefault();\n                      handleSubmit(e as any);\n                    }}\n                    disabled={isInitializing.value || isStreamingResponse.value || !inputValue.value.trim()}\n                  >\n                    {isStreamingResponse.value ? '...' : ''}\n                  </button>\n                </div>\n              </div>\n              \n            </Fragment>\n          ) : (\n            <div className=\"empty-state\">\n              <div className=\"empty-state-title\">welcome to react llm</div>\n              <div className=\"empty-state-description\">\n                start a new chat to get ai-powered help with your react codebase\n                {isInitializing.value && (\n                  <div className=\"loading-dots\">\n                    <div className=\"loading-dot\"></div>\n                    <div className=\"loading-dot\"></div>\n                    <div className=\"loading-dot\"></div>\n                  </div>\n                )}\n              </div>\n              <button \n                className=\"new-chat-button\" \n                onClick={createNewChat}\n                disabled={isInitializing.value}\n              >\n                <span>+</span> new chat\n              </button>\n            </div>\n          )\n        )}\n      </div>\n    </Fragment>\n  );\n}\n","// Simple EventEmitter implementation for browser compatibility\nexport class EventEmitter {\n  private events: Map<string, Array<(...args: any[]) => void>> = new Map();\n\n  on(event: string, listener: (...args: any[]) => void): this {\n    if (!this.events.has(event)) {\n      this.events.set(event, []);\n    }\n    this.events.get(event)!.push(listener);\n    return this;\n  }\n\n  emit(event: string, ...args: any[]): boolean {\n    const listeners = this.events.get(event);\n    if (!listeners || listeners.length === 0) {\n      return false;\n    }\n    listeners.forEach(listener => listener(...args));\n    return true;\n  }\n\n  removeListener(event: string, listener: (...args: any[]) => void): this {\n    const listeners = this.events.get(event);\n    if (!listeners) return this;\n    \n    const index = listeners.indexOf(listener);\n    if (index !== -1) {\n      listeners.splice(index, 1);\n    }\n    return this;\n  }\n\n  removeAllListeners(event?: string): this {\n    if (event) {\n      this.events.delete(event);\n    } else {\n      this.events.clear();\n    }\n    return this;\n  }\n}","import { EventEmitter } from '../utils/event-emitter';\n\nexport interface OpenRouterConfig {\n  apiKey: string;\n  siteUrl?: string;\n  siteName?: string;\n}\n\nexport interface Model {\n  id: string;\n  name: string;\n  provider: string;\n  contextLength: number;\n  pricing: {\n    prompt: number;\n    completion: number;\n  };\n  description?: string;\n  architectures?: {\n    instruct: string;\n    modality: string;\n  };\n  top_provider?: {\n    max_completion_tokens: number;\n    is_moderated: boolean;\n  };\n}\n\nexport interface Message {\n  role: 'system' | 'user' | 'assistant';\n  content: string;\n}\n\nexport interface ChatOptions {\n  model?: string;\n  temperature?: number;\n  maxTokens?: number;\n  siteUrl?: string;\n  siteName?: string;\n}\n\nexport interface CostEstimate {\n  promptTokens: number;\n  completionTokens: number;\n  totalCost: number;\n}\n\nexport interface Usage {\n  prompt_tokens: number;\n  completion_tokens: number;\n  total_tokens: number;\n}\n\n/**\n * Production-ready OpenRouter client with comprehensive error handling and model management\n */\nexport class OpenRouterClient extends EventEmitter {\n  private apiKey: string;\n  private baseUrl = 'https://openrouter.ai/api/v1';\n  private models: Model[] = [];\n  private siteUrl?: string;\n  private siteName?: string;\n  private isInitialized = false;\n  \n  constructor(config: OpenRouterConfig) {\n    super();\n    this.apiKey = config.apiKey;\n    this.siteUrl = config.siteUrl;\n    this.siteName = config.siteName;\n    this.initialize();\n  }\n  \n  private async initialize() {\n    try {\n      await this.fetchModels();\n      this.isInitialized = true;\n      this.emit('ready');\n    } catch (error) {\n      console.error('Failed to initialize OpenRouter client:', error);\n      // Try to load from cache as fallback\n      const cached = localStorage.getItem('openrouter_models');\n      if (cached) {\n        try {\n          const { models } = JSON.parse(cached);\n          this.models = models;\n          this.isInitialized = true;\n          this.emit('ready');\n        } catch (parseError) {\n          console.error('Failed to load cached models:', parseError);\n          this.emit('error', error);\n        }\n      } else {\n        this.emit('error', error);\n      }\n    }\n  }\n  \n  async fetchModels(): Promise<Model[]> {\n    try {\n      const response = await fetch(`${this.baseUrl}/models`, {\n        headers: {\n          'Authorization': `Bearer ${this.apiKey}`,\n          'Content-Type': 'application/json',\n        }\n      });\n      \n      if (!response.ok) {\n        throw new Error(`Failed to fetch models: ${response.status} ${response.statusText}`);\n      }\n      \n      const data = await response.json();\n      this.models = data.data?.map(this.parseModel) || [];\n      \n      // Cache models with timestamp\n      localStorage.setItem('openrouter_models', JSON.stringify({\n        models: this.models,\n        timestamp: Date.now()\n      }));\n      \n      this.emit('modelsUpdated', this.models);\n      return this.models;\n    } catch (error) {\n      console.error('Failed to fetch models from OpenRouter:', error);\n      throw error;\n    }\n  }\n  \n  private parseModel(model: any): Model {\n    return {\n      id: model.id,\n      name: model.name || model.id,\n      provider: model.id.split('/')[0] || 'unknown',\n      contextLength: model.context_length || 4096,\n      pricing: {\n        prompt: parseFloat(model.pricing?.prompt || '0'),\n        completion: parseFloat(model.pricing?.completion || '0')\n      },\n      architectures: model.architecture,\n      top_provider: model.top_provider\n    };\n  }\n  \n  async getLatestModels(): Promise<Model[]> {\n    // Check cache first (refresh every hour)\n    const cached = localStorage.getItem('openrouter_models');\n    if (cached) {\n      try {\n        const { models, timestamp } = JSON.parse(cached);\n        if (Date.now() - timestamp < 3600000) { // 1 hour\n          this.models = models;\n          return models;\n        }\n      } catch (e) {\n        console.warn('Invalid cached models data:', e);\n      }\n    }\n    \n    // Fetch fresh model list\n    return this.fetchModels();\n  }\n  \n  async *chat(\n    messages: Message[], \n    options: ChatOptions = {}\n  ): AsyncGenerator<string, Usage | undefined> {\n    if (!this.isInitialized) {\n      throw new Error('OpenRouter client not initialized. Please wait for initialization.');\n    }\n    \n    if (!options.model) {\n      throw new Error('Model must be specified');\n    }\n\n    const headers: Record<string, string> = {\n      'Authorization': `Bearer ${this.apiKey}`,\n      'Content-Type': 'application/json',\n    };\n\n    // Add optional headers for OpenRouter leaderboard\n    if (options.siteUrl || this.siteUrl) {\n      headers['HTTP-Referer'] = options.siteUrl || this.siteUrl!;\n    }\n    if (options.siteName || this.siteName) {\n      headers['X-Title'] = options.siteName || this.siteName!;\n    }\n\n    const response = await fetch(`${this.baseUrl}/chat/completions`, {\n      method: 'POST',\n      headers,\n      body: JSON.stringify({\n        model: options.model,\n        messages,\n        stream: true,\n        temperature: options.temperature || 0.7,\n        max_tokens: options.maxTokens || 4096,\n        stream_options: {\n          include_usage: true\n        }\n      }),\n    });\n    \n    if (!response.ok) {\n      const errorText = await response.text();\n      throw new Error(`OpenRouter API error: ${response.status} ${response.statusText} - ${errorText}`);\n    }\n\n    if (!response.body) {\n      throw new Error('No response body received');\n    }\n\n    const reader = response.body.getReader();\n    const decoder = new TextDecoder();\n    let usage: Usage | undefined;\n    \n    try {\n      while (true) {\n        const { done, value } = await reader.read();\n        if (done) break;\n        \n        const chunk = decoder.decode(value, { stream: true });\n        const lines = chunk.split('\\n').filter(line => line.trim());\n        \n        for (const line of lines) {\n          if (line.startsWith('data: ')) {\n            const data = line.slice(6);\n            if (data === '[DONE]') continue;\n            \n            try {\n              const parsed = JSON.parse(data);\n              \n              // Check for usage information\n              if (parsed.usage) {\n                usage = parsed.usage;\n              }\n              \n              const content = parsed.choices?.[0]?.delta?.content;\n              if (content) {\n                yield content;\n              }\n            } catch (e) {\n              console.warn('Failed to parse streaming chunk:', e, 'Data:', data);\n            }\n          }\n        }\n      }\n      \n      return usage;\n    } finally {\n      reader.releaseLock();\n    }\n  }\n  \n  async completeChat(\n    messages: Message[], \n    options: ChatOptions = {}\n  ): Promise<{ content: string; usage?: Usage }> {\n    if (!this.isInitialized) {\n      throw new Error('OpenRouter client not initialized. Please wait for initialization.');\n    }\n    \n    if (!options.model) {\n      throw new Error('Model must be specified');\n    }\n\n    const headers: Record<string, string> = {\n      'Authorization': `Bearer ${this.apiKey}`,\n      'Content-Type': 'application/json',\n    };\n\n    // Add optional headers for OpenRouter leaderboard\n    if (options.siteUrl || this.siteUrl) {\n      headers['HTTP-Referer'] = options.siteUrl || this.siteUrl!;\n    }\n    if (options.siteName || this.siteName) {\n      headers['X-Title'] = options.siteName || this.siteName!;\n    }\n\n    const response = await fetch(`${this.baseUrl}/chat/completions`, {\n      method: 'POST',\n      headers,\n      body: JSON.stringify({\n        model: options.model,\n        messages,\n        stream: false,\n        temperature: options.temperature || 0.7,\n        max_tokens: options.maxTokens || 4096,\n      }),\n    });\n    \n    if (!response.ok) {\n      const errorText = await response.text();\n      throw new Error(`OpenRouter API error: ${response.status} ${response.statusText} - ${errorText}`);\n    }\n\n    const data = await response.json();\n    return {\n      content: data.choices[0].message.content,\n      usage: data.usage\n    };\n  }\n  \n  estimateCost(messages: Message[], model: string): CostEstimate {\n    const modelInfo = this.models.find(m => m.id === model);\n    if (!modelInfo) {\n      throw new Error(`Model ${model} not found`);\n    }\n    \n    const tokens = this.countTokens(messages);\n    return {\n      promptTokens: tokens.prompt,\n      completionTokens: tokens.completion,\n      totalCost: (\n        tokens.prompt * modelInfo.pricing.prompt +\n        tokens.completion * modelInfo.pricing.completion\n      ) / 1_000_000 // Convert to dollars\n    };\n  }\n  \n  /**\n   * Enhanced token counting with more accurate estimation\n   */\n  private countTokens(messages: Message[]): { prompt: number; completion: number } {\n    // More sophisticated token estimation\n    const text = messages.map(m => m.content).join(' ');\n    \n    // Better approximation: ~3.5 characters per token for English\n    // Account for JSON structure overhead\n    const baseTokens = Math.ceil(text.length / 3.5);\n    const structureOverhead = messages.length * 4; // ~4 tokens per message for role/structure\n    \n    const promptTokens = baseTokens + structureOverhead;\n    \n    // Estimate completion tokens based on typical response length (30% of prompt)\n    const completionTokens = Math.ceil(promptTokens * 0.3);\n    \n    return {\n      prompt: promptTokens,\n      completion: completionTokens\n    };\n  }\n  \n  getModels(): Model[] {\n    return this.models;\n  }\n  \n  getModel(id: string): Model | undefined {\n    return this.models.find(m => m.id === id);\n  }\n  \n  /**\n   * Get models filtered by provider\n   */\n  getModelsByProvider(provider: string): Model[] {\n    return this.models.filter(m => m.provider === provider);\n  }\n  \n  /**\n   * Get recommended models based on performance and cost\n   */\n  getRecommendedModels(): Model[] {\n    // Filter and sort models by quality metrics\n    return this.models\n      .filter(m => m.contextLength >= 8000) // Minimum context window\n      .sort((a, b) => {\n        // Custom scoring algorithm\n        const scoreA = this.calculateModelScore(a);\n        const scoreB = this.calculateModelScore(b);\n        return scoreB - scoreA;\n      })\n      .slice(0, 8); // Top 8 models\n  }\n  \n  private calculateModelScore(model: Model): number {\n    let score = model.contextLength / 1000; // Base score from context length\n    \n    // Bonus for known high-quality models\n    if (model.id.includes('claude-3-5-sonnet')) score += 100;\n    else if (model.id.includes('gpt-4o')) score += 90;\n    else if (model.id.includes('gemini-2.0-flash')) score += 85;\n    else if (model.id.includes('claude-3-opus')) score += 80;\n    else if (model.id.includes('gpt-4-turbo')) score += 75;\n    else if (model.id.includes('llama-3')) score += 70;\n    \n    // Penalty for very expensive models (unless they're premium)\n    if (model.pricing.prompt > 0.00005 && !model.id.includes('opus')) {\n      score -= 20;\n    }\n    \n    return score;\n  }\n  \n  /**\n   * Check if the client is ready to make requests\n   */\n  isReady(): boolean {\n    return this.isInitialized;\n  }\n  \n  /**\n   * Get available providers from current models\n   */\n  getAvailableProviders(): string[] {\n    const providers = new Set(this.models.map(m => m.provider));\n    return Array.from(providers).sort();\n  }\n}","import { OpenRouterClient, Model, Message, ChatOptions } from './openrouter-client';\n\nexport interface LLMProvider {\n  id: string;\n  name: string;\n  models: string[];\n  supportsStreaming: boolean;\n  requiresApiKey: boolean;\n}\n\nexport interface ComponentContext {\n  id: string;\n  name: string;\n  props: any;\n  state: any;\n  hooks: any[];\n  parent?: ComponentContext;\n  children: ComponentContext[];\n  sourceCode?: string;\n  language?: string;\n}\n\n/**\n * Enhanced LLM Hub with multi-provider support and smart model management\n */\nexport class LLMHub {\n  private providers = new Map<string, LLMProvider>();\n  private clients = new Map<string, OpenRouterClient>();\n  private activeProvider = 'openrouter';\n  private activeModel: string | null = null;\n  private modelsByProvider: Record<string, Model[]> = {};\n  private apiEndpoint?: string;\n  private modelsEndpoint?: string;\n  private isApiMode = false;\n  \n  constructor() {\n    this.registerProviders();\n  }\n  \n  private async registerProviders() {\n    // OpenRouter provides access to all models\n    this.providers.set('openrouter', {\n      id: 'openrouter',\n      name: 'OpenRouter (All Providers)',\n      models: [],\n      supportsStreaming: true,\n      requiresApiKey: true,\n    });\n  }\n  \n  async initializeProvider(providerId: string, apiKey: string, options?: { siteUrl?: string; siteName?: string }) {\n    if (providerId === 'openrouter') {\n      const client = new OpenRouterClient({\n        apiKey,\n        siteUrl: options?.siteUrl || window.location.href,\n        siteName: options?.siteName || document.title\n      });\n      \n      this.clients.set(providerId, client);\n      \n      // Wait for client to be ready\n      if (!client.isReady()) {\n        await new Promise((resolve, reject) => {\n          client.once('ready', resolve);\n          client.once('error', reject);\n          \n          // Add timeout\n          setTimeout(() => {\n            reject(new Error('OpenRouter client initialization timeout'));\n          }, 10000);\n        });\n      }\n      \n      try {\n        // Fetch latest models\n        const models = await client.getLatestModels();\n        \n        // Update provider with model list\n        const provider = this.providers.get('openrouter')!;\n        provider.models = models.map(m => m.id);\n        \n        // Group models by provider for easy filtering\n        this.modelsByProvider = models.reduce((acc, model) => {\n          const provider = model.id.split('/')[0];\n          if (!acc[provider]) acc[provider] = [];\n          acc[provider].push(model);\n          return acc;\n        }, {} as Record<string, Model[]>);\n        \n        // Set default model if none selected\n        if (!this.activeModel && models.length > 0) {\n          // Prefer Claude 3.5 Sonnet, GPT-4, or Gemini models\n          const preferredModel = models.find(m => \n            m.id.includes('claude-3-5-sonnet') || \n            m.id.includes('gpt-4o') || \n            m.id.includes('gemini-2.0-flash')\n          ) || models[0];\n          \n          this.activeModel = preferredModel.id;\n        }\n        \n        return true;\n      } catch (error) {\n        console.error('Failed to initialize OpenRouter provider:', error);\n        throw error;\n      }\n    }\n    \n    throw new Error(`Unknown provider: ${providerId}`);\n  }\n  \n  /**\n   * Initialize in demo mode - works without any API keys!\n   */\n  async initializeDemoMode() {\n    this.isApiMode = false;\n    this.activeProvider = 'demo';\n    this.activeModel = 'demo/gemini-2.0-flash';\n    \n    // Set up demo models\n    this.modelsByProvider = {\n      demo: [\n        {\n          id: 'demo/gemini-2.0-flash',\n          name: 'Gemini 2.0 Flash (Demo)',\n          provider: 'demo',\n          contextLength: 32768,\n          pricing: { prompt: 0, completion: 0 }\n        }\n      ]\n    };\n    \n    console.log('[LLMHub] Initialized in demo mode - no API keys required!');\n    return true;\n  }\n  \n  /**\n   * Initialize in API mode - uses server endpoints instead of direct API keys\n   */\n  async initializeApiMode(apiEndpoint: string, modelsEndpoint?: string) {\n    this.isApiMode = true;\n    this.apiEndpoint = apiEndpoint;\n    this.modelsEndpoint = modelsEndpoint || '/api/models';\n    \n    // Set active provider to api mode\n    this.activeProvider = 'api';\n    \n    // Fetch available models from the endpoint\n    if (modelsEndpoint) {\n      try {\n        const response = await fetch(modelsEndpoint);\n        if (response.ok) {\n          const data = await response.json();\n          const models = data.data || [];\n          \n          // Group models by provider\n          this.modelsByProvider = models.reduce((acc: Record<string, Model[]>, model: any) => {\n            const provider = model.id.split('/')[0];\n            if (!acc[provider]) acc[provider] = [];\n            acc[provider].push(model);\n            return acc;\n          }, {});\n          \n          // Set default model - prefer Gemini 2.0 Flash\n          if (!this.activeModel && models.length > 0) {\n            const preferredModel = models.find((m: any) => \n              m.id.includes('gemini-2.0-flash') ||\n              m.id.includes('gemini-2-flash')\n            ) || models.find((m: any) => \n              m.id.includes('claude-3-5-sonnet') || \n              m.id.includes('gpt-4o')\n            ) || models[0];\n            \n            this.activeModel = preferredModel.id;\n          }\n        }\n      } catch (error) {\n        console.error('Failed to fetch models:', error);\n      }\n    }\n    \n    return true;\n  }\n  \n  getProviders(): LLMProvider[] {\n    return Array.from(this.providers.values());\n  }\n  \n  getActiveProvider(): string {\n    return this.activeProvider;\n  }\n  \n  getModelsByProvider(provider: string): Model[] {\n    return this.modelsByProvider[provider] || [];\n  }\n  \n  getAvailableModels(): Model[] {\n    // In demo mode, return mock models\n    if (this.activeProvider === 'demo') {\n      return [{\n        id: 'demo/gemini-2.0-flash',\n        name: 'Gemini 2.0 Flash (Demo)',\n        provider: 'demo',\n        contextLength: 32768,\n        pricing: { prompt: 0, completion: 0 },\n        description: 'Demo mode - no API key required'\n      }];\n    }\n    \n    // Return all models from all providers\n    const allModels: Model[] = [];\n    Object.values(this.modelsByProvider).forEach(models => {\n      allModels.push(...models);\n    });\n    \n    return allModels;\n  }\n  \n  getAllModels(): Model[] {\n    const client = this.clients.get('openrouter');\n    return client ? client.getModels() : [];\n  }\n  \n  getRecommendedModels(): Model[] {\n    const allModels = this.getAllModels();\n    const recommendations: Model[] = [];\n    \n    // Get best model from each major provider\n    const providers = ['anthropic', 'openai', 'google', 'meta-llama', 'mistralai'];\n    \n    providers.forEach(provider => {\n      const providerModels = this.modelsByProvider[provider] || [];\n      if (providerModels.length > 0) {\n        // Sort by context length and capabilities, prefer newer models\n        const sorted = providerModels\n          .filter(m => m.contextLength >= 8000) // Filter out smaller context models\n          .sort((a, b) => {\n            // Prioritize specific good models\n            const aScore = this.getModelScore(a);\n            const bScore = this.getModelScore(b);\n            return bScore - aScore;\n          });\n        \n        if (sorted[0]) {\n          recommendations.push(sorted[0]);\n        }\n      }\n    });\n    \n    return recommendations;\n  }\n  \n  private getModelScore(model: Model): number {\n    let score = model.contextLength / 1000; // Base score from context length\n    \n    // Bonus for known good models\n    if (model.id.includes('claude-3-5-sonnet')) score += 100;\n    else if (model.id.includes('gpt-4o')) score += 90;\n    else if (model.id.includes('gemini-2.0-flash')) score += 85;\n    else if (model.id.includes('claude-3-opus')) score += 80;\n    else if (model.id.includes('gpt-4-turbo')) score += 75;\n    \n    // Penalty for very expensive models (unless they're premium)\n    if (model.pricing.prompt > 0.00005 && !model.id.includes('opus')) {\n      score -= 20;\n    }\n    \n    return score;\n  }\n  \n  setApiKey(provider: string, apiKey: string, options?: { siteUrl?: string; siteName?: string }) {\n    return this.initializeProvider(provider, apiKey, options);\n  }\n  \n  getActiveModel(): string | null {\n    return this.activeModel;\n  }\n  \n  setActiveModel(provider: string, model: string) {\n    this.activeProvider = provider;\n    this.activeModel = model;\n  }\n  \n  getClient(provider: string): OpenRouterClient | undefined {\n    return this.clients.get(provider);\n  }\n  \n  async *chat(\n    messages: Message[], \n    context?: ComponentContext\n  ): AsyncGenerator<string> {\n    // Demo mode - return helpful demo responses\n    if (this.activeProvider === 'demo') {\n      const demoResponses = [\n        \" Welcome to React LLM! I'm running in demo mode.\\n\\nTo enable full AI capabilities:\\n\\n1. **Option A**: Use your own API key\\n   ```javascript\\n   ReactLLM.init({\\n     providers: {\\n       openrouter: 'your-api-key'\\n     }\\n   });\\n   ```\\n\\n2. **Option B**: Use a server-side proxy\\n   ```javascript\\n   ReactLLM.init({\\n     apiEndpoint: '/api/chat'\\n   });\\n   ```\\n\\nI can see your React components and would love to help once configured!\",\n        \"I notice you have some React components on this page. Once you configure an API key, I can help you:\\n\\n-  Analyze component structure\\n-  Suggest improvements\\n-  Debug issues\\n-  Generate documentation\\n-  Refactor code\\n\\nReact LLM works on any website - just add the script tag!\",\n        \"Demo mode is limited, but here's what React LLM can do:\\n\\n- **Component Selection**: Click any component to select it\\n- **Context Aware**: I understand your component tree\\n- **Multi-Model**: Supports GPT-4, Claude, Gemini, and more\\n- **Browser Native**: No server required (with API keys)\\n\\nConfigure me to unlock these features!\"\n      ];\n      \n      const response = demoResponses[Math.floor(Math.random() * demoResponses.length)];\n      \n      // Simulate typing\n      for (const char of response) {\n        yield char;\n        await new Promise(resolve => setTimeout(resolve, 10));\n      }\n      return;\n    }\n    \n    // API mode - use endpoint\n    if (this.isApiMode && this.apiEndpoint) {\n      const enhancedMessages = this.enhanceWithContext(messages, context);\n      \n      const response = await fetch(this.apiEndpoint, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          messages: enhancedMessages,\n          model: this.activeModel,\n          stream: true,\n        }),\n      });\n      \n      if (!response.ok) {\n        throw new Error(`API request failed: ${response.statusText}`);\n      }\n      \n      // Handle streaming response\n      const reader = response.body?.getReader();\n      if (!reader) throw new Error('No response body');\n      \n      const decoder = new TextDecoder();\n      let buffer = '';\n      \n      while (true) {\n        const { done, value } = await reader.read();\n        if (done) break;\n        \n        buffer += decoder.decode(value, { stream: true });\n        const lines = buffer.split('\\n');\n        buffer = lines.pop() || '';\n        \n        for (const line of lines) {\n          if (line.startsWith('data: ')) {\n            const data = line.slice(6);\n            if (data === '[DONE]') continue;\n            \n            try {\n              const parsed = JSON.parse(data);\n              const content = parsed.choices?.[0]?.delta?.content;\n              if (content) yield content;\n            } catch (e) {\n              // Ignore parse errors\n            }\n          }\n        }\n      }\n      return;\n    }\n    \n    // Direct client mode\n    const client = this.clients.get(this.activeProvider);\n    if (!client) {\n      throw new Error('No API key set for provider');\n    }\n    \n    // Enhance messages with component context\n    const enhancedMessages = this.enhanceWithContext(messages, context);\n    \n    // Use active model or throw error\n    if (!this.activeModel) {\n      throw new Error('No model selected. Please choose a model first.');\n    }\n    \n    yield* client.chat(enhancedMessages, {\n      model: this.activeModel,\n      siteUrl: window.location.href,\n      siteName: document.title\n    });\n  }\n  \n  async completeChat(\n    messages: Message[],\n    context?: ComponentContext\n  ): Promise<string> {\n    // Demo mode\n    if (this.activeProvider === 'demo') {\n      return \"Welcome to React LLM! I'm running in demo mode. Configure an API key to unlock full AI capabilities.\";\n    }\n    \n    // API mode - use endpoint\n    if (this.isApiMode && this.apiEndpoint) {\n      const enhancedMessages = this.enhanceWithContext(messages, context);\n      \n      const response = await fetch(this.apiEndpoint, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          messages: enhancedMessages,\n          model: this.activeModel,\n          stream: false,\n        }),\n      });\n      \n      if (!response.ok) {\n        throw new Error(`API request failed: ${response.statusText}`);\n      }\n      \n      const data = await response.json();\n      return data.choices?.[0]?.message?.content || '';\n    }\n    \n    // Direct client mode\n    const client = this.clients.get(this.activeProvider);\n    if (!client) {\n      throw new Error('No API key set for provider');\n    }\n    \n    // Enhance messages with component context\n    const enhancedMessages = this.enhanceWithContext(messages, context);\n    \n    // Use active model or throw error\n    if (!this.activeModel) {\n      throw new Error('No model selected. Please choose a model first.');\n    }\n    \n    return client.completeChat(enhancedMessages, {\n      model: this.activeModel,\n      siteUrl: window.location.href,\n      siteName: document.title\n    });\n  }\n  \n  /**\n   * Enhanced context building with more sophisticated component analysis\n   */\n  private enhanceWithContext(\n    messages: Message[], \n    context?: ComponentContext\n  ): Message[] {\n    if (!context) return messages;\n    \n    const contextParts = [\n      `You are helping with a React component. Here's the context:`,\n      ``,\n      `Component: ${context.name}`,\n      `Type: ${this.getComponentType(context)}`,\n      `Props: ${this.formatProps(context.props)}`,\n      context.state ? `State: ${JSON.stringify(context.state, null, 2)}` : null,\n      context.hooks.length > 0 ? `Hooks: ${context.hooks.length} detected` : null,\n      context.parent ? `Parent: ${context.parent.name}` : null,\n      context.children.length > 0 ? `Children: ${context.children.map(c => c.name).join(', ')}` : null,\n      ``,\n      context.sourceCode ? `Source code:\\n\\`\\`\\`${context.language || 'jsx'}\\n${context.sourceCode}\\n\\`\\`\\`` : null,\n      ``,\n      `Please provide helpful guidance for working with this component. Consider its props, state, and relationships when providing suggestions.`\n    ].filter(Boolean).join('\\n');\n    \n    const systemMessage: Message = {\n      role: 'system',\n      content: contextParts\n    };\n    \n    return [systemMessage, ...messages];\n  }\n  \n  private getComponentType(context: ComponentContext): string {\n    if (context.hooks.length > 0) return 'Function Component (with hooks)';\n    if (context.state) return 'Class Component';\n    if (context.props && Object.keys(context.props).length > 0) return 'Function Component';\n    return 'Component';\n  }\n  \n  private formatProps(props: any): string {\n    if (!props || Object.keys(props).length === 0) {\n      return 'No props';\n    }\n    \n    const filteredProps = Object.entries(props)\n      .filter(([key]) => !key.startsWith('__') && key !== 'children')\n      .reduce((acc, [key, value]) => {\n        acc[key] = typeof value === 'function' ? '[Function]' : \n                  typeof value === 'object' && value !== null ? '[Object]' : \n                  value;\n        return acc;\n      }, {} as Record<string, any>);\n    \n    return Object.keys(filteredProps).length > 0 ? \n      JSON.stringify(filteredProps, null, 2) : \n      'No relevant props';\n  }\n  \n  isInitialized(): boolean {\n    return this.activeProvider === 'demo' || this.isApiMode || this.clients.size > 0;\n  }\n  \n  getAvailableProviders(): string[] {\n    return Array.from(this.clients.keys());\n  }\n  \n  /**\n   * Get cost estimate for a conversation\n   */\n  estimateCost(messages: Message[], context?: ComponentContext): any {\n    const client = this.clients.get(this.activeProvider);\n    if (!client || !this.activeModel) {\n      return null;\n    }\n    \n    const enhancedMessages = this.enhanceWithContext(messages, context);\n    return client.estimateCost(enhancedMessages, this.activeModel);\n  }\n}"],"mappings":"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AA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA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","names":["slice","options","vnodeId","isValidElement","rerenderQueue","prevDebounce","defer","depthSort","CAPTURE_REGEX","eventClock","eventProxy","eventProxyCapture","i","EMPTY_OBJ","EMPTY_ARR","IS_NON_DIMENSIONAL","isArray","Array","assign","obj","props","removeNode","node","parentNode","removeChild","createElement","type","children","key","ref","normalizedProps","arguments","length","call","defaultProps","createVNode","original","vnode","__k","__","__b","__e","__c","constructor","__v","__i","__u","Fragment","props","children","BaseComponent","context","this","getDomSibling","vnode","childIndex","__","__i","sibling","__k","length","__e","type","updateParentDomPointers","i","child","__c","base","enqueueRender","c","__d","rerenderQueue","push","process","__r","prevDebounce","options","debounceRendering","defer","component","newVNode","oldVNode","oldDom","commitQueue","refQueue","l","sort","depthSort","shift","__v","__P","assign","diff","__n","namespaceURI","__u","commitRoot","diffChildren","parentDom","renderResult","newParentVNode","oldParentVNode","globalContext","namespace","excessDomChildren","isHydrating","childVNode","newDom","firstChildDom","result","oldChildren","EMPTY_ARR","newChildrenLength","constructNewChildrenArray","EMPTY_OBJ","ref","applyRef","insert","nextSibling","skewedIndex","matchingIndex","oldChildrenLength","remainingOldChildren","skew","Array","constructor","String","createVNode","isArray","undefined","__b","key","findMatchingIndex","unmount","parentVNode","contains","insertBefore","nodeType","findMatchingIndex","childVNode","oldChildren","skewedIndex","remainingOldChildren","x","y","key","type","oldVNode","__u","length","setStyle","style","value","setProperty","IS_NON_DIMENSIONAL","test","dom","name","oldValue","namespace","useCapture","lowerCaseName","o","cssText","replace","CAPTURE_REGEX","toLowerCase","slice","l","_attached","eventClock","addEventListener","eventProxyCapture","eventProxy","removeEventListener","e","removeAttribute","setAttribute","createEventProxy","this","eventHandler","_dispatched","options","event","diff","parentDom","newVNode","globalContext","excessDomChildren","commitQueue","oldDom","isHydrating","refQueue","tmp","c","isNew","oldProps","oldState","snapshot","clearProcessingException","newProps","isClassComponent","provider","componentContext","i","renderHook","count","renderResult","newType","undefined","constructor","__e","__b","outer","props","prototype","render","contextType","__c","__","__E","BaseComponent","doRender","sub","state","context","__n","__d","__h","_sb","__s","getDerivedStateFromProps","assign","__v","componentWillMount","componentDidMount","push","componentWillReceiveProps","shouldComponentUpdate","__k","some","vnode","componentWillUpdate","componentDidUpdate","__P","__r","getChildContext","getSnapshotBeforeUpdate","Fragment","cloneNode","children","diffChildren","isArray","base","then","MODE_HYDRATE","nodeType","nextSibling","indexOf","removeNode","diffElementNodes","diffed","commitRoot","root","applyRef","cb","call","node","map","newHtml","oldHtml","newChildren","inputValue","checked","localName","document","createTextNode","createElementNS","is","__m","data","childNodes","EMPTY_OBJ","attributes","__html","innerHTML","content","getDomSibling","ref","hasRefUnmount","current","unmount","parentVNode","skipRemove","r","componentWillUnmount","replaceNode","documentElement","createElement","namespaceURI","firstChild","slice","EMPTY_ARR","options","__e","error","vnode","oldVNode","errorInfo","component","ctor","handled","__","__c","constructor","getDerivedStateFromError","setState","__d","componentDidCatch","__E","e","vnodeId","isValidElement","undefined","BaseComponent","prototype","update","callback","s","this","__s","state","assign","props","__v","_sb","push","enqueueRender","forceUpdate","__h","render","Fragment","rerenderQueue","defer","Promise","then","bind","resolve","setTimeout","depthSort","a","b","__b","process","__r","CAPTURE_REGEX","eventClock","eventProxy","createEventProxy","eventProxyCapture","i","currentIndex","currentComponent","previousComponent","prevRaf","currentHook","afterPaintEffects","options","_options","oldBeforeDiff","__b","oldBeforeRender","__r","oldAfterDiff","diffed","oldCommit","__c","oldBeforeUnmount","unmount","oldRoot","__","getHookState","index","type","__h","hooks","__H","length","push","useMemo","factory","args","state","getHookState","currentIndex","argsChanged","__H","__","__h","flushAfterPaintEffects","component","afterPaintEffects","shift","__P","__H","__h","forEach","invokeCleanup","invokeEffect","e","options","__e","__v","__b","vnode","currentComponent","oldBeforeDiff","__","parentDom","__k","__m","oldRoot","__r","oldBeforeRender","currentIndex","hooks","__c","previousComponent","hookItem","__N","_pendingArgs","diffed","oldAfterDiff","c","length","push","prevRaf","requestAnimationFrame","afterNextFrame","commitQueue","some","filter","cb","oldCommit","unmount","oldBeforeUnmount","hasErrored","s","HAS_RAF","callback","raf","done","clearTimeout","timeout","cancelAnimationFrame","setTimeout","hook","comp","cleanup","argsChanged","oldArgs","newArgs","arg","index","BRAND_SYMBOL","Symbol","endBatch","batchDepth","error","hasError","batchedEffect","effect","batchIteration","next","_nextBatchedEffect","_flags","needsToRecompute","_callback","err","evalContext","untracked","fn","prevContext","batchedEffect","batchDepth","batchIteration","globalVersion","addDependency","signal","node","_node","_target","_version","_source","_prevSource","_sources","_nextSource","_prevTarget","_nextTarget","_rollbackNode","_flags","_subscribe","Signal","value","options","this","_value","_targets","_watched","watched","_unwatched","unwatched","prototype","brand","BRAND_SYMBOL","_refresh","_this","targets","_this$_watched","call","_unsubscribe","_this2","prev","next","_this2$_unwatched","subscribe","_this3","effect","valueOf","toString","toJSON","peek","Object","defineProperty","get","set","Error","_notify","endBatch","needsToRecompute","target","prepareSources","rollbackNode","cleanupSources","head","Computed","undefined","_fn","_globalVersion","err","OUTDATED","computed","cleanupEffect","cleanup","_cleanup","disposeEffect","endEffect","Effect","_nextBatchedEffect","_callback","finish","_start","bind","_dispose","dispose","currentComponent","finishUpdate","hook","hookName","hookFn","options","bind","setCurrentUpdater","updater","_start","SignalValue","_ref","_this","this","data","currentSignal","useSignal","value","s","useMemo","v","__v","__","__c","_updateFlags","_updater","_callback","_this$base","end","isValidElement","base","nodeType","setState","computed","displayName","Object","defineProperties","Signal","prototype","constructor","configurable","undefined","type","props","get","__b","old","vnode","signalProps","i","__np","peek","component","update","effect","createUpdater","error","oldVNode","dom","__e","renderedProps","updaters","_updaters","prop","_dispose","signal","createPropUpdater","_update","propSignal","setAsProperty","ownerSVGElement","changeSignal","newSignal","newProps","setAttribute","removeAttribute","index","Component","shouldComponentUpdate","state","hasSignals","_sources","__f","u","escape","html","_","n","e","i","c","l","b","link","lexer","options","list","t","tag","text","block","parser","j","k","tokens","args","ret","walkTokens","src","q","e","s","a","b","i","options","options","x","y","a","b","ComponentInspector","E","e","E","m","e","c","i","html","link","ComponentInspector","e","options","m","a","b","options","m","provider","a","b","enhancedMessages","e","c"]}